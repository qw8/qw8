<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>JavaScript编程题 | 秦伟博客 | 前端、全栈、SEO的知识点、面试题与学习链接的整理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="JavaScript,编程题,算法">
    <meta name="description" content="常考代码题简单实现 Function.bind 函数？12345678910111213if (!Function.prototype.bind) &amp;#123;  Function.prototype.bind = function(that) &amp;#123;    var func = this, args = arguments;    return function() &amp;#123;">
<meta name="keywords" content="JavaScript,编程题,算法">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript编程题">
<meta property="og:url" content="https://qw8.github.io/interview/javascript-bian-cheng-ti.html">
<meta property="og:site_name" content="秦伟博客">
<meta property="og:description" content="常考代码题简单实现 Function.bind 函数？12345678910111213if (!Function.prototype.bind) &amp;#123;  Function.prototype.bind = function(that) &amp;#123;    var func = this, args = arguments;    return function() &amp;#123;">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2024-03-31T15:48:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript编程题">
<meta name="twitter:description" content="常考代码题简单实现 Function.bind 函数？12345678910111213if (!Function.prototype.bind) &amp;#123;  Function.prototype.bind = function(that) &amp;#123;    var func = this, args = arguments;    return function() &amp;#123;">
    
        <link rel="alternate" type="application/atom+xml" title="秦伟博客" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/qw.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
<div id="loading" class="active"></div>

<aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">秦伟</h5>
          <a href="mailto:124729081@qq.com" title="124729081@qq.com" class="mail">124729081@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-hourglass"></i>
                时光
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://wpa.qq.com/msgrd?v=3&uin=124729081&site=qq&menu=yes" target="_blank" >
                <i class="icon icon-lg icon-qq"></i>
                聊天
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=124729081@qq.com"  >
                <i class="icon icon-lg icon-envelope-o"></i>
                邮箱
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/user"  >
                <i class="icon icon-lg icon-user"></i>
                简介
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://gitee.com/qw66" target="_blank" >
                <i class="icon icon-lg icon-code"></i>
                Gitee
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/qw8" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

<main id="main">
    <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">JavaScript编程题</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">JavaScript编程题</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-05-28T02:41:39.000Z" itemprop="datePublished" class="page-time">
  2020-05-28
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/前端面试题/">前端面试题</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#常考代码题"><span class="post-toc-number">1.</span> <span class="post-toc-text">常考代码题</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#简单实现-Function-bind-函数？"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">简单实现 Function.bind 函数？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现一个-Function-bind"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">实现一个 Function.bind</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写一个-promise"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">手写一个 promise</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写一个-Promise-中高级必考"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">手写一个 Promise(中高级必考)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#用-js-实现一个标准的排序算法"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">用 js 实现一个标准的排序算法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#一-冒泡排序"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">一.冒泡排序</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#二-选择排序"><span class="post-toc-number">1.5.2.</span> <span class="post-toc-text">二.选择排序</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#三-插入排序"><span class="post-toc-number">1.5.3.</span> <span class="post-toc-text">三.插入排序</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#四-希尔排序"><span class="post-toc-number">1.5.4.</span> <span class="post-toc-text">四.希尔排序</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#五-归并排序"><span class="post-toc-number">1.5.5.</span> <span class="post-toc-text">五.归并排序</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#六-快速排序"><span class="post-toc-number">1.5.6.</span> <span class="post-toc-text">六.快速排序</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写数组快速排序"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">手写数组快速排序</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#如何实现数组的随机排序？"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">如何实现数组的随机排序？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#用-js-实现随机选取-10–100-之间的-10-个数字，存入一个数组，并排序。"><span class="post-toc-number">1.8.</span> <span class="post-toc-text">用 js 实现随机选取 10–100 之间的 10 个数字，存入一个数组，并排序。</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写防抖-Debouncing-和节流-Throttling"><span class="post-toc-number">1.9.</span> <span class="post-toc-text">手写防抖(Debouncing)和节流(Throttling)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现防抖函数（debounce）"><span class="post-toc-number">1.10.</span> <span class="post-toc-text">实现防抖函数（debounce）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现节流函数（throttle）"><span class="post-toc-number">1.11.</span> <span class="post-toc-text">实现节流函数（throttle）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写一个-JS-深拷贝"><span class="post-toc-number">1.12.</span> <span class="post-toc-text">手写一个 JS 深拷贝</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#如何封装一个-javascript-的类型判断函数？"><span class="post-toc-number">1.13.</span> <span class="post-toc-text">如何封装一个 javascript 的类型判断函数？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#如何判断一个对象是否为空对象？"><span class="post-toc-number">1.14.</span> <span class="post-toc-text">如何判断一个对象是否为空对象？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用闭包实现每隔一秒打印-1-2-3-4"><span class="post-toc-number">1.15.</span> <span class="post-toc-text">使用闭包实现每隔一秒打印 1,2,3,4</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写一个-jsonp"><span class="post-toc-number">1.16.</span> <span class="post-toc-text">手写一个 jsonp</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写一个观察者模式？"><span class="post-toc-number">1.17.</span> <span class="post-toc-text">手写一个观察者模式？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#EventEmitter-实现"><span class="post-toc-number">1.18.</span> <span class="post-toc-text">EventEmitter 实现</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#一道常被人轻视的前端-JS-面试题"><span class="post-toc-number">1.19.</span> <span class="post-toc-text">一道常被人轻视的前端 JS 面试题</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#如何查找一篇英文文章中出现频率最高的单词？"><span class="post-toc-number">1.20.</span> <span class="post-toc-text">如何查找一篇英文文章中出现频率最高的单词？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#用最简单的方式，求一个数组中最大的元素，例如-arr-5-7-9-42-18-29"><span class="post-toc-number">1.21.</span> <span class="post-toc-text">用最简单的方式，求一个数组中最大的元素，例如 arr=[5,7,9,42,18,29]</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#如何解决数组塌陷问题"><span class="post-toc-number">1.22.</span> <span class="post-toc-text">如何解决数组塌陷问题</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#已知-id-的-input-输入框，希望获取这个输入框的输入值，怎么做？（不使用第三方框架）"><span class="post-toc-number">1.23.</span> <span class="post-toc-text">已知 id 的 input 输入框，希望获取这个输入框的输入值，怎么做？（不使用第三方框架）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#获取到页面中所有的-checkbox-怎么做？（不使用第三方框架）"><span class="post-toc-number">1.24.</span> <span class="post-toc-text">获取到页面中所有的 checkbox 怎么做？（不使用第三方框架）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设置一个已知-id-的-div-的-html-内容为-xxxx，字体颜色设置为黑色（不使用第三方框架）"><span class="post-toc-number">1.25.</span> <span class="post-toc-text">设置一个已知 id 的 div 的 html 内容为 xxxx，字体颜色设置为黑色（不使用第三方框架）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#已知有字符串-foo-“get-element-by-id”-写一个-function-将其转化为驼峰表示法“getElementById”"><span class="post-toc-number">1.26.</span> <span class="post-toc-text">已知有字符串 foo=“get-element-by-id”,写一个 function 将其转化为驼峰表示法“getElementById”</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#写一个-function，清除字符串前后的空格（兼容所有的浏览器）"><span class="post-toc-number">1.27.</span> <span class="post-toc-text">写一个 function，清除字符串前后的空格（兼容所有的浏览器）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#运算符面试题"><span class="post-toc-number">1.28.</span> <span class="post-toc-text">运算符面试题</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#判断相等"><span class="post-toc-number">1.29.</span> <span class="post-toc-text">判断相等</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#闭包"><span class="post-toc-number">1.30.</span> <span class="post-toc-text">闭包</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现一个-new-操作符"><span class="post-toc-number">1.31.</span> <span class="post-toc-text">实现一个 new 操作符</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现一个-call-或-apply"><span class="post-toc-number">1.32.</span> <span class="post-toc-text">实现一个 call 或 apply</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#原型链面试题"><span class="post-toc-number">1.33.</span> <span class="post-toc-text">原型链面试题</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现一个继承"><span class="post-toc-number">1.34.</span> <span class="post-toc-text">实现一个继承</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#编写一个方法-求一个字符串的字节长度"><span class="post-toc-number">1.35.</span> <span class="post-toc-text">编写一个方法 求一个字符串的字节长度</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#写一个通用的事件侦听器函数"><span class="post-toc-number">1.36.</span> <span class="post-toc-text">写一个通用的事件侦听器函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#写一个通用的事件侦听器函数-1"><span class="post-toc-number">1.37.</span> <span class="post-toc-text">写一个通用的事件侦听器函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写事件侦听器，并要求兼容浏览器"><span class="post-toc-number">1.38.</span> <span class="post-toc-text">手写事件侦听器，并要求兼容浏览器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#写一个通用的事件侦听器函数。"><span class="post-toc-number">1.39.</span> <span class="post-toc-text">写一个通用的事件侦听器函数。</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写事件模型"><span class="post-toc-number">1.40.</span> <span class="post-toc-text">手写事件模型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写事件代理，并要求兼容浏览器"><span class="post-toc-number">1.41.</span> <span class="post-toc-text">手写事件代理，并要求兼容浏览器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写事件触发器，并要求兼容浏览器"><span class="post-toc-number">1.42.</span> <span class="post-toc-text">手写事件触发器，并要求兼容浏览器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写-Function-bind-函数"><span class="post-toc-number">1.43.</span> <span class="post-toc-text">手写 Function.bind 函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JS实现数组去重方法总结-六种方法"><span class="post-toc-number">1.44.</span> <span class="post-toc-text">JS实现数组去重方法总结(六种方法)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方法一："><span class="post-toc-number">1.44.1.</span> <span class="post-toc-text">方法一：</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方法二：利用splice直接在原数组进行操作"><span class="post-toc-number">1.44.2.</span> <span class="post-toc-text">方法二：利用splice直接在原数组进行操作</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方法三：利用对象的属性不能相同的特点进行去重"><span class="post-toc-number">1.44.3.</span> <span class="post-toc-text">方法三：利用对象的属性不能相同的特点进行去重</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方法四：数组递归去重"><span class="post-toc-number">1.44.4.</span> <span class="post-toc-text">方法四：数组递归去重</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方法五：利用indexOf以及forEach"><span class="post-toc-number">1.44.5.</span> <span class="post-toc-text">方法五：利用indexOf以及forEach</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方法六：利用ES6的set"><span class="post-toc-number">1.44.6.</span> <span class="post-toc-text">方法六：利用ES6的set</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#合并数组并去重的方法"><span class="post-toc-number">1.45.</span> <span class="post-toc-text">合并数组并去重的方法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#一、concat-方法"><span class="post-toc-number">1.45.1.</span> <span class="post-toc-text">一、concat()方法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#二、Array-prototype-push-apply"><span class="post-toc-number">1.45.2.</span> <span class="post-toc-text">二、Array.prototype.push.apply()</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#手写数组去重"><span class="post-toc-number">1.46.</span> <span class="post-toc-text">手写数组去重</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#将url的查询参数解析成字典对象"><span class="post-toc-number">1.47.</span> <span class="post-toc-text">将url的查询参数解析成字典对象</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#封装函数节流函数"><span class="post-toc-number">1.48.</span> <span class="post-toc-text">封装函数节流函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#用JS实现千位分隔符"><span class="post-toc-number">1.49.</span> <span class="post-toc-text">用JS实现千位分隔符</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#深克隆（deepclone）"><span class="post-toc-number">1.50.</span> <span class="post-toc-text">深克隆（deepclone）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现Event-event-bus"><span class="post-toc-number">1.51.</span> <span class="post-toc-text">实现Event(event bus)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现instanceOf"><span class="post-toc-number">1.52.</span> <span class="post-toc-text">实现instanceOf</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现一个call"><span class="post-toc-number">1.53.</span> <span class="post-toc-text">实现一个call</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现apply方法"><span class="post-toc-number">1.54.</span> <span class="post-toc-text">实现apply方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现bind"><span class="post-toc-number">1.55.</span> <span class="post-toc-text">实现bind</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#模拟Object-create"><span class="post-toc-number">1.56.</span> <span class="post-toc-text">模拟Object.create</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现类的继承"><span class="post-toc-number">1.57.</span> <span class="post-toc-text">实现类的继承</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现JSON-parse"><span class="post-toc-number">1.58.</span> <span class="post-toc-text">实现JSON.parse</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现Promise"><span class="post-toc-number">1.59.</span> <span class="post-toc-text">实现Promise</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#解析-URL-Params-为对象"><span class="post-toc-number">1.60.</span> <span class="post-toc-text">解析 URL Params 为对象</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#模板引擎实现"><span class="post-toc-number">1.61.</span> <span class="post-toc-text">模板引擎实现</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#转化为驼峰命名"><span class="post-toc-number">1.62.</span> <span class="post-toc-text">转化为驼峰命名</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#查找字符串中出现最多的字符和个数"><span class="post-toc-number">1.63.</span> <span class="post-toc-text">查找字符串中出现最多的字符和个数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#字符串查找"><span class="post-toc-number">1.64.</span> <span class="post-toc-text">字符串查找</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现千位分隔符"><span class="post-toc-number">1.65.</span> <span class="post-toc-text">实现千位分隔符</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ES6"><span class="post-toc-number">2.</span> <span class="post-toc-text">ES6</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#箭头函数问题"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">箭头函数问题</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#this-面试题"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">this 面试题</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#把以下代码使用两种方法，依次输出-0-9"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">把以下代码使用两种方法，依次输出 0-9</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#怎么解决回调函数里面回调另一个函数，另一个函数的参数需要依赖这个回调函数。需要被解决的代码如下："><span class="post-toc-number">2.4.</span> <span class="post-toc-text">怎么解决回调函数里面回调另一个函数，另一个函数的参数需要依赖这个回调函数。需要被解决的代码如下：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#jQuery-的-ajax-返回的是-promise-对象吗？"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">jQuery 的 ajax 返回的是 promise 对象吗？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#promise-只有-2-个状态，成功和失败，怎么让一个函数无论成功还是失败都能被调用？"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">promise 只有 2 个状态，成功和失败，怎么让一个函数无论成功还是失败都能被调用？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#以下代码依次输出的内容是？"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">以下代码依次输出的内容是？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Promise-编程题"><span class="post-toc-number">2.8.</span> <span class="post-toc-text">Promise 编程题</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#不常考代码题"><span class="post-toc-number">3.</span> <span class="post-toc-text">不常考代码题</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#变量提升"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">变量提升</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#函数提升"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">函数提升</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#函数和变量同时提升"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">函数和变量同时提升</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#你如何获取浏览器-URL-中查询字符串中的参数？"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">你如何获取浏览器 URL 中查询字符串中的参数？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#js-实现一个打点计时器"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">js 实现一个打点计时器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#正则表达式，验证手机号码，验证规则：11-位数字，以-1-位开头"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">正则表达式，验证手机号码，验证规则：11 位数字，以 1 位开头</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#请给-Array-本地对象增加一个原型方法，他的用途是删除数组中重复的条目并按升序排序，最后返回新数组。"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">请给 Array 本地对象增加一个原型方法，他的用途是删除数组中重复的条目并按升序排序，最后返回新数组。</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#为字符串扩展一个-rewrite-函数，接收一个正则-pattern-和一个字符串-result-如果该字符串符合-pattern，-则以-result-对结果进行转义输出。"><span class="post-toc-number">3.8.</span> <span class="post-toc-text">为字符串扩展一个 rewrite 函数，接收一个正则 pattern 和一个字符串 result,如果该字符串符合 pattern， 则以 result 对结果进行转义输出。</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现一个-js-对象序列化函数，将-js-对象序列化为可反序列化的代码，要求-1-尽量和-json-兼容，2-支持不可序列化的值，如-undefined-NaN-Infinify-Infinity，3-支持特殊对象，如正则、Date-等"><span class="post-toc-number">3.9.</span> <span class="post-toc-text">实现一个 js 对象序列化函数，将 js 对象序列化为可反序列化的代码，要求 1.尽量和 json 兼容，2.支持不可序列化的值，如 undefined/NaN/Infinify-Infinity，3. 支持特殊对象，如正则、Date 等</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#头条的视频网站上支持了弹幕，假设一个视频有很多弹幕，弹幕的数据是一个数组，格式定义如下："><span class="post-toc-number">3.10.</span> <span class="post-toc-text">头条的视频网站上支持了弹幕，假设一个视频有很多弹幕，弹幕的数据是一个数组，格式定义如下：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#尝试实现注释部分的-JavaScript-代码，-可在其他任何地方添加更多代码。"><span class="post-toc-number">3.11.</span> <span class="post-toc-text">尝试实现注释部分的 JavaScript 代码， 可在其他任何地方添加更多代码。</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#请编写一个-JavaScript-函数-parseQuerySting-它的用途是把-URL-参数解析为一个对象"><span class="post-toc-number">3.12.</span> <span class="post-toc-text">请编写一个 JavaScript 函数 parseQuerySting, 它的用途是把 URL 参数解析为一个对象</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#判断一个字符串中出现次数最多的字符，统计这个次数"><span class="post-toc-number">3.13.</span> <span class="post-toc-text">判断一个字符串中出现次数最多的字符，统计这个次数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#写一个获取非行间样式的函数"><span class="post-toc-number">3.14.</span> <span class="post-toc-text">写一个获取非行间样式的函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#字符串反转，如将-‘12345678’-变成-‘87654321’"><span class="post-toc-number">3.15.</span> <span class="post-toc-text">字符串反转，如将 ‘12345678’ 变成 ‘87654321’</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#将数字-12345678-转化成-RMB-形式-如：-12-345-678"><span class="post-toc-number">3.16.</span> <span class="post-toc-text">将数字 12345678 转化成 RMB 形式 如： 12,345,678</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#生成-5-个不同的随机数"><span class="post-toc-number">3.17.</span> <span class="post-toc-text">生成 5 个不同的随机数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#去掉数组中重复的数字"><span class="post-toc-number">3.18.</span> <span class="post-toc-text">去掉数组中重复的数字</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#阶乘函数"><span class="post-toc-number">3.19.</span> <span class="post-toc-text">阶乘函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#看题做答"><span class="post-toc-number">3.20.</span> <span class="post-toc-text">看题做答</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面输出多少？"><span class="post-toc-number">3.21.</span> <span class="post-toc-text">下面输出多少？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面输出多少？-1"><span class="post-toc-number">3.22.</span> <span class="post-toc-text">下面输出多少？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#输出多少？"><span class="post-toc-number">3.23.</span> <span class="post-toc-text">输出多少？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JS-的继承性？"><span class="post-toc-number">3.24.</span> <span class="post-toc-text">JS 的继承性？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#精度问题-JS-精度不能精确到-0-1-所以-。。。。同时存在于值和差值中"><span class="post-toc-number">3.25.</span> <span class="post-toc-text">精度问题: JS 精度不能精确到 0.1 所以  。。。。同时存在于值和差值中</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#加减运算"><span class="post-toc-number">3.26.</span> <span class="post-toc-text">加减运算</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#结果是什么？"><span class="post-toc-number">3.27.</span> <span class="post-toc-text">结果是什么？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#输出结果"><span class="post-toc-number">3.28.</span> <span class="post-toc-text">输出结果</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#计算字符串字节数"><span class="post-toc-number">3.29.</span> <span class="post-toc-text">计算字符串字节数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#结果是"><span class="post-toc-number">3.30.</span> <span class="post-toc-text">结果是</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#声明对象，添加属性，输出属性"><span class="post-toc-number">3.31.</span> <span class="post-toc-text">声明对象，添加属性，输出属性</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#匹配输入的字符：第一个必须是字母或下划线开头，长度-5-20"><span class="post-toc-number">3.32.</span> <span class="post-toc-text">匹配输入的字符：第一个必须是字母或下划线开头，长度 5-20</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#检测变量类型"><span class="post-toc-number">3.33.</span> <span class="post-toc-text">检测变量类型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#如何在-HTML-中添加事件，几种方法？"><span class="post-toc-number">3.34.</span> <span class="post-toc-text">如何在 HTML 中添加事件，几种方法？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#请问代码实现-outerHTML"><span class="post-toc-number">3.35.</span> <span class="post-toc-text">请问代码实现 outerHTML</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JS-中的简单继承-call-方法！"><span class="post-toc-number">3.36.</span> <span class="post-toc-text">JS 中的简单继承 call 方法！</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#解析-URL-成一个对象？"><span class="post-toc-number">3.37.</span> <span class="post-toc-text">解析 URL 成一个对象？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#看下列代码输出什么？"><span class="post-toc-number">3.38.</span> <span class="post-toc-text">看下列代码输出什么？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#看下列代码-输出什么？"><span class="post-toc-number">3.39.</span> <span class="post-toc-text">看下列代码,输出什么？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#已知数组-var-stringArray-“This”-“is”-“Baidu”-“Campus”-，Alert-出”This-is-Baidu-Campus”。"><span class="post-toc-number">3.40.</span> <span class="post-toc-text">已知数组 var stringArray = [“This”, “is”, “Baidu”, “Campus”]，Alert 出”This is Baidu Campus”。</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#请描述出下列代码运行的结果"><span class="post-toc-number">3.41.</span> <span class="post-toc-text">请描述出下列代码运行的结果</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#需要将变量-e-的值修改为“a-b-c-d”-请写出对应的代码"><span class="post-toc-number">3.42.</span> <span class="post-toc-text">需要将变量 e 的值修改为“a+b+c+d”,请写出对应的代码</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面这个-ul，如何点击每一列的时候-alert-其-index-（闭包）"><span class="post-toc-number">3.43.</span> <span class="post-toc-text">下面这个 ul，如何点击每一列的时候 alert 其 index?（闭包）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#小贤是一条可爱的小狗-Dog-，它的叫声很好听-wow-，每次看到主人的时候就会乖乖叫一声-yelp-。从这段描述可以得到以下对象："><span class="post-toc-number">3.44.</span> <span class="post-toc-text">小贤是一条可爱的小狗(Dog)，它的叫声很好听(wow)，每次看到主人的时候就会乖乖叫一声(yelp)。从这段描述可以得到以下对象：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现一个函数-clone，可以对-JavaScript-中的-5-种主要的数据类型（包括-Number、String、Object、Array、Boolean）进行值复制"><span class="post-toc-number">3.45.</span> <span class="post-toc-text">实现一个函数 clone，可以对 JavaScript 中的 5 种主要的数据类型（包括 Number、String、Object、Array、Boolean）进行值复制</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#输出今天的日期，以-YYYY-MM-DD-的方式，比如今天是-2014-年-9-月-26-日，则输出-2014-09-26"><span class="post-toc-number">3.46.</span> <span class="post-toc-text">输出今天的日期，以 YYYY-MM-DD 的方式，比如今天是 2014 年 9 月 26 日，则输出 2014-09-26</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#写出函数-DateDemo-的返回结果，系统时间假定为今天"><span class="post-toc-number">3.47.</span> <span class="post-toc-text">写出函数 DateDemo 的返回结果，系统时间假定为今天</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#只允许使用-和-Math-，求一个函数-y-f-x-a-b-当-x-gt-100-时返回-a-的值，否则返回-b-的值，不能使用-if-else-等条件语句，也不能使用-数组。"><span class="post-toc-number">3.48.</span> <span class="post-toc-text">只允许使用 + - _ / 和 Math._ ，求一个函数 y = f(x, a, b);当 x &gt; 100 时返回 a 的值，否则返回 b 的值，不能使用 if else 等条件语句，也不能使用|,?:,数组。</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#看代码，写结果"><span class="post-toc-number">4.</span> <span class="post-toc-text">看代码，写结果</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#看题算结果"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">看题算结果</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#看题算结果-1"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">看题算结果</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#请写出以下代码的执行结果"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">请写出以下代码的执行结果</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#请说明以下各种情况的执行结果，并注明产生对应结果的理由"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">请说明以下各种情况的执行结果，并注明产生对应结果的理由</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#请写出以下代码的执行结果-1"><span class="post-toc-number">4.5.</span> <span class="post-toc-text">请写出以下代码的执行结果</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#以下代码输出多少"><span class="post-toc-number">4.6.</span> <span class="post-toc-text">以下代码输出多少</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#计算打印结果"><span class="post-toc-number">4.7.</span> <span class="post-toc-text">计算打印结果</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#看下面代码，给出输出结果"><span class="post-toc-number">4.8.</span> <span class="post-toc-text">看下面代码，给出输出结果</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#看下面代码，给出输出结果-考察闭包及-运算符"><span class="post-toc-number">4.9.</span> <span class="post-toc-text">看下面代码，给出输出结果(考察闭包及++运算符)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#看下面代码，给出输出结果-考察时间戳"><span class="post-toc-number">4.10.</span> <span class="post-toc-text">看下面代码，给出输出结果(考察时间戳)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#看题写结果"><span class="post-toc-number">4.11.</span> <span class="post-toc-text">看题写结果</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下列-JavaScript-代码执行后，依次-alert-的结果是"><span class="post-toc-number">4.12.</span> <span class="post-toc-text">下列 JavaScript 代码执行后，依次 alert 的结果是</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下列-JavaScript-代码执行后，运行的结果是"><span class="post-toc-number">4.13.</span> <span class="post-toc-text">下列 JavaScript 代码执行后，运行的结果是</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#输出结果是多少？"><span class="post-toc-number">4.14.</span> <span class="post-toc-text">输出结果是多少？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下列-JavaScript-代码执行后，iNum-的值是"><span class="post-toc-number">4.15.</span> <span class="post-toc-text">下列 JavaScript 代码执行后，iNum 的值是</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下列-JavaScript-代码执行后，依次打印的结果是"><span class="post-toc-number">4.16.</span> <span class="post-toc-text">下列 JavaScript 代码执行后，依次打印的结果是</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#console-log-8-1-输出值是多少？"><span class="post-toc-number">4.17.</span> <span class="post-toc-text">console.log( 8 | 1 ); 输出值是多少？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#请写出三种以上的-Firefox-有但-InternetExplorer-没有的属性和函数"><span class="post-toc-number">4.18.</span> <span class="post-toc-text">请写出三种以上的 Firefox 有但 InternetExplorer 没有的属性和函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#编写一个快速方法将-html-的-sup-提取转换为一个数组"><span class="post-toc-number">4.19.</span> <span class="post-toc-text">编写一个快速方法将 html 的 sup 提取转换为一个数组</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#求-num-的值"><span class="post-toc-number">4.20.</span> <span class="post-toc-text">求 num 的值</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#有一个函数，参数是一个函数，返回值也是一个函数，返回的函数功能和入参的函数相似，但这个函数只能执行-3-次，再次执行无效，如何实现"><span class="post-toc-number">4.21.</span> <span class="post-toc-text">有一个函数，参数是一个函数，返回值也是一个函数，返回的函数功能和入参的函数相似，但这个函数只能执行 3 次，再次执行无效，如何实现</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现-add-函数-让-add-a-b-和-add-a-b-两种调用结果相同"><span class="post-toc-number">4.22.</span> <span class="post-toc-text">实现 add 函数,让 add(a)(b)和 add(a,b)两种调用结果相同</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#格式化金钱，每千分位加逗号"><span class="post-toc-number">4.23.</span> <span class="post-toc-text">格式化金钱，每千分位加逗号</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#反转数组"><span class="post-toc-number">4.24.</span> <span class="post-toc-text">反转数组</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#说出以下函数的作用是？空白区域应该填写什么？"><span class="post-toc-number">4.25.</span> <span class="post-toc-text">说出以下函数的作用是？空白区域应该填写什么？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#原生-JS-的-window-onload-与-Jquery-的-document-ready-function-有什么不同？如何用原生-JS-实现-Jq-的-ready-方法？"><span class="post-toc-number">4.26.</span> <span class="post-toc-text">原生 JS 的 window.onload 与 Jquery 的$(document).ready(function(){})有什么不同？如何用原生 JS 实现 Jq 的 ready 方法？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#对作用域上下文和-this-的理解，看下列代码："><span class="post-toc-number">4.27.</span> <span class="post-toc-text">对作用域上下文和 this 的理解，看下列代码：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在-Javascript-中什么是伪数组？如何将伪数组转化为标准数组？"><span class="post-toc-number">4.28.</span> <span class="post-toc-text">在 Javascript 中什么是伪数组？如何将伪数组转化为标准数组？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#定义一个-log-方法，让它可以代理-console-log-的方法。"><span class="post-toc-number">4.29.</span> <span class="post-toc-text">定义一个 log 方法，让它可以代理 console.log 的方法。</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#给-String-对象添加一个方法，传入一个-string-类型的参数，然后将-string-的每个字符间价格空格返回，例如：addSpace-“hello-world”-gt-‘h-e-l-l-o-w-o-r-l-d’"><span class="post-toc-number">4.30.</span> <span class="post-toc-text">给 String 对象添加一个方法，传入一个 string 类型的参数，然后将 string 的每个字符间价格空格返回，例如：addSpace(“hello world”) // -&gt; ‘h e l l o  w o r l d’</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#请评价以下代码并给出改进意见"><span class="post-toc-number">4.31.</span> <span class="post-toc-text">请评价以下代码并给出改进意见</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#编写一个-JavaScript-函数，输入指定类型的选择器-仅需支持-id，class，tagName-三种简单-CSS-选择器，无需兼容组合选择器-可以返回匹配的-DOM-节点，需考虑浏览器兼容性和性能。"><span class="post-toc-number">4.32.</span> <span class="post-toc-text">编写一个 JavaScript 函数，输入指定类型的选择器(仅需支持 id，class，tagName 三种简单 CSS 选择器，无需兼容组合选择器)可以返回匹配的 DOM 节点，需考虑浏览器兼容性和性能。</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下列控制台都输出什么"><span class="post-toc-number">4.33.</span> <span class="post-toc-text">下列控制台都输出什么</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面程序输出的结果是什么？"><span class="post-toc-number">4.34.</span> <span class="post-toc-text">下面程序输出的结果是什么？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面代码输出什么"><span class="post-toc-number">4.35.</span> <span class="post-toc-text">下面代码输出什么</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面的输出结果是什么？"><span class="post-toc-number">4.36.</span> <span class="post-toc-text">下面的输出结果是什么？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面代码中什么时候会输出1？"><span class="post-toc-number">4.37.</span> <span class="post-toc-text">下面代码中什么时候会输出1？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面的输出结果是什么？-1"><span class="post-toc-number">4.38.</span> <span class="post-toc-text">下面的输出结果是什么？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面代码输出的结果是什么？"><span class="post-toc-number">4.39.</span> <span class="post-toc-text">下面代码输出的结果是什么？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面代码的输出是什么"><span class="post-toc-number">4.40.</span> <span class="post-toc-text">下面代码的输出是什么?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面代码的输出是什么-1"><span class="post-toc-number">4.41.</span> <span class="post-toc-text">下面代码的输出是什么?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面代码的输出是什么-2"><span class="post-toc-number">4.42.</span> <span class="post-toc-text">下面代码的输出是什么?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面代码的输出是什么-3"><span class="post-toc-number">4.43.</span> <span class="post-toc-text">下面代码的输出是什么?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#下面代码的输出结果是什么？"><span class="post-toc-number">4.44.</span> <span class="post-toc-text">下面代码的输出结果是什么？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#笔试经验"><span class="post-toc-number">4.45.</span> <span class="post-toc-text">笔试经验</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#目录"><span class="post-toc-number">4.46.</span> <span class="post-toc-text">目录</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#DOM"><span class="post-toc-number">4.46.1.</span> <span class="post-toc-text">DOM</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#数组-对象"><span class="post-toc-number">4.46.2.</span> <span class="post-toc-text">数组 对象</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#字符串"><span class="post-toc-number">4.46.3.</span> <span class="post-toc-text">字符串</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#排序和查找"><span class="post-toc-number">4.46.4.</span> <span class="post-toc-text">排序和查找</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#功能函数实现"><span class="post-toc-number">4.46.5.</span> <span class="post-toc-text">功能函数实现</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#数据结构"><span class="post-toc-number">4.46.6.</span> <span class="post-toc-text">数据结构</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#设计模式"><span class="post-toc-number">4.46.7.</span> <span class="post-toc-text">设计模式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#JS原生API实现"><span class="post-toc-number">4.46.8.</span> <span class="post-toc-text">JS原生API实现</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#HTTP请求"><span class="post-toc-number">4.46.9.</span> <span class="post-toc-text">HTTP请求</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DOM-1"><span class="post-toc-number">5.</span> <span class="post-toc-text">DOM</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#事件代理"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">事件代理</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#数组-对象-1"><span class="post-toc-number">6.</span> <span class="post-toc-text">数组 对象</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#扁平化"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">扁平化</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#去重-unique"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">去重 - unique()</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#拷贝"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">拷贝</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#浅拷贝"><span class="post-toc-number">6.3.1.</span> <span class="post-toc-text">浅拷贝</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#深拷贝"><span class="post-toc-number">6.3.2.</span> <span class="post-toc-text">深拷贝</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#copy-函数实现"><span class="post-toc-number">6.3.2.1.</span> <span class="post-toc-text">copy()函数实现</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#JSON-stringify"><span class="post-toc-number">6.3.2.2.</span> <span class="post-toc-text">JSON.stringify</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#字符串-1"><span class="post-toc-number">7.</span> <span class="post-toc-text">字符串</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#去除空格-trim"><span class="post-toc-number">7.1.</span> <span class="post-toc-text">去除空格 - trim()</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#字符串全排列"><span class="post-toc-number">7.2.</span> <span class="post-toc-text">字符串全排列</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#广度优先实现"><span class="post-toc-number">7.2.1.</span> <span class="post-toc-text">广度优先实现</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#深度优先实现"><span class="post-toc-number">7.2.2.</span> <span class="post-toc-text">深度优先实现</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#排序和查找-1"><span class="post-toc-number">8.</span> <span class="post-toc-text">排序和查找</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#插入排序"><span class="post-toc-number">8.1.</span> <span class="post-toc-text">插入排序</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#归并排序"><span class="post-toc-number">8.2.</span> <span class="post-toc-text">归并排序</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#快速排序"><span class="post-toc-number">8.3.</span> <span class="post-toc-text">快速排序</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#二分查找"><span class="post-toc-number">8.4.</span> <span class="post-toc-text">二分查找</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#找出出现次数最多的元素-getMostItem"><span class="post-toc-number">8.5.</span> <span class="post-toc-text">找出出现次数最多的元素 - getMostItem()</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#功能函数实现-1"><span class="post-toc-number">9.</span> <span class="post-toc-text">功能函数实现</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#setTimeout实现setInterval"><span class="post-toc-number">9.1.</span> <span class="post-toc-text">setTimeout实现setInterval</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#函数柯里化"><span class="post-toc-number">9.2.</span> <span class="post-toc-text">函数柯里化</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#防抖-节流"><span class="post-toc-number">9.3.</span> <span class="post-toc-text">防抖 节流</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#防抖"><span class="post-toc-number">9.3.1.</span> <span class="post-toc-text">防抖</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#节流"><span class="post-toc-number">9.3.2.</span> <span class="post-toc-text">节流</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#数据结构-1"><span class="post-toc-number">10.</span> <span class="post-toc-text">数据结构</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#单链表"><span class="post-toc-number">10.1.</span> <span class="post-toc-text">单链表</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#设计模式-1"><span class="post-toc-number">11.</span> <span class="post-toc-text">设计模式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#发布订阅模式"><span class="post-toc-number">11.1.</span> <span class="post-toc-text">发布订阅模式</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JS原生API实现-1"><span class="post-toc-number">12.</span> <span class="post-toc-text">JS原生API实现</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#bind-call-apply"><span class="post-toc-number">12.1.</span> <span class="post-toc-text">bind() call() apply()</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#apply"><span class="post-toc-number">12.1.1.</span> <span class="post-toc-text">apply()</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#call"><span class="post-toc-number">12.1.2.</span> <span class="post-toc-text">call()</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#bind"><span class="post-toc-number">12.1.3.</span> <span class="post-toc-text">bind()</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#InstanceOf"><span class="post-toc-number">12.2.</span> <span class="post-toc-text">InstanceOf</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#new"><span class="post-toc-number">12.3.</span> <span class="post-toc-text">new</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#reduce-forEach"><span class="post-toc-number">12.4.</span> <span class="post-toc-text">reduce() forEach()</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#reduce"><span class="post-toc-number">12.4.1.</span> <span class="post-toc-text">reduce()</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#forEach"><span class="post-toc-number">12.4.2.</span> <span class="post-toc-text">forEach()</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Promise"><span class="post-toc-number">12.5.</span> <span class="post-toc-text">Promise</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Promise-all"><span class="post-toc-number">12.5.1.</span> <span class="post-toc-text">Promise.all()</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ES6所有API完整实现"><span class="post-toc-number">12.5.2.</span> <span class="post-toc-text">ES6所有API完整实现</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#HTTP请求-1"><span class="post-toc-number">13.</span> <span class="post-toc-text">HTTP请求</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#AJAX封装"><span class="post-toc-number">13.1.</span> <span class="post-toc-text">AJAX封装</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSONP"><span class="post-toc-number">13.2.</span> <span class="post-toc-text">JSONP</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#面试代码题解释"><span class="post-toc-number">13.3.</span> <span class="post-toc-text">面试代码题解释</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-interview/JavaScript编程题"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">JavaScript编程题</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-05-28 10:41:39" datetime="2020-05-28T02:41:39.000Z"  itemprop="datePublished">2020-05-28</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/前端面试题/">前端面试题</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="常考代码题"><a href="#常考代码题" class="headerlink" title="常考代码题"></a>常考代码题</h2><h3 id="简单实现-Function-bind-函数？"><a href="#简单实现-Function-bind-函数？" class="headerlink" title="简单实现 Function.bind 函数？"></a>简单实现 Function.bind 函数？</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">Function</span>.prototype.bind) &#123;</span><br><span class="line">  <span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span>(<span class="params">that</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> func = <span class="keyword">this</span>, args = <span class="built_in">arguments</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> func.apply(that, <span class="built_in">Array</span>.prototype.slice.call(args, <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 只支持 bind 阶段的默认参数：</span></span><br><span class="line">func.bind(that, arg1, arg2)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不支持以下调用阶段传入的参数：</span></span><br><span class="line">func.bind(that)(arg1, arg2);</span><br></pre></td></tr></table></figure>

<h3 id="实现一个-Function-bind"><a href="#实现一个-Function-bind" class="headerlink" title="实现一个 Function.bind"></a>实现一个 Function.bind</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind2 = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">"function"</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(</span><br><span class="line">      <span class="string">"Function.prototype.bind - what is trying to be bound is not callable"</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">var</span> fNOP = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> fbound = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    self.apply(</span><br><span class="line">      <span class="keyword">this</span> <span class="keyword">instanceof</span> self ? <span class="keyword">this</span> : context,</span><br><span class="line">      args.concat(<span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>))</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">  fNOP.prototype = <span class="keyword">this</span>.prototype;</span><br><span class="line">  fbound.prototype = <span class="keyword">new</span> fNOP();</span><br><span class="line">  <span class="keyword">return</span> fbound;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="手写一个-promise"><a href="#手写一个-promise" class="headerlink" title="手写一个 promise"></a>手写一个 promise</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (success) &#123;</span><br><span class="line">    <span class="comment">// 操作成功</span></span><br><span class="line">    resolve(value);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">console</span>.log(res))</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="手写一个-Promise-中高级必考"><a href="#手写一个-Promise-中高级必考" class="headerlink" title="手写一个 Promise(中高级必考)"></a>手写一个 Promise(中高级必考)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myPromise</span>(<span class="params">constructor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="keyword">this</span>;</span><br><span class="line">  self.status = <span class="string">"pending"</span>;</span><br><span class="line">  <span class="comment">//定义状态改变前的初始状态</span></span><br><span class="line">  self.value = <span class="literal">undefined</span>;</span><br><span class="line">  <span class="comment">//定义状态为resolved的时候的状态</span></span><br><span class="line">  self.reason = <span class="literal">undefined</span>;</span><br><span class="line">  <span class="comment">//定义状态为rejected的时候的状态</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//两个==="pending"，保证了状态的改变是不可逆的</span></span><br><span class="line">    <span class="keyword">if</span> (self.status === <span class="string">"pending"</span>) &#123;</span><br><span class="line">      self.value = value;</span><br><span class="line">      self.status = <span class="string">"resolved"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//两个==="pending"，保证了状态的改变是不可逆的</span></span><br><span class="line">    <span class="keyword">if</span> (self.status === <span class="string">"pending"</span>) &#123;</span><br><span class="line">      self.reason = reason;</span><br><span class="line">      self.status = <span class="string">"rejected"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//捕获构造异常</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(resolve, reject);</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    reject(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//同时，需要在 myPromise的原型上定义链式调用的 then方法：</span></span><br><span class="line">myPromise.prototype.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFullfilled, onRejected</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">switch</span> (self.status) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"resolved"</span>:</span><br><span class="line">      onFullfilled(self.value);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"rejected"</span>:</span><br><span class="line">      onRejected(self.reason);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试一下：</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> myPromise(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  resolve(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="用-js-实现一个标准的排序算法"><a href="#用-js-实现一个标准的排序算法" class="headerlink" title="用 js 实现一个标准的排序算法"></a>用 js 实现一个标准的排序算法</h3><h4 id="一-冒泡排序"><a href="#一-冒泡排序" class="headerlink" title="一.冒泡排序"></a>一.冒泡排序</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">var bubble = function(arr)&#123;</span><br><span class="line">    var maxIndex = arr.length - 1, temp, flag;</span><br><span class="line">    for (var i = maxIndex; i &gt; 0; i--) &#123;</span><br><span class="line">        flag = true</span><br><span class="line">        for (var j = 0; j &lt; i; j++) &#123;</span><br><span class="line">            if (arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">                temp = arr[j];</span><br><span class="line">                arr[j] = arr[j + 1];</span><br><span class="line">                arr[j + 1] = temp;</span><br><span class="line">                flag = false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if(! flag)&#123;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line">// 调用</span><br><span class="line">var arr = bubble([13, 69, 28, 93, 55, 75, 34]);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BubbleSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = arr.length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="comment">//用于缩小范围</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">      <span class="comment">//在范围内进行冒泡，在此范围内最大的一个将冒到最后面</span></span><br><span class="line">      <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;<span class="comment">//从小到大</span></span><br><span class="line">        <span class="keyword">var</span> temp = arr[j];</span><br><span class="line">        arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">        arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(arr);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>,<span class="number">6</span>, <span class="number">5</span>,<span class="number">4</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> result = BubbleSort(arr);</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">代码实际输出：</span></span><br><span class="line"><span class="comment">[ 9, 8, 7, 6, 5, 4, 3, 10 ]</span></span><br><span class="line"><span class="comment">[ 8, 7, 6, 5, 4, 3, 9, 10 ]</span></span><br><span class="line"><span class="comment">[ 7, 6, 5, 4, 3, 8, 9, 10 ]</span></span><br><span class="line"><span class="comment">[ 6, 5, 4, 3, 7, 8, 9, 10 ]</span></span><br><span class="line"><span class="comment">[ 5, 4, 3, 6, 7, 8, 9, 10 ]</span></span><br><span class="line"><span class="comment">[ 4, 3, 5, 6, 7, 8, 9, 10 ]</span></span><br><span class="line"><span class="comment">[ 3, 4, 5, 6, 7, 8, 9, 10 ]</span></span><br><span class="line"><span class="comment">[ 3, 4, 5, 6, 7, 8, 9, 10 ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 冒泡排序</span><br><span class="line">var bubbleSort = function( arr) &#123;</span><br><span class="line">    var len = arr.length;</span><br><span class="line">    for( var i = 0; i &lt; len; i ++)&#123;</span><br><span class="line">        for( var j = 0; i &lt; len - 1 - i; i ++)&#123;</span><br><span class="line">            if(arr[j] &gt; arr[j + 1]) &#123; //相邻元素两两对比</span><br><span class="line">                var temp = arr[j + 1]; //元素交换</span><br><span class="line">                arr[j + 1] = arr[j];</span><br><span class="line">                arr[j] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="二-选择排序"><a href="#二-选择排序" class="headerlink" title="二.选择排序"></a>二.选择排序</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SelectionSort</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> length = array.length;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">    <span class="comment">//缩小选择的范围</span></span><br><span class="line">    <span class="keyword">var</span> min = array[i]; <span class="comment">//假定范围内第一个为最小值</span></span><br><span class="line">    <span class="keyword">var</span> index = i; <span class="comment">//记录最小值的下标</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = i + <span class="number">1</span>; j &lt; length; j++) &#123;</span><br><span class="line">      <span class="comment">//在范围内选取最小值</span></span><br><span class="line">      <span class="keyword">if</span> (array[j] &lt; min) &#123;</span><br><span class="line">        min = array[j];</span><br><span class="line">        index = j;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (index != i) &#123;</span><br><span class="line">      <span class="comment">//把范围内最小值交换到范围内第一个</span></span><br><span class="line">      <span class="keyword">var</span> temp = array[i];</span><br><span class="line">      array[i] = array[index];</span><br><span class="line">      array[index] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(array);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"---------------------"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">90</span>, <span class="number">65</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">2</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> result = SelectionSort(arr);</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[ 1, 10, 100, 90, 65, 5, 4, 10, 2, 4 ]</span></span><br><span class="line"><span class="comment">---------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 100, 90, 65, 5, 4, 10, 10, 4 ]</span></span><br><span class="line"><span class="comment">---------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 4, 90, 65, 5, 100, 10, 10, 4 ]</span></span><br><span class="line"><span class="comment">---------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 4, 4, 65, 5, 100, 10, 10, 90 ]</span></span><br><span class="line"><span class="comment">---------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 4, 4, 5, 65, 100, 10, 10, 90 ]</span></span><br><span class="line"><span class="comment">---------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 4, 4, 5, 10, 100, 65, 10, 90 ]</span></span><br><span class="line"><span class="comment">---------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 4, 4, 5, 10, 10, 65, 100, 90 ]</span></span><br><span class="line"><span class="comment">---------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 4, 4, 5, 10, 10, 65, 100, 90 ]</span></span><br><span class="line"><span class="comment">---------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 4, 4, 5, 10, 10, 65, 90, 100 ]</span></span><br><span class="line"><span class="comment">---------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 4, 4, 5, 10, 10, 65, 90, 100 ]</span></span><br><span class="line"><span class="comment">---------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 4, 4, 5, 10, 10, 65, 90, 100 ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="三-插入排序"><a href="#三-插入排序" class="headerlink" title="三.插入排序"></a>三.插入排序</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">InsertionSort</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> length = array.length;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="comment">//i代表已经排序好的序列最后一项下标</span></span><br><span class="line">    <span class="keyword">var</span> insert = array[i + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">var</span> index = i + <span class="number">1</span>; <span class="comment">//记录要被插入的下标</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = i; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">      <span class="keyword">if</span> (insert &lt; array[j]) &#123;</span><br><span class="line">        <span class="comment">//要插入的项比它小，往后移动</span></span><br><span class="line">        array[j + <span class="number">1</span>] = array[j];</span><br><span class="line">        index = j;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    array[index] = insert;</span><br><span class="line">    <span class="built_in">console</span>.log(array);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"-----------------------"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">100</span>, <span class="number">90</span>, <span class="number">80</span>, <span class="number">62</span>, <span class="number">80</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">39</span>];</span><br><span class="line"><span class="keyword">var</span> result = InsertionSort(arr);</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[ 90, 100, 80, 62, 80, 8, 1, 2, 39 ]</span></span><br><span class="line"><span class="comment">-----------------------</span></span><br><span class="line"><span class="comment">[ 80, 90, 100, 62, 80, 8, 1, 2, 39 ]</span></span><br><span class="line"><span class="comment">-----------------------</span></span><br><span class="line"><span class="comment">[ 62, 80, 90, 100, 80, 8, 1, 2, 39 ]</span></span><br><span class="line"><span class="comment">-----------------------</span></span><br><span class="line"><span class="comment">[ 62, 80, 80, 90, 100, 8, 1, 2, 39 ]</span></span><br><span class="line"><span class="comment">-----------------------</span></span><br><span class="line"><span class="comment">[ 8, 62, 80, 80, 90, 100, 1, 2, 39 ]</span></span><br><span class="line"><span class="comment">-----------------------</span></span><br><span class="line"><span class="comment">[ 1, 8, 62, 80, 80, 90, 100, 2, 39 ]</span></span><br><span class="line"><span class="comment">-----------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 8, 62, 80, 80, 90, 100, 39 ]</span></span><br><span class="line"><span class="comment">-----------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 8, 39, 62, 80, 80, 90, 100 ]</span></span><br><span class="line"><span class="comment">-----------------------</span></span><br><span class="line"><span class="comment">[ 1, 2, 8, 39, 62, 80, 80, 90, 100 ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 插入排序</span><br><span class="line">var insertSort = function( arr) &#123;</span><br><span class="line">    var len = arr.length;</span><br><span class="line">    var preIndex, current;</span><br><span class="line">    for( var i = 1; i &lt; len; i ++)&#123;</span><br><span class="line">        preIndex = i - 1;</span><br><span class="line">        current = arr[i];</span><br><span class="line">        while(preIndex &gt;= 0 &amp;&amp; arr[preIndex] &gt; current)&#123;</span><br><span class="line">            arr[preIndex + 1] = arr[preIndex];</span><br><span class="line">            preIndex --;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[preIndex + 1] = current;</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="四-希尔排序"><a href="#四-希尔排序" class="headerlink" title="四.希尔排序"></a>四.希尔排序</h4><h4 id="五-归并排序"><a href="#五-归并排序" class="headerlink" title="五.归并排序"></a>五.归并排序</h4><h4 id="六-快速排序"><a href="#六-快速排序" class="headerlink" title="六.快速排序"></a>六.快速排序</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var quickSort = function( arr) &#123;</span><br><span class="line">    if(arr.length &lt; 1) &#123; //如果数组就是一项，那么可以直接返回</span><br><span class="line">        return arr;</span><br><span class="line">    &#125;</span><br><span class="line">    var centerIndex = Math. floor(arr.length / 2); //获取数组中间的索引</span><br><span class="line">    var centerValue = arr[centerIndex]; //获取数组中间项</span><br><span class="line">    var left = [], right = [];</span><br><span class="line">    for( var i = 0; i &lt; arr.lenght; i ++)&#123;</span><br><span class="line">        if(arr[i] &lt; centerValue)&#123;</span><br><span class="line">            left. push(arr[i]);</span><br><span class="line">        &#125; else&#123;</span><br><span class="line">            right. push(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return quickSort(left). contanct([centerValue], quickSort(right)); //递归调用</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="手写数组快速排序"><a href="#手写数组快速排序" class="headerlink" title="手写数组快速排序"></a>手写数组快速排序</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> quickSort = <span class="function"><span class="keyword">function</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (arr.length &lt;= <span class="number">1</span>) &#123; <span class="keyword">return</span> arr; &#125;</span><br><span class="line">    <span class="keyword">var</span> pivotIndex = <span class="built_in">Math</span>.floor(arr.length / <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">var</span> pivot = arr.splice(pivotIndex, <span class="number">1</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> left = [];</span><br><span class="line">    <span class="keyword">var</span> right = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &lt; pivot) &#123;</span><br><span class="line">          left.push(arr[i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          right.push(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> quickSort(left).concat([pivot], quickSort(right));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">quickSort([<span class="number">9</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">7</span>]);</span><br></pre></td></tr></table></figure>

<h3 id="如何实现数组的随机排序？"><a href="#如何实现数组的随机排序？" class="headerlink" title="如何实现数组的随机排序？"></a>如何实现数组的随机排序？</h3><ul>
<li>方法一：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randSort1</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>,len = arr.length;i &lt; len; i++ )&#123;</span><br><span class="line">		<span class="keyword">var</span> rand = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random()*len);</span><br><span class="line">		<span class="keyword">var</span> temp = arr[rand];</span><br><span class="line">		arr[rand] = arr[i];</span><br><span class="line">		arr[i] = temp;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(randSort1(arr));</span><br></pre></td></tr></table></figure>

<ul>
<li>方法二：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randSort2</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> mixedArray = [];</span><br><span class="line">	<span class="keyword">while</span>(arr.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">var</span> randomIndex = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random()*arr.length);</span><br><span class="line">		mixedArray.push(arr[randomIndex]);</span><br><span class="line">		arr.splice(randomIndex, <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> mixedArray;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(randSort2(arr));</span><br></pre></td></tr></table></figure>

<ul>
<li>方法三：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>];</span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span>;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(arr);</span><br></pre></td></tr></table></figure>

<h3 id="用-js-实现随机选取-10–100-之间的-10-个数字，存入一个数组，并排序。"><a href="#用-js-实现随机选取-10–100-之间的-10-个数字，存入一个数组，并排序。" class="headerlink" title="用 js 实现随机选取 10–100 之间的 10 个数字，存入一个数组，并排序。"></a>用 js 实现随机选取 10–100 之间的 10 个数字，存入一个数组，并排序。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> iArray = [];</span><br><span class="line">funtion getRandom(istart, iend)&#123;</span><br><span class="line"><span class="keyword">var</span> iChoice = istart - iend +<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * iChoice + istart;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">iArray.push(getRandom(<span class="number">10</span>,<span class="number">100</span>));</span><br><span class="line">&#125;</span><br><span class="line">iArray.sort();</span><br></pre></td></tr></table></figure>

<h3 id="手写防抖-Debouncing-和节流-Throttling"><a href="#手写防抖-Debouncing-和节流-Throttling" class="headerlink" title="手写防抖(Debouncing)和节流(Throttling)"></a>手写防抖(Debouncing)和节流(Throttling)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 防抖函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, wait</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) clearTimeout(timer);</span><br><span class="line">    timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;, wait);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 节流函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, wait</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> prev = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">if</span> (now - prev &gt; wait) &#123;</span><br><span class="line">      fn.apply(<span class="keyword">this</span>, args);</span><br><span class="line">      prev = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现防抖函数（debounce）"><a href="#实现防抖函数（debounce）" class="headerlink" title="实现防抖函数（debounce）"></a>实现防抖函数（debounce）</h3><p>防抖函数原理：在事件被触发n秒后再执行回调，如果在这n秒内又被触发，则重新计时。</p>
<p>那么与节流函数的区别直接看这个动画实现即可。</p>
<p>手写简化版:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 防抖函数</span><br><span class="line">const debounce = (fn, delay) =&gt; &#123;</span><br><span class="line">  let timer = null;</span><br><span class="line">  return (...args) =&gt; &#123;</span><br><span class="line">    clearTimeout(timer);</span><br><span class="line">    timer = setTimeout(() =&gt; &#123;</span><br><span class="line">      fn.apply(this, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>适用场景：</p>
<ul>
<li>按钮提交场景：防止多次提交按钮，只执行最后提交的一次</li>
<li>服务端验证场景：表单验证需要服务端配合，只执行一段连续的输入事件的最后一次，还有搜索联想词功能类似</li>
</ul>
<p>生存环境请用lodash.debounce</p>
<h3 id="实现节流函数（throttle）"><a href="#实现节流函数（throttle）" class="headerlink" title="实现节流函数（throttle）"></a>实现节流函数（throttle）</h3><p>防抖函数原理:规定在一个单位时间内，只能触发一次函数。如果这个单位时间内触发多次函数，只有一次生效。</p>
<p>// 手写简化版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 节流函数</span><br><span class="line">const throttle = (fn, delay = 500) =&gt; &#123;</span><br><span class="line">  let flag = true;</span><br><span class="line">  return (...args) =&gt; &#123;</span><br><span class="line">    if (!flag) return;</span><br><span class="line">    flag = false;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      fn.apply(this, args);</span><br><span class="line">      flag = true;</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>适用场景：</p>
<ul>
<li>拖拽场景：固定时间内只执行一次，防止超高频次触发位置变动</li>
<li>缩放场景：监控浏览器resize</li>
<li>动画场景：避免短时间内多次触发动画引起性能问题</li>
</ul>
<h3 id="手写一个-JS-深拷贝"><a href="#手写一个-JS-深拷贝" class="headerlink" title="手写一个 JS 深拷贝"></a>手写一个 JS 深拷贝</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//判断是否是简单数据类型，</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj == <span class="string">"object"</span>) &#123;</span><br><span class="line">    <span class="comment">//复杂数据类型</span></span><br><span class="line">    <span class="keyword">var</span> result = obj.constructor == <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      result[i] = <span class="keyword">typeof</span> obj[i] == <span class="string">"object"</span> ? deepCopy(obj[i]) : obj[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//简单数据类型 直接 == 赋值</span></span><br><span class="line">    <span class="keyword">var</span> result = obj;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o1 = &#123;</span><br><span class="line">  a: &#123;</span><br><span class="line">    b: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> o2 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(o1));</span><br></pre></td></tr></table></figure>

<p>另一种方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> d = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> s) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> s[k] == <span class="string">"object"</span>) &#123;</span><br><span class="line">      d[k] = deepCopy(s[k]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      d[k] = s[k];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="如何封装一个-javascript-的类型判断函数？"><a href="#如何封装一个-javascript-的类型判断函数？" class="headerlink" title="如何封装一个 javascript 的类型判断函数？"></a>如何封装一个 javascript 的类型判断函数？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 判断数据是 null 的情况</span></span><br><span class="line">  <span class="keyword">if</span> (value === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value + <span class="string">""</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 判断数据是引用类型的情况</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">"object"</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> valueClass = <span class="built_in">Object</span>.prototype.toString.call(value),</span><br><span class="line">      type = valueClass.split(<span class="string">" "</span>)[<span class="number">1</span>].split(<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">    type.pop();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> type.join(<span class="string">""</span>).toLowerCase();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 判断数据是基本数据类型的情况和函数的情况</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>详细资料可以参考：<br><a href="https://github.com/mqyqingfeng/Blog/issues/28" target="_blank" rel="noopener">《JavaScript 专题之类型判断(上)》</a></p>
<h3 id="如何判断一个对象是否为空对象？"><a href="#如何判断一个对象是否为空对象？" class="headerlink" title="如何判断一个对象是否为空对象？"></a>如何判断一个对象是否为空对象？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkNullObj</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.keys(obj).length === <span class="number">0</span> &amp;&amp; <span class="built_in">Object</span>.getOwnPropertySymbols(obj).length === <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>详细资料可以参考：<br><a href="https://blog.csdn.net/FungLeo/article/details/78113661" target="_blank" rel="noopener">《js 判断一个 object 对象是否为空》</a></p>
<h3 id="使用闭包实现每隔一秒打印-1-2-3-4"><a href="#使用闭包实现每隔一秒打印-1-2-3-4" class="headerlink" title="使用闭包实现每隔一秒打印 1,2,3,4"></a>使用闭包实现每隔一秒打印 1,2,3,4</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用闭包实现</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;, i * <span class="number">1000</span>);</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 let 块级作用域</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;, i * <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="手写一个-jsonp"><a href="#手写一个-jsonp" class="headerlink" title="手写一个 jsonp"></a>手写一个 jsonp</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">url, params, callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 判断是否含有参数</span></span><br><span class="line">  <span class="keyword">let</span> queryString = url.indexOf(<span class="string">"?"</span>) === <span class="number">-1</span> ? <span class="string">"?"</span> : <span class="string">"&amp;"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 添加参数</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> params) &#123;</span><br><span class="line">    <span class="keyword">if</span> (params.hasOwnProperty(k)) &#123;</span><br><span class="line">      queryString += k + <span class="string">"="</span> + params[k] + <span class="string">"&amp;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 处理回调函数名</span></span><br><span class="line">  <span class="keyword">let</span> random = <span class="built_in">Math</span>.random()</span><br><span class="line">      .toString()</span><br><span class="line">      .replace(<span class="string">"."</span>, <span class="string">""</span>),</span><br><span class="line">    callbackName = <span class="string">"myJsonp"</span> + random;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 添加回调函数</span></span><br><span class="line">  queryString += <span class="string">"callback="</span> + callbackName;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 构建请求</span></span><br><span class="line">  <span class="keyword">let</span> scriptNode = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">  scriptNode.src = url + queryString;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>[callbackName] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 调用回调函数</span></span><br><span class="line">    callback(...arguments);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除这个引入的脚本</span></span><br><span class="line">    <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].removeChild(scriptNode);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 发起请求</span></span><br><span class="line">  <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(scriptNode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>详细资料可以参考：<br><a href="https://www.cnblogs.com/zzc5464/p/jsonp.html" target="_blank" rel="noopener">《原生 jsonp 具体实现》</a><br><a href="https://segmentfault.com/a/1190000007665361#articleHeader1" target="_blank" rel="noopener">《jsonp 的原理与实现》</a></p>
<h3 id="手写一个观察者模式？"><a href="#手写一个观察者模式？" class="headerlink" title="手写一个观察者模式？"></a>手写一个观察者模式？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> events = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> topics = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// 注册监听函数</span></span><br><span class="line">    subscribe: <span class="function"><span class="keyword">function</span>(<span class="params">topic, handler</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!topics.hasOwnProperty(topic)) &#123;</span><br><span class="line">        topics[topic] = [];</span><br><span class="line">      &#125;</span><br><span class="line">      topics[topic].push(handler);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 发布事件，触发观察者回调事件</span></span><br><span class="line">    publish: <span class="function"><span class="keyword">function</span>(<span class="params">topic, info</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (topics.hasOwnProperty(topic)) &#123;</span><br><span class="line">        topics[topic].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">handler</span>) </span>&#123;</span><br><span class="line">          handler(info);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 移除主题的一个观察者的回调事件</span></span><br><span class="line">    remove: <span class="function"><span class="keyword">function</span>(<span class="params">topic, handler</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!topics.hasOwnProperty(topic)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> handlerIndex = <span class="number">-1</span>;</span><br><span class="line">      topics[topic].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (item === handler) &#123;</span><br><span class="line">          handlerIndex = index;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (handlerIndex &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        topics[topic].splice(handlerIndex, <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 移除主题的所有观察者的回调事件</span></span><br><span class="line">    removeAll: <span class="function"><span class="keyword">function</span>(<span class="params">topic</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (topics.hasOwnProperty(topic)) &#123;</span><br><span class="line">        topics[topic] = [];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>详细资料可以参考：<br><a href="https://segmentfault.com/a/1190000006934031#articleHeader1" target="_blank" rel="noopener">《JS 事件模型》</a></p>
<h3 id="EventEmitter-实现"><a href="#EventEmitter-实现" class="headerlink" title="EventEmitter 实现"></a>EventEmitter 实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventEmitter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.events = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  on(event, callback) &#123;</span><br><span class="line">    <span class="keyword">let</span> callbacks = <span class="keyword">this</span>.events[event] || [];</span><br><span class="line">    callbacks.push(callback);</span><br><span class="line">    <span class="keyword">this</span>.events[event] = callbacks;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  off(event, callback) &#123;</span><br><span class="line">    <span class="keyword">let</span> callbacks = <span class="keyword">this</span>.events[event];</span><br><span class="line">    <span class="keyword">this</span>.events[event] = callbacks &amp;&amp; callbacks.filter(<span class="function"><span class="params">fn</span> =&gt;</span> fn !== callback);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  emit(event, ...args) &#123;</span><br><span class="line">    <span class="keyword">let</span> callbacks = <span class="keyword">this</span>.events[event];</span><br><span class="line">    callbacks.forEach(<span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line">      fn(...args);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  once(event, callback) &#123;</span><br><span class="line">    <span class="keyword">let</span> wrapFun = <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">      callback(...args);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.off(event, wrapFun);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.on(event, wrapFun);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="一道常被人轻视的前端-JS-面试题"><a href="#一道常被人轻视的前端-JS-面试题" class="headerlink" title="一道常被人轻视的前端 JS 面试题"></a>一道常被人轻视的前端 JS 面试题</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">Foo.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="number">2</span>);</span><br><span class="line">&#125;;</span><br><span class="line">Foo.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="number">3</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="number">4</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//请写出以下输出结果：</span></span><br><span class="line">Foo.getName(); <span class="comment">// 2</span></span><br><span class="line">getName(); <span class="comment">// 4</span></span><br><span class="line">Foo().getName(); <span class="comment">// 1</span></span><br><span class="line">getName(); <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">new</span> Foo.getName(); <span class="comment">// 2</span></span><br><span class="line"><span class="keyword">new</span> Foo().getName(); <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">new</span> <span class="keyword">new</span> Foo().getName(); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>详细资料可以参考：<br><a href="https://github.com/Wscats/Good-text-Share/issues/85" target="_blank" rel="noopener">《前端程序员经常忽视的一个 JavaScript 面试题》</a><br><a href="https://segmentfault.com/q/1010000008430170" target="_blank" rel="noopener">《一道考察运算符优先级的 JavaScript 面试题》</a><br><a href="https://www.cnblogs.com/xxcanghai/p/5189353.html" target="_blank" rel="noopener">《一道常被人轻视的前端 JS 面试题》</a></p>
<h3 id="如何查找一篇英文文章中出现频率最高的单词？"><a href="#如何查找一篇英文文章中出现频率最高的单词？" class="headerlink" title="如何查找一篇英文文章中出现频率最高的单词？"></a>如何查找一篇英文文章中出现频率最高的单词？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMostWord</span>(<span class="params">article</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 合法性判断</span></span><br><span class="line">  <span class="keyword">if</span> (!article) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 参数处理</span></span><br><span class="line">  article = article.trim().toLowerCase();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> wordList = article.match(<span class="regexp">/[a-z]+/g</span>),</span><br><span class="line">    visited = [],</span><br><span class="line">    maxNum = <span class="number">0</span>,</span><br><span class="line">    maxWord = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">  article = <span class="string">" "</span> + wordList.join(<span class="string">"  "</span>) + <span class="string">" "</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 遍历判断单词出现次数</span></span><br><span class="line">  wordList.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (visited.indexOf(item) &lt; <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 加入 visited </span></span><br><span class="line">      visited.push(item);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> word = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">" "</span> + item + <span class="string">" "</span>, <span class="string">"g"</span>),</span><br><span class="line">        num = article.match(word).length;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (num &gt; maxNum) &#123;</span><br><span class="line">        maxNum = num;</span><br><span class="line">        maxWord = item;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> maxWord + <span class="string">"  "</span> + maxNum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="用最简单的方式，求一个数组中最大的元素，例如-arr-5-7-9-42-18-29"><a href="#用最简单的方式，求一个数组中最大的元素，例如-arr-5-7-9-42-18-29" class="headerlink" title="用最简单的方式，求一个数组中最大的元素，例如 arr=[5,7,9,42,18,29]"></a>用最简单的方式，求一个数组中最大的元素，例如 arr=[5,7,9,42,18,29]</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br><span class="line">alert(<span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, a)); <span class="comment">//最大值</span></span><br><span class="line">alert(<span class="built_in">Math</span>.min.apply(<span class="literal">null</span>, a)); <span class="comment">//最小值</span></span><br></pre></td></tr></table></figure>

<h3 id="如何解决数组塌陷问题"><a href="#如何解决数组塌陷问题" class="headerlink" title="如何解决数组塌陷问题"></a>如何解决数组塌陷问题</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 使用i--</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (arr[i] === <span class="number">4</span>) &#123;</span><br><span class="line">    arr.splice(i, <span class="number">1</span>);</span><br><span class="line">    i--;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 从数组的末尾一项开始遍历</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = arr.length; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">  <span class="keyword">if</span> (arr[i] === <span class="number">4</span>) &#123;</span><br><span class="line">    arr.splice(i, <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr);</span><br></pre></td></tr></table></figure>

<h3 id="已知-id-的-input-输入框，希望获取这个输入框的输入值，怎么做？（不使用第三方框架）"><a href="#已知-id-的-input-输入框，希望获取这个输入框的输入值，怎么做？（不使用第三方框架）" class="headerlink" title="已知 id 的 input 输入框，希望获取这个输入框的输入值，怎么做？（不使用第三方框架）"></a>已知 id 的 input 输入框，希望获取这个输入框的输入值，怎么做？（不使用第三方框架）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"id"</span>).value;</span><br></pre></td></tr></table></figure>

<h3 id="获取到页面中所有的-checkbox-怎么做？（不使用第三方框架）"><a href="#获取到页面中所有的-checkbox-怎么做？（不使用第三方框架）" class="headerlink" title="获取到页面中所有的 checkbox 怎么做？（不使用第三方框架）"></a>获取到页面中所有的 checkbox 怎么做？（不使用第三方框架）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> domList = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"input"</span>);</span><br><span class="line"><span class="keyword">var</span> ckList = []; <span class="comment">// 返回的所有的 checkbox</span></span><br><span class="line"><span class="keyword">var</span> len = domList.length;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (domList[i].type == <span class="string">"checkbox"</span>) &#123;</span><br><span class="line">    ckList.push(domList[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="设置一个已知-id-的-div-的-html-内容为-xxxx，字体颜色设置为黑色（不使用第三方框架）"><a href="#设置一个已知-id-的-div-的-html-内容为-xxxx，字体颜色设置为黑色（不使用第三方框架）" class="headerlink" title="设置一个已知 id 的 div 的 html 内容为 xxxx，字体颜色设置为黑色（不使用第三方框架）"></a>设置一个已知 id 的 div 的 html 内容为 xxxx，字体颜色设置为黑色（不使用第三方框架）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dom = <span class="built_in">document</span>.getElementById(<span class="string">"id"</span>);</span><br><span class="line">dom.innerHTML = <span class="string">"xxxx"</span>;</span><br><span class="line">dom.style.color = <span class="string">"#000"</span>; <span class="comment">// 'black'</span></span><br></pre></td></tr></table></figure>

<h3 id="已知有字符串-foo-“get-element-by-id”-写一个-function-将其转化为驼峰表示法“getElementById”"><a href="#已知有字符串-foo-“get-element-by-id”-写一个-function-将其转化为驼峰表示法“getElementById”" class="headerlink" title="已知有字符串 foo=“get-element-by-id”,写一个 function 将其转化为驼峰表示法“getElementById”"></a>已知有字符串 foo=“get-element-by-id”,写一个 function 将其转化为驼峰表示法“getElementById”</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">"get-element-by-id"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">combo</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = msg.split(<span class="string">"-"</span>); <span class="comment">//split("-")以-为分隔符截取字符串，返回数组</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    arr[i] = arr[i].charAt(<span class="number">0</span>).toUpperCase() + arr[i].slice(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  msg = arr.join(<span class="string">""</span>); <span class="comment">//join()返回字符串</span></span><br><span class="line">  <span class="keyword">return</span> msg;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(combo(string));</span><br></pre></td></tr></table></figure>

<h3 id="写一个-function，清除字符串前后的空格（兼容所有的浏览器）"><a href="#写一个-function，清除字符串前后的空格（兼容所有的浏览器）" class="headerlink" title="写一个 function，清除字符串前后的空格（兼容所有的浏览器）"></a>写一个 function，清除字符串前后的空格（兼容所有的浏览器）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//重写trim方法</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">String</span>.prototype.trim) &#123;</span><br><span class="line">  <span class="built_in">String</span>.prototype.trim = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/^\s+/</span>, <span class="string">""</span>).replace(<span class="regexp">/\s+$/</span>, <span class="string">""</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="运算符面试题"><a href="#运算符面试题" class="headerlink" title="运算符面试题"></a>运算符面试题</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>,</span><br><span class="line">  b = <span class="number">20</span>,</span><br><span class="line">  c = <span class="number">30</span>;</span><br><span class="line">++a;</span><br><span class="line">a++;</span><br><span class="line">e = ++a + ++b + c++ + a++;</span><br><span class="line"><span class="built_in">console</span>.log(e); <span class="comment">// 77</span></span><br></pre></td></tr></table></figure>

<h3 id="判断相等"><a href="#判断相等" class="headerlink" title="判断相等"></a>判断相等</h3><p>2 == true<br>[] == false<br>[] == ![]</p>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">  setTimeout(</span><br><span class="line">    (<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> j = i;</span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(j);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)(),</span><br><span class="line">    <span class="number">0</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现一个-new-操作符"><a href="#实现一个-new-操作符" class="headerlink" title="实现一个 new 操作符"></a>实现一个 new 操作符</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">New</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> res = &#123;&#125;;</span><br><span class="line">  <span class="keyword">if</span> (func.prototype !== <span class="literal">null</span>) &#123;</span><br><span class="line">    res.__proto__ = func.prototype;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> ret = func.apply(res, <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>));</span><br><span class="line">  <span class="keyword">if</span> ((<span class="keyword">typeof</span> ret === <span class="string">"object"</span> || <span class="keyword">typeof</span> ret === <span class="string">"function"</span>) &amp;&amp; ret !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">    ret;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">  res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = New(A, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// equals to</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> A(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<h3 id="实现一个-call-或-apply"><a href="#实现一个-call-或-apply" class="headerlink" title="实现一个 call 或 apply"></a>实现一个 call 或 apply</h3><p>答案：<br>call</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.call2 = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">  context.fn = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> args = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>, len = <span class="built_in">arguments</span>.length; i &lt; len; i++) &#123;</span><br><span class="line">    args.push(<span class="string">"arguments["</span> + i + <span class="string">"]"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> result = <span class="built_in">eval</span>(<span class="string">"context.fn("</span> + args + <span class="string">")"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>apply</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.apply2 = <span class="function"><span class="keyword">function</span>(<span class="params">context, arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> context = <span class="built_in">Object</span>(context) || <span class="built_in">window</span>;</span><br><span class="line">  context.fn = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> result;</span><br><span class="line">  <span class="keyword">if</span> (!arr) &#123;</span><br><span class="line">    result = context.fn();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> args = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++) &#123;</span><br><span class="line">      args.push(<span class="string">"arr["</span> + i + <span class="string">"]"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    result = <span class="built_in">eval</span>(<span class="string">"context.fn("</span> + args + <span class="string">")"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="原型链面试题"><a href="#原型链面试题" class="headerlink" title="原型链面试题"></a>原型链面试题</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">B.prototype = <span class="keyword">new</span> A();</span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> A();</span><br><span class="line">B.prototype = a;</span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> B();</span><br><span class="line"><span class="built_in">console</span>.log(b.constructor); <span class="comment">// 构造函数A</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span>.constructor === <span class="built_in">Function</span>);</span><br><span class="line"><span class="comment">// Function 是一个构造函数</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span>.__proto__.constructor === <span class="built_in">Function</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认原型上面的constructor属性指向了原型所在的构造函数。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.constructor === <span class="built_in">Function</span>);</span><br><span class="line"><span class="comment">// Object本身没有constructor这个属性，那么就到它的原型链上去查找，</span></span><br><span class="line"><span class="built_in">Object</span>.__proto__ === <span class="built_in">Function</span>.prototype;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span>.__proto__.__proto__ === <span class="built_in">Object</span>.prototype);</span><br><span class="line"><span class="built_in">Function</span>.__proto__ === <span class="built_in">Function</span>.prototype;</span><br><span class="line"><span class="built_in">Function</span>.prototype.__proto__ === <span class="built_in">Object</span>.prototype;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  obj.name = <span class="string">"腐女"</span>;</span><br><span class="line">  obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">  obj.name = <span class="string">"屌丝"</span>; <span class="comment">//这是另一个新对象的name</span></span><br><span class="line">&#125;</span><br><span class="line">foo(o);</span><br><span class="line"><span class="built_in">console</span>.log(o.name); <span class="comment">//想要的是原来对象的name，所以输出腐女</span></span><br></pre></td></tr></table></figure>

<h3 id="实现一个继承"><a href="#实现一个继承" class="headerlink" title="实现一个继承"></a>实现一个继承</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Parent.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"parent name:"</span>, <span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">name, parentName</span>) </span>&#123;</span><br><span class="line">  Parent.call(<span class="keyword">this</span>, parentName);</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">proto</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype = proto;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br><span class="line">Child.prototype = create(Parent.prototype);</span><br><span class="line">Child.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"child name:"</span>, <span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Child.prototype.constructor = Child;</span><br><span class="line"><span class="keyword">var</span> parent = <span class="keyword">new</span> Parent(<span class="string">"汪某"</span>);</span><br><span class="line">parent.sayName(); <span class="comment">// parent name: 汪某</span></span><br><span class="line"><span class="keyword">var</span> child = <span class="keyword">new</span> Child(<span class="string">"son"</span>, <span class="string">"汪某"</span>);</span><br></pre></td></tr></table></figure>

<h3 id="编写一个方法-求一个字符串的字节长度"><a href="#编写一个方法-求一个字符串的字节长度" class="headerlink" title="编写一个方法 求一个字符串的字节长度"></a>编写一个方法 求一个字符串的字节长度</h3><p>假设：一个英文字符占用一个字节，一个中文字符占用两个字节    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function GetBytes(str)&#123;</span><br><span class="line">        var len = str.length;</span><br><span class="line">        var bytes = len;</span><br><span class="line">        for(var i=0; i&lt;len; i++)&#123;</span><br><span class="line">            if (str.charCodeAt(i) &gt; 255) bytes++;</span><br><span class="line">        &#125;</span><br><span class="line">        return bytes;</span><br><span class="line">    &#125;</span><br><span class="line">alert(GetBytes(&quot;你好,as&quot;));</span><br></pre></td></tr></table></figure>

<h3 id="写一个通用的事件侦听器函数"><a href="#写一个通用的事件侦听器函数" class="headerlink" title="写一个通用的事件侦听器函数"></a>写一个通用的事件侦听器函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">// event(事件)工具集，来源：github.com/markyun</span><br><span class="line">   markyun.Event = &#123;</span><br><span class="line">       // 页面加载完成后</span><br><span class="line">       readyEvent : function(fn) &#123;</span><br><span class="line">           if (fn==null) &#123;</span><br><span class="line">               fn=document;</span><br><span class="line">           &#125;</span><br><span class="line">           var oldonload = window.onload;</span><br><span class="line">           if (typeof window.onload != &apos;function&apos;) &#123;</span><br><span class="line">               window.onload = fn;</span><br><span class="line">           &#125; else &#123;</span><br><span class="line">               window.onload = function() &#123;</span><br><span class="line">                   oldonload();</span><br><span class="line">                   fn();</span><br><span class="line">               &#125;;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;,</span><br><span class="line">       // 视能力分别使用dom0||dom2||IE方式 来绑定事件</span><br><span class="line">       // 参数： 操作的元素,事件名称 ,事件处理程序</span><br><span class="line">       addEvent : function(element, type, handler) &#123;</span><br><span class="line">           if (element.addEventListener) &#123;</span><br><span class="line">               //事件类型、需要执行的函数、是否捕捉</span><br><span class="line">               element.addEventListener(type, handler, false);</span><br><span class="line">           &#125; else if (element.attachEvent) &#123;</span><br><span class="line">               element.attachEvent(&apos;on&apos; + type, function() &#123;</span><br><span class="line">                   handler.call(element);</span><br><span class="line">               &#125;);</span><br><span class="line">           &#125; else &#123;</span><br><span class="line">               element[&apos;on&apos; + type] = handler;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;,</span><br><span class="line">       // 移除事件</span><br><span class="line">       removeEvent : function(element, type, handler) &#123;</span><br><span class="line">           if (element.removeEventListener) &#123;</span><br><span class="line">               element.removeEventListener(type, handler, false);</span><br><span class="line">           &#125; else if (element.datachEvent) &#123;</span><br><span class="line">               element.detachEvent(&apos;on&apos; + type, handler);</span><br><span class="line">           &#125; else &#123;</span><br><span class="line">               element[&apos;on&apos; + type] = null;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;,</span><br><span class="line">       // 阻止事件 (主要是事件冒泡，因为IE不支持事件捕获)</span><br><span class="line">       stopPropagation : function(ev) &#123;</span><br><span class="line">           if (ev.stopPropagation) &#123;</span><br><span class="line">               ev.stopPropagation();</span><br><span class="line">           &#125; else &#123;</span><br><span class="line">               ev.cancelBubble = true;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;,</span><br><span class="line">       // 取消事件的默认行为</span><br><span class="line">       preventDefault : function(event) &#123;</span><br><span class="line">           if (event.preventDefault) &#123;</span><br><span class="line">               event.preventDefault();</span><br><span class="line">           &#125; else &#123;</span><br><span class="line">               event.returnValue = false;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;,</span><br><span class="line">       // 获取事件目标</span><br><span class="line">       getTarget : function(event) &#123;</span><br><span class="line">           return event.target || event.srcElement;</span><br><span class="line">       &#125;,</span><br><span class="line">       // 获取event对象的引用，取到事件的所有信息，确保随时能使用event；</span><br><span class="line">       getEvent : function(e) &#123;</span><br><span class="line">           var ev = e || window.event;</span><br><span class="line">           if (!ev) &#123;</span><br><span class="line">               var c = this.getEvent.caller;</span><br><span class="line">               while (c) &#123;</span><br><span class="line">                   ev = c.arguments[0];</span><br><span class="line">                   if (ev &amp;&amp; Event == ev.constructor) &#123;</span><br><span class="line">                       break;</span><br><span class="line">                   &#125;</span><br><span class="line">                   c = c.caller;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           return ev;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;;</span><br></pre></td></tr></table></figure>

<h3 id="写一个通用的事件侦听器函数-1"><a href="#写一个通用的事件侦听器函数-1" class="headerlink" title="写一个通用的事件侦听器函数"></a>写一个通用的事件侦听器函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// event(事件)工具集，来源：https://github.com/markyun</span></span><br><span class="line">markyun.Event = &#123;</span><br><span class="line">  <span class="comment">// 页面加载完成后</span></span><br><span class="line">  readyEvent: <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (fn == <span class="literal">null</span>) &#123;</span><br><span class="line">      fn = <span class="built_in">document</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> oldonload = <span class="built_in">window</span>.onload;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span>.onload != <span class="string">"function"</span>) &#123;</span><br><span class="line">      <span class="built_in">window</span>.onload = fn;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        oldonload();</span><br><span class="line">        fn();</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 视能力分别使用dom0||dom2||IE方式 来绑定事件</span></span><br><span class="line">  <span class="comment">// 参数： 操作的元素,事件名称 ,事件处理程序</span></span><br><span class="line">  addEvent: <span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (element.addEventListener) &#123;</span><br><span class="line">      <span class="comment">//事件类型、需要执行的函数、是否捕捉</span></span><br><span class="line">      element.addEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent) &#123;</span><br><span class="line">      element.attachEvent(<span class="string">"on"</span> + type, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        handler.call(element);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      element[<span class="string">"on"</span> + type] = handler;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 移除事件</span></span><br><span class="line">  removeEvent: <span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (element.removeEnentListener) &#123;</span><br><span class="line">      element.removeEnentListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.datachEvent) &#123;</span><br><span class="line">      element.detachEvent(<span class="string">"on"</span> + type, handler);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      element[<span class="string">"on"</span> + type] = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 阻止事件 (主要是事件冒泡，因为IE不支持事件捕获)</span></span><br><span class="line">  stopPropagation: <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ev.stopPropagation) &#123;</span><br><span class="line">      ev.stopPropagation();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ev.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 取消事件的默认行为</span></span><br><span class="line">  preventDefault: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (event.preventDefault) &#123;</span><br><span class="line">      event.preventDefault();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      event.returnValue = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 获取事件目标</span></span><br><span class="line">  getTarget: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> event.target || event.srcElement;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 获取event对象的引用，取到事件的所有信息，确保随时能使用event；</span></span><br><span class="line">  getEvent: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ev = e || <span class="built_in">window</span>.event;</span><br><span class="line">    <span class="keyword">if</span> (!ev) &#123;</span><br><span class="line">      <span class="keyword">var</span> c = <span class="keyword">this</span>.getEvent.caller;</span><br><span class="line">      <span class="keyword">while</span> (c) &#123;</span><br><span class="line">        ev = c.arguments[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (ev &amp;&amp; Event == ev.constructor) &#123;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        c = c.caller;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ev;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="手写事件侦听器，并要求兼容浏览器"><a href="#手写事件侦听器，并要求兼容浏览器" class="headerlink" title="手写事件侦听器，并要求兼容浏览器"></a>手写事件侦听器，并要求兼容浏览器</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> eventUtil = &#123;</span><br><span class="line">  getEvent: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> event || <span class="built_in">window</span>.event;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  getTarget: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> event.target || event.srcElement;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  addListener: <span class="function"><span class="keyword">function</span>(<span class="params">element, type, hander</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (element.addEventListener) &#123;</span><br><span class="line">          element.addEventListener(type, hander, <span class="literal">false</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent) &#123;</span><br><span class="line">          element.attachEvent(<span class="string">'on'</span> + type, hander);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          element[<span class="string">'on'</span> + type] = hander;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  removeListener: <span class="function"><span class="keyword">function</span>(<span class="params">element, type, hander</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (element.removeEventListener) &#123;</span><br><span class="line">          element.removeEventListener(type, hander, <span class="literal">false</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.deattachEvent) &#123;</span><br><span class="line">          element.detachEvent(type, hander);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          element[<span class="string">'on'</span> + type] = <span class="literal">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  preventDefault: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (event.preventDefault) &#123;</span><br><span class="line">          event.preventDefault();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          event.returnValue = <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  stopPropagation: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (event.stopPropagation) &#123;</span><br><span class="line">          event.stopPropagation();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          event.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn"</span>);</span><br><span class="line">  <span class="keyword">var</span> link = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"a"</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  eventUtil.addListener(btn, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> event = eventUtil.getEvent(event);</span><br><span class="line">      <span class="keyword">var</span> target = eventUtil.getTarget(event);</span><br><span class="line">      alert(event.type);</span><br><span class="line">      alert(target);</span><br><span class="line">      eventUtil.stopPropagation(event);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  eventUtil.addListener(link, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">      alert(<span class="string">"prevent default event"</span>);</span><br><span class="line">      <span class="keyword">var</span> event = eventUtil.getEvent(event);</span><br><span class="line">      eventUtil.preventDefault(event);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  eventUtil.addListener(<span class="built_in">document</span>.body, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      alert(<span class="string">"click body"</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h3 id="写一个通用的事件侦听器函数。"><a href="#写一个通用的事件侦听器函数。" class="headerlink" title="写一个通用的事件侦听器函数。"></a>写一个通用的事件侦听器函数。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">// event(事件)工具集，来源：github.com/markyun</span><br><span class="line">markyun.Event = &#123;</span><br><span class="line">	// 页面加载完成后</span><br><span class="line">	readyEvent : function(fn) &#123;</span><br><span class="line">		if (fn==null) &#123;</span><br><span class="line">			fn=document;</span><br><span class="line">		&#125;</span><br><span class="line">		var oldonload = window.onload;</span><br><span class="line">		if (typeof window.onload != &apos;function&apos;) &#123;</span><br><span class="line">			window.onload = fn;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			window.onload = function() &#123;</span><br><span class="line">				oldonload();</span><br><span class="line">				fn();</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	// 视能力分别使用dom0||dom2||IE方式 来绑定事件</span><br><span class="line">	// 参数： 操作的元素,事件名称 ,事件处理程序</span><br><span class="line">	addEvent : function(element, type, handler) &#123;</span><br><span class="line">		if (element.addEventListener) &#123;</span><br><span class="line">			//事件类型、需要执行的函数、是否捕捉</span><br><span class="line">			element.addEventListener(type, handler, false);</span><br><span class="line">		&#125; else if (element.attachEvent) &#123;</span><br><span class="line">			element.attachEvent(&apos;on&apos; + type, function() &#123;</span><br><span class="line">				handler.call(element);</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			element[&apos;on&apos; + type] = handler;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	// 移除事件</span><br><span class="line">	removeEvent : function(element, type, handler) &#123;</span><br><span class="line">		if (element.removeEventListener) &#123;</span><br><span class="line">			element.removeEventListener(type, handler, false);</span><br><span class="line">		&#125; else if (element.datachEvent) &#123;</span><br><span class="line">			element.detachEvent(&apos;on&apos; + type, handler);</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			element[&apos;on&apos; + type] = null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	// 阻止事件 (主要是事件冒泡，因为IE不支持事件捕获)</span><br><span class="line">	stopPropagation : function(ev) &#123;</span><br><span class="line">		if (ev.stopPropagation) &#123;</span><br><span class="line">			ev.stopPropagation();</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			ev.cancelBubble = true;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	// 取消事件的默认行为</span><br><span class="line">	preventDefault : function(event) &#123;</span><br><span class="line">		if (event.preventDefault) &#123;</span><br><span class="line">			event.preventDefault();</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			event.returnValue = false;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	// 获取事件目标</span><br><span class="line">	getTarget : function(event) &#123;</span><br><span class="line">		return event.target || event.srcElement;</span><br><span class="line">	&#125;,</span><br><span class="line">	// 获取event对象的引用，取到事件的所有信息，确保随时能使用event；</span><br><span class="line">	getEvent : function(e) &#123;</span><br><span class="line">		var ev = e || window.event;</span><br><span class="line">		if (!ev) &#123;</span><br><span class="line">			var c = this.getEvent.caller;</span><br><span class="line">			while (c) &#123;</span><br><span class="line">				ev = c.arguments[0];</span><br><span class="line">				if (ev &amp;&amp; Event == ev.constructor) &#123;</span><br><span class="line">					break;</span><br><span class="line">				&#125;</span><br><span class="line">				c = c.caller;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return ev;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="手写事件模型"><a href="#手写事件模型" class="headerlink" title="手写事件模型"></a>手写事件模型</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Event = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> list = &#123;&#125;, bind, trigger, remove;</span><br><span class="line">    bind = <span class="function"><span class="keyword">function</span> (<span class="params">key, fn</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!list[key]) &#123;</span><br><span class="line">            list[key] = [];</span><br><span class="line">        &#125;</span><br><span class="line">        list[key].push(fn);</span><br><span class="line">    &#125;;</span><br><span class="line">    trigger = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> key = <span class="built_in">Array</span>.prototype.shift.call(<span class="built_in">arguments</span>);</span><br><span class="line">        <span class="keyword">var</span> fns = list[key];</span><br><span class="line">        <span class="keyword">if</span> (!fns || fns.length === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, fn; fn = fns[i++];) &#123;</span><br><span class="line">            fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    remove = <span class="function"><span class="keyword">function</span> (<span class="params">key, fn</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> fns = list[key];</span><br><span class="line">        <span class="keyword">if</span> (!fns) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!fn) &#123;</span><br><span class="line">            fns &amp; (fns.length = <span class="number">0</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = fns.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">                <span class="keyword">var</span> _fn = fns[i];</span><br><span class="line">                <span class="keyword">if</span> (_fn === fn) &#123;</span><br><span class="line">                    fns.splice(i, <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        bind: bind,</span><br><span class="line">        trigger: trigger,</span><br><span class="line">        remove: remove</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">Event.bind(<span class="string">'Hit'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">'bind event'</span>); &#125;); <span class="comment">// 绑定事件</span></span><br><span class="line">Event.trigger(<span class="string">"Hit"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">'trigger event'</span>); &#125;); <span class="comment">// 触发事件</span></span><br></pre></td></tr></table></figure>

<h3 id="手写事件代理，并要求兼容浏览器"><a href="#手写事件代理，并要求兼容浏览器" class="headerlink" title="手写事件代理，并要求兼容浏览器"></a>手写事件代理，并要求兼容浏览器</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delegateEvent</span>(<span class="params">parentEl, selector, type, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> handler = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">          <span class="keyword">var</span> e = e || <span class="built_in">window</span>.event;</span><br><span class="line">          <span class="keyword">var</span> target = e.target || e.srcElement;</span><br><span class="line">          <span class="keyword">if</span> (matchSelector(target, selector)) &#123;</span><br><span class="line">              <span class="keyword">if</span>(fn) &#123;</span><br><span class="line">                  fn.call(target, e);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span>(parentEl.addEventListener)&#123;</span><br><span class="line">        parentEl.addEventListener(type, handler);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        parentEl.attachEvent(<span class="string">"on"</span> + type, handler);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * support #id, tagName, .className</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">matchSelector</span>(<span class="params">ele, selector</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// if use id</span></span><br><span class="line">    <span class="keyword">if</span> (selector.charAt(<span class="number">0</span>) === <span class="string">"#"</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> ele.id === selector.slice(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// if use class</span></span><br><span class="line">    <span class="keyword">if</span> (selector.charAt(<span class="number">0</span>) === <span class="string">"."</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="string">" "</span> + ele.className + <span class="string">" "</span>).indexOf(<span class="string">" "</span> + selector.slice(<span class="number">1</span>) + <span class="string">" "</span>) != <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// if use tagName</span></span><br><span class="line">    <span class="keyword">return</span> ele.tagName.toLowerCase() === selector.toLowerCase();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">"box"</span>);</span><br><span class="line">delegateEvent(box, <span class="string">"a"</span>, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.href);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="手写事件触发器，并要求兼容浏览器"><a href="#手写事件触发器，并要求兼容浏览器" class="headerlink" title="手写事件触发器，并要求兼容浏览器"></a>手写事件触发器，并要求兼容浏览器</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fireEvent = <span class="function"><span class="keyword">function</span>(<span class="params">element, event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.createEventObject)&#123;</span><br><span class="line">        <span class="keyword">var</span> mockEvent = <span class="built_in">document</span>.createEventObject();</span><br><span class="line">        <span class="keyword">return</span> element.fireEvent(<span class="string">'on'</span> + event, mockEvent)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> mockEvent = <span class="built_in">document</span>.createEvent(<span class="string">'HTMLEvents'</span>);</span><br><span class="line">        mockEvent.initEvent(event, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> element.dispatchEvent(mockEvent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="手写-Function-bind-函数"><a href="#手写-Function-bind-函数" class="headerlink" title="手写 Function.bind 函数"></a>手写 Function.bind 函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">Function</span>.prototype.bind) &#123;</span><br><span class="line">  <span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">oThis</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">"function"</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"'this' is not function"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// bind's default arguments, array without first element</span></span><br><span class="line">    <span class="comment">// first part arguments for the function</span></span><br><span class="line">    <span class="keyword">var</span> aBindArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">var</span> fToBind = <span class="keyword">this</span>; <span class="comment">// the function will be binding</span></span><br><span class="line">    <span class="keyword">var</span> fNOP = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> fBound = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="comment">// target this will be binding</span></span><br><span class="line">          <span class="keyword">var</span> oThis = <span class="keyword">this</span> <span class="keyword">instanceof</span> fNOP ? <span class="keyword">this</span> : oThis || <span class="keyword">this</span>;</span><br><span class="line">          <span class="comment">// last part arguments for the function</span></span><br><span class="line">          <span class="keyword">var</span> aCallArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">          <span class="comment">// complete arguments for the function</span></span><br><span class="line">          <span class="keyword">var</span> aFuncArgs = aBindArgs.concat(aCallArgs);</span><br><span class="line">          <span class="keyword">return</span> fToBind.apply(oThis, aFuncArgs);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// fBound extends fToBind</span></span><br><span class="line">    fNOP.prototype = <span class="keyword">this</span>.prototype;</span><br><span class="line">    fBound.prototype = <span class="keyword">new</span> fNOP();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> fBound;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>)</span>&#123; <span class="keyword">return</span> a + b + c;&#125;;</span><br><span class="line"><span class="keyword">var</span> newAdd = add.bind(<span class="literal">null</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">var</span> result = newAdd(<span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<h3 id="JS实现数组去重方法总结-六种方法"><a href="#JS实现数组去重方法总结-六种方法" class="headerlink" title="JS实现数组去重方法总结(六种方法)"></a>JS实现数组去重方法总结(六种方法)</h3><h4 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h4><p>双层循环，外层循环元素，内层循环时比较值</p>
<p>如果有相同的值则跳过，不相同则push进数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.distinct = function()&#123;</span><br><span class="line"> var arr = this,</span><br><span class="line">  result = [],</span><br><span class="line">  i,</span><br><span class="line">  j,</span><br><span class="line">  len = arr.length;</span><br><span class="line"> for(i = 0; i &lt; len; i++)&#123;</span><br><span class="line">  for(j = i + 1; j &lt; len; j++)&#123;</span><br><span class="line">   if(arr[i] === arr[j])&#123;</span><br><span class="line">    j = ++i;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  result.push(arr[i]);</span><br><span class="line"> &#125;</span><br><span class="line"> return result;</span><br><span class="line">&#125;</span><br><span class="line">var arra = [1,2,3,4,4,1,1,2,1,1,1];</span><br><span class="line">arra.distinct();    //返回[3,4,2,1]</span><br></pre></td></tr></table></figure>

<h4 id="方法二：利用splice直接在原数组进行操作"><a href="#方法二：利用splice直接在原数组进行操作" class="headerlink" title="方法二：利用splice直接在原数组进行操作"></a>方法二：利用splice直接在原数组进行操作</h4><p>双层循环，外层循环元素，内层循环时比较值</p>
<p>值相同时，则删去这个值</p>
<p>注意点:删除元素之后，需要将数组的长度也减1.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.distinct = function ()&#123;</span><br><span class="line"> var arr = this,</span><br><span class="line">  i,</span><br><span class="line">  j,</span><br><span class="line">  len = arr.length;</span><br><span class="line"> for(i = 0; i &lt; len; i++)&#123;</span><br><span class="line">  for(j = i + 1; j &lt; len; j++)&#123;</span><br><span class="line">   if(arr[i] == arr[j])&#123;</span><br><span class="line">    arr.splice(j,1);</span><br><span class="line">    len--;</span><br><span class="line">    j--;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> return arr;</span><br><span class="line">&#125;;</span><br><span class="line">var a = [1,2,3,4,5,6,5,3,2,4,56,4,1,2,1,1,1,1,1,1,];</span><br><span class="line">var b = a.distinct();</span><br><span class="line">console.log(b.toString()); //1,2,3,4,5,6,56</span><br></pre></td></tr></table></figure>

<p>优点：简单易懂</p>
<p>缺点：占用内存高，速度慢</p>
<h4 id="方法三：利用对象的属性不能相同的特点进行去重"><a href="#方法三：利用对象的属性不能相同的特点进行去重" class="headerlink" title="方法三：利用对象的属性不能相同的特点进行去重"></a>方法三：利用对象的属性不能相同的特点进行去重</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.distinct = function ()&#123;</span><br><span class="line"> var arr = this,</span><br><span class="line">  i,</span><br><span class="line">  obj = &#123;&#125;,</span><br><span class="line">  result = [],</span><br><span class="line">  len = arr.length;</span><br><span class="line"> for(i = 0; i&lt; arr.length; i++)&#123;</span><br><span class="line">  if(!obj[arr[i]])&#123; //如果能查找到，证明数组元素重复了</span><br><span class="line">   obj[arr[i]] = 1;</span><br><span class="line">   result.push(arr[i]);</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> return result;</span><br><span class="line">&#125;;</span><br><span class="line">var a = [1,2,3,4,5,6,5,3,2,4,56,4,1,2,1,1,1,1,1,1,];</span><br><span class="line">var b = a.distinct();</span><br><span class="line">console.log(b.toString()); //1,2,3,4,5,6,56</span><br></pre></td></tr></table></figure>

<h4 id="方法四：数组递归去重"><a href="#方法四：数组递归去重" class="headerlink" title="方法四：数组递归去重"></a>方法四：数组递归去重</h4><p>运用递归的思想</p>
<p>先排序，然后从最后开始比较，遇到相同，则删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.distinct = function ()&#123;</span><br><span class="line"> var arr = this,</span><br><span class="line">  len = arr.length;</span><br><span class="line"> arr.sort(function(a,b)&#123;  //对数组进行排序才能方便比较</span><br><span class="line">  return a - b;</span><br><span class="line"> &#125;)</span><br><span class="line"> function loop(index)&#123;</span><br><span class="line">  if(index &gt;= 1)&#123;</span><br><span class="line">   if(arr[index] === arr[index-1])&#123;</span><br><span class="line">    arr.splice(index,1);</span><br><span class="line">   &#125;</span><br><span class="line">   loop(index - 1); //递归loop函数进行去重</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> loop(len-1);</span><br><span class="line"> return arr;</span><br><span class="line">&#125;;</span><br><span class="line">var a = [1,2,3,4,5,6,5,3,2,4,56,4,1,2,1,1,1,1,1,1,56,45,56];</span><br><span class="line">var b = a.distinct();</span><br><span class="line">console.log(b.toString());  //1,2,3,4,5,6,45,56</span><br></pre></td></tr></table></figure>

<h4 id="方法五：利用indexOf以及forEach"><a href="#方法五：利用indexOf以及forEach" class="headerlink" title="方法五：利用indexOf以及forEach"></a>方法五：利用indexOf以及forEach</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.distinct = function ()&#123;</span><br><span class="line"> var arr = this,</span><br><span class="line">  result = [],</span><br><span class="line">  len = arr.length;</span><br><span class="line"> arr.forEach(function(v, i ,arr)&#123;  //这里利用map，filter方法也可以实现</span><br><span class="line">  var bool = arr.indexOf(v,i+1);  //从传入参数的下一个索引值开始寻找是否存在重复</span><br><span class="line">  if(bool === -1)&#123;</span><br><span class="line">   result.push(v);</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"> return result;</span><br><span class="line">&#125;;</span><br><span class="line">var a = [1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,3,2,3,3,2,2,1,23,1,23,2,3,2,3,2,3];</span><br><span class="line">var b = a.distinct();</span><br><span class="line">console.log(b.toString()); //1,23,2,3</span><br></pre></td></tr></table></figure>

<h4 id="方法六：利用ES6的set"><a href="#方法六：利用ES6的set" class="headerlink" title="方法六：利用ES6的set"></a>方法六：利用ES6的set</h4><p>Set数据结构，它类似于数组，其成员的值都是唯一的。</p>
<p>利用Array.from将Set结构转换成数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function dedupe(array)&#123;</span><br><span class="line"> return Array.from(new Set(array));</span><br><span class="line">&#125;</span><br><span class="line">dedupe([1,1,2,3]) //[1,2,3]</span><br></pre></td></tr></table></figure>

<p>拓展运算符(…)内部使用for…of循环</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1,2,3,3];</span><br><span class="line">let resultarr = [...new Set(arr)]; </span><br><span class="line">console.log(resultarr); //[1,2,3]</span><br></pre></td></tr></table></figure>

<h3 id="合并数组并去重的方法"><a href="#合并数组并去重的方法" class="headerlink" title="合并数组并去重的方法"></a>合并数组并去重的方法</h3><h4 id="一、concat-方法"><a href="#一、concat-方法" class="headerlink" title="一、concat()方法"></a>一、concat()方法</h4><p>思路：concat() 方法将传入的数组或非数组值与原数组合并,组成一个新的数组并返回。该方法会产生一个新的数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function concatArr(arr1, arr2)&#123;</span><br><span class="line">  var arr = arr1.concat(arr2);</span><br><span class="line">  arr = unique1(arr);//再引用上面的任意一个去重方法</span><br><span class="line">  return arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="二、Array-prototype-push-apply"><a href="#二、Array-prototype-push-apply" class="headerlink" title="二、Array.prototype.push.apply()"></a>二、Array.prototype.push.apply()</h4><p>思路：该方法优点是不会产生一个新的数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var a = [1, 2, 3];</span><br><span class="line">var b = [4, 5, 6];</span><br><span class="line">Array.prototype.push.apply(a, b);//a=[1,2,3,4,5,6]</span><br><span class="line">//等效于:a.push.apply(a, b);</span><br><span class="line">//也等效于[].push.apply(a, b); </span><br><span class="line">function concatArray(arr1,arr2)&#123;</span><br><span class="line">  Array.prototype.push.apply(arr1, arr2);</span><br><span class="line">  arr1 = unique1(arr1);</span><br><span class="line">  return arr1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="手写数组去重"><a href="#手写数组去重" class="headerlink" title="手写数组去重"></a>手写数组去重</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1, 2, 3, 3, 4, 4, 5, 5, 6, 1, 9, 3, 25, 4];</span><br><span class="line">function deRepeat() &#123;</span><br><span class="line">  var newArr = [];</span><br><span class="line">  var obj = &#123;&#125;;</span><br><span class="line">  var index = 0;</span><br><span class="line">  var l = arr.length;</span><br><span class="line">  for (var i = 0; i &lt; l; i++) &#123;</span><br><span class="line">    if (obj[arr[i]] == undefined) &#123;</span><br><span class="line">      obj[arr[i]] = 1;</span><br><span class="line">      newArr[index++] = arr[i];</span><br><span class="line">    &#125; else if (obj[arr[i]] == 1) continue;</span><br><span class="line">  &#125;</span><br><span class="line">  return newArr;</span><br><span class="line">&#125;</span><br><span class="line">var newArr2 = deRepeat(arr);</span><br><span class="line">alert(newArr2); //输出1,2,3,4,5,6,9,25</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> [...new <span class="built_in">Set</span>(<span class="keyword">this</span>)];&#125;;</span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>].unique();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique1</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> hash = &#123;&#125;, result = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>, len=arr.length; i&lt;len; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(! hash[arr[i]])&#123;</span><br><span class="line">          result.push(arr[i]);</span><br><span class="line">          hash[arr[i]] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">unique1([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.unique2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.sort();</span><br><span class="line">    <span class="keyword">var</span> result = [<span class="keyword">this</span>[<span class="number">0</span>]];</span><br><span class="line">    <span class="keyword">var</span> len = <span class="keyword">this</span>.length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>[i] !== result[result.length - <span class="number">1</span>])&#123;</span><br><span class="line">          result.push(<span class="keyword">this</span>[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>].unique2();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique3</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;arr.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(result.indexOf(arr[i]) == <span class="number">-1</span>)&#123;</span><br><span class="line">          result.push(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">unique3([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//数组去重:</span><br><span class="line">Array.prototype. myUnique = function myUnique()&#123;</span><br><span class="line">    //this是当前要操作的数组</span><br><span class="line">    var obj = &#123;&#125;;</span><br><span class="line">    for( var i = 0; i &lt; this.length; i ++)&#123;</span><br><span class="line">        var cur = this[i];</span><br><span class="line">        if (obj[cur] == cur)&#123;</span><br><span class="line">            this[i] = this[ this.length - 1];</span><br><span class="line">            this.length --;</span><br><span class="line">            i --; //防止数组塌陷</span><br><span class="line">            continue;</span><br><span class="line">        &#125;</span><br><span class="line">        obj[cur] = cur;</span><br><span class="line">    &#125;</span><br><span class="line">    obj = null;</span><br><span class="line">    return this; //为了实现链式写法</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="将url的查询参数解析成字典对象"><a href="#将url的查询参数解析成字典对象" class="headerlink" title="将url的查询参数解析成字典对象"></a>将url的查询参数解析成字典对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseQuery</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  url = url == <span class="literal">null</span> ? <span class="built_in">window</span>.location.href : url;</span><br><span class="line">  <span class="keyword">var</span> search = url.substring(url.lastIndexOf(<span class="string">"?"</span>) + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">var</span> hash = &#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="regexp">/([^?&amp;=]+)=([^?&amp;=]*)/g</span>;</span><br><span class="line">  search.replace(reg, <span class="function"><span class="keyword">function</span> (<span class="params">match, $<span class="number">1</span>, $<span class="number">2</span></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> name = <span class="built_in">decodeURIComponent</span>($<span class="number">1</span>);</span><br><span class="line">      <span class="keyword">var</span> val = <span class="built_in">decodeURIComponent</span>($<span class="number">2</span>);</span><br><span class="line">      hash[name] = <span class="built_in">String</span>(val);</span><br><span class="line">      <span class="keyword">return</span> match;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> hash;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="封装函数节流函数"><a href="#封装函数节流函数" class="headerlink" title="封装函数节流函数"></a>封装函数节流函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> throttle = <span class="function"><span class="keyword">function</span>(<span class="params">fn, delay, mustRunDelay</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">var</span> t_start;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> context = <span class="keyword">this</span>, args = <span class="built_in">arguments</span>, t_curr = +<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    clearTimeout(timer);</span><br><span class="line">    <span class="keyword">if</span>(!t_start)&#123;</span><br><span class="line">      t_start = t_curr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(t_curr - t_start &gt;= mustRunDelay)&#123;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">      t_start = t_curr;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        fn.apply(context, args);</span><br><span class="line">      &#125;, delay);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用（两次间隔50ms内连续触发不执行，但每累计100ms至少执行一次</span></span><br><span class="line"><span class="built_in">window</span>.onresize = throttle(myFunc, <span class="number">50</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure>

<h3 id="用JS实现千位分隔符"><a href="#用JS实现千位分隔符" class="headerlink" title="用JS实现千位分隔符"></a>用JS实现千位分隔符</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test1</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> str = (+ num) + <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">var</span> len = str.length;</span><br><span class="line">  <span class="keyword">if</span>(len &lt;= <span class="number">3</span>) <span class="keyword">return</span> str;</span><br><span class="line">  num = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">while</span>(len &gt; <span class="number">3</span>)&#123;</span><br><span class="line">      len -= <span class="number">3</span>;</span><br><span class="line">      num = <span class="string">','</span> + str.substr(len, <span class="number">3</span>) + num;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> str.substr(<span class="number">0</span>, len) + num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// ?= 正向匹配:匹配位置</span></span><br><span class="line">  <span class="comment">// ?! 正向不匹配:排除位置</span></span><br><span class="line">  <span class="keyword">var</span> str = (+num).toString();</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="regexp">/(?=(?!\b)(\d&#123;3&#125;)+$)/g</span>;</span><br><span class="line">  <span class="keyword">return</span> str.replace(reg, <span class="string">','</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="深克隆（deepclone）"><a href="#深克隆（deepclone）" class="headerlink" title="深克隆（deepclone）"></a>深克隆（deepclone）</h3><p>简单版：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const newObj = JSON.parse(JSON.stringify(oldObj));</span><br></pre></td></tr></table></figure>

<p>局限性：</p>
<ol>
<li>他无法实现对函数 、RegExp等特殊对象的克隆</li>
<li>会抛弃对象的constructor,所有的构造函数会指向Object</li>
<li>对象有循环引用,会报错</li>
</ol>
<p>面试版:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * deep clone</span><br><span class="line"> * @param  &#123;[type]&#125; parent object 需要进行克隆的对象</span><br><span class="line"> * @return &#123;[type]&#125;        深克隆后的对象</span><br><span class="line"> */</span><br><span class="line">const clone = parent =&gt; &#123;</span><br><span class="line">  // 判断类型</span><br><span class="line">  const isType = (obj, type) =&gt; &#123;</span><br><span class="line">    if (typeof obj !== &quot;object&quot;) return false;</span><br><span class="line">    const typeString = Object.prototype.toString.call(obj);</span><br><span class="line">    let flag;</span><br><span class="line">    switch (type) &#123;</span><br><span class="line">      case &quot;Array&quot;:</span><br><span class="line">        flag = typeString === &quot;[object Array]&quot;;</span><br><span class="line">        break;</span><br><span class="line">      case &quot;Date&quot;:</span><br><span class="line">        flag = typeString === &quot;[object Date]&quot;;</span><br><span class="line">        break;</span><br><span class="line">      case &quot;RegExp&quot;:</span><br><span class="line">        flag = typeString === &quot;[object RegExp]&quot;;</span><br><span class="line">        break;</span><br><span class="line">      default:</span><br><span class="line">        flag = false;</span><br><span class="line">    &#125;</span><br><span class="line">    return flag;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  // 处理正则</span><br><span class="line">  const getRegExp = re =&gt; &#123;</span><br><span class="line">    var flags = &quot;&quot;;</span><br><span class="line">    if (re.global) flags += &quot;g&quot;;</span><br><span class="line">    if (re.ignoreCase) flags += &quot;i&quot;;</span><br><span class="line">    if (re.multiline) flags += &quot;m&quot;;</span><br><span class="line">    return flags;</span><br><span class="line">  &#125;;</span><br><span class="line">  // 维护两个储存循环引用的数组</span><br><span class="line">  const parents = [];</span><br><span class="line">  const children = [];</span><br><span class="line"></span><br><span class="line">  const _clone = parent =&gt; &#123;</span><br><span class="line">    if (parent === null) return null;</span><br><span class="line">    if (typeof parent !== &quot;object&quot;) return parent;</span><br><span class="line"></span><br><span class="line">    let child, proto;</span><br><span class="line"></span><br><span class="line">    if (isType(parent, &quot;Array&quot;)) &#123;</span><br><span class="line">      // 对数组做特殊处理</span><br><span class="line">      child = [];</span><br><span class="line">    &#125; else if (isType(parent, &quot;RegExp&quot;)) &#123;</span><br><span class="line">      // 对正则对象做特殊处理</span><br><span class="line">      child = new RegExp(parent.source, getRegExp(parent));</span><br><span class="line">      if (parent.lastIndex) child.lastIndex = parent.lastIndex;</span><br><span class="line">    &#125; else if (isType(parent, &quot;Date&quot;)) &#123;</span><br><span class="line">      // 对Date对象做特殊处理</span><br><span class="line">      child = new Date(parent.getTime());</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      // 处理对象原型</span><br><span class="line">      proto = Object.getPrototypeOf(parent);</span><br><span class="line">      // 利用Object.create切断原型链</span><br><span class="line">      child = Object.create(proto);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 处理循环引用</span><br><span class="line">    const index = parents.indexOf(parent);</span><br><span class="line"></span><br><span class="line">    if (index != -1) &#123;</span><br><span class="line">      // 如果父数组存在本对象,说明之前已经被引用过,直接返回此对象</span><br><span class="line">      return children[index];</span><br><span class="line">    &#125;</span><br><span class="line">    parents.push(parent);</span><br><span class="line">    children.push(child);</span><br><span class="line"></span><br><span class="line">    for (let i in parent) &#123;</span><br><span class="line">      // 递归</span><br><span class="line">      child[i] = _clone(parent[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return child;</span><br><span class="line">  &#125;;</span><br><span class="line">  return _clone(parent);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>局限性:</p>
<ol>
<li>一些特殊情况没有处理: 例如Buffer对象、Promise、Set、Map</li>
<li>另外对于确保没有循环引用的对象，我们可以省去对循环引用的特殊处理，因为这很消耗时间</li>
</ol>
<blockquote>
<p>原理详解<a href="http://mp.weixin.qq.com/s?__biz=MzI3NjM1OTI3Mw==&mid=2247483692&idx=1&sn=ab072f6e9bf145cda31b19b96131faf7&chksm=eb77f02adc00793c60966183ae6ef692d3f5c8518ea04fe5491e2de70183e8637ec7dd843ab2&scene=21#wechat_redirect" target="_blank" rel="noopener">实现深克隆</a></p>
</blockquote>
<h3 id="实现Event-event-bus"><a href="#实现Event-event-bus" class="headerlink" title="实现Event(event bus)"></a>实现Event(event bus)</h3><p>event bus既是node中各个模块的基石，又是前端组件通信的依赖手段之一，同时涉及了订阅-发布设计模式，是非常重要的基础。</p>
<p>简单版：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class EventEmeitter &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    this._events = this._events || new Map(); // 储存事件/回调键值对</span><br><span class="line">    this._maxListeners = this._maxListeners || 10; // 设立监听上限</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 触发名为type的事件</span><br><span class="line">EventEmeitter.prototype.emit = function(type, ...args) &#123;</span><br><span class="line">  let handler;</span><br><span class="line">  // 从储存事件键值对的this._events中获取对应事件回调函数</span><br><span class="line">  handler = this._events.get(type);</span><br><span class="line">  if (args.length &gt; 0) &#123;</span><br><span class="line">    handler.apply(this, args);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    handler.call(this);</span><br><span class="line">  &#125;</span><br><span class="line">  return true;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 监听名为type的事件</span><br><span class="line">EventEmeitter.prototype.addListener = function(type, fn) &#123;</span><br><span class="line">  // 将type事件以及对应的fn函数放入this._events中储存</span><br><span class="line">  if (!this._events.get(type)) &#123;</span><br><span class="line">    this._events.set(type, fn);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>面试版：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">class EventEmeitter &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    this._events = this._events || new Map(); // 储存事件/回调键值对</span><br><span class="line">    this._maxListeners = this._maxListeners || 10; // 设立监听上限</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 触发名为type的事件</span><br><span class="line">EventEmeitter.prototype.emit = function(type, ...args) &#123;</span><br><span class="line">  let handler;</span><br><span class="line">  // 从储存事件键值对的this._events中获取对应事件回调函数</span><br><span class="line">  handler = this._events.get(type);</span><br><span class="line">  if (args.length &gt; 0) &#123;</span><br><span class="line">    handler.apply(this, args);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    handler.call(this);</span><br><span class="line">  &#125;</span><br><span class="line">  return true;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 监听名为type的事件</span><br><span class="line">EventEmeitter.prototype.addListener = function(type, fn) &#123;</span><br><span class="line">  // 将type事件以及对应的fn函数放入this._events中储存</span><br><span class="line">  if (!this._events.get(type)) &#123;</span><br><span class="line">    this._events.set(type, fn);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 触发名为type的事件</span><br><span class="line">EventEmeitter.prototype.emit = function(type, ...args) &#123;</span><br><span class="line">  let handler;</span><br><span class="line">  handler = this._events.get(type);</span><br><span class="line">  if (Array.isArray(handler)) &#123;</span><br><span class="line">    // 如果是一个数组说明有多个监听者,需要依次此触发里面的函数</span><br><span class="line">    for (let i = 0; i &lt; handler.length; i++) &#123;</span><br><span class="line">      if (args.length &gt; 0) &#123;</span><br><span class="line">        handler[i].apply(this, args);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        handler[i].call(this);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    // 单个函数的情况我们直接触发即可</span><br><span class="line">    if (args.length &gt; 0) &#123;</span><br><span class="line">      handler.apply(this, args);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      handler.call(this);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return true;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 监听名为type的事件</span><br><span class="line">EventEmeitter.prototype.addListener = function(type, fn) &#123;</span><br><span class="line">  const handler = this._events.get(type); // 获取对应事件名称的函数清单</span><br><span class="line">  if (!handler) &#123;</span><br><span class="line">    this._events.set(type, fn);</span><br><span class="line">  &#125; else if (handler &amp;&amp; typeof handler === &quot;function&quot;) &#123;</span><br><span class="line">    // 如果handler是函数说明只有一个监听者</span><br><span class="line">    this._events.set(type, [handler, fn]); // 多个监听者我们需要用数组储存</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    handler.push(fn); // 已经有多个监听者,那么直接往数组里push函数即可</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">EventEmeitter.prototype.removeListener = function(type, fn) &#123;</span><br><span class="line">  const handler = this._events.get(type); // 获取对应事件名称的函数清单</span><br><span class="line"></span><br><span class="line">  // 如果是函数,说明只被监听了一次</span><br><span class="line">  if (handler &amp;&amp; typeof handler === &quot;function&quot;) &#123;</span><br><span class="line">    this._events.delete(type, fn);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    let postion;</span><br><span class="line">    // 如果handler是数组,说明被监听多次要找到对应的函数</span><br><span class="line">    for (let i = 0; i &lt; handler.length; i++) &#123;</span><br><span class="line">      if (handler[i] === fn) &#123;</span><br><span class="line">        postion = i;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        postion = -1;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 如果找到匹配的函数,从数组中清除</span><br><span class="line">    if (postion !== -1) &#123;</span><br><span class="line">      // 找到数组对应的位置,直接清除此回调</span><br><span class="line">      handler.splice(postion, 1);</span><br><span class="line">      // 如果清除后只有一个函数,那么取消数组,以函数形式保存</span><br><span class="line">      if (handler.length === 1) &#123;</span><br><span class="line">        this._events.set(type, handler[0]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      return this;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="实现instanceOf"><a href="#实现instanceOf" class="headerlink" title="实现instanceOf"></a>实现instanceOf</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 模拟 instanceof</span><br><span class="line">function instance_of(L, R) &#123;</span><br><span class="line">  //L 表示左表达式，R 表示右表达式</span><br><span class="line">  var O = R.prototype; // 取 R 的显示原型</span><br><span class="line">  L = L.__proto__; // 取 L 的隐式原型</span><br><span class="line">  while (true) &#123;</span><br><span class="line">    if (L === null) return false;</span><br><span class="line">    if (O === L)</span><br><span class="line">      // 这里重点：当 O 严格等于 L 时，返回 true</span><br><span class="line">      return true;</span><br><span class="line">    L = L.__proto__;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现一个call"><a href="#实现一个call" class="headerlink" title="实现一个call"></a>实现一个call</h3><p>call做了什么:</p>
<ul>
<li>将函数设为对象的属性</li>
<li>执行&amp;删除这个函数</li>
<li>指定this到函数并传入给定参数执行函数</li>
<li>如果不传入参数，默认指向为 window</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 模拟 call bar.mycall(null);</span><br><span class="line">//实现一个call方法：</span><br><span class="line">Function.prototype.myCall = function(context) &#123;</span><br><span class="line">  //此处没有考虑context非object情况</span><br><span class="line">  context.fn = this;</span><br><span class="line">  let args = [];</span><br><span class="line">  for (let i = 1, len = arguments.length; i &lt; len; i++) &#123;</span><br><span class="line">    args.push(arguments[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  context.fn(...args);</span><br><span class="line">  let result = context.fn(...args);</span><br><span class="line">  delete context.fn;</span><br><span class="line">  return result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>具体实现参考JavaScript深入之call和apply的模拟实现</p>
</blockquote>
<h3 id="实现apply方法"><a href="#实现apply方法" class="headerlink" title="实现apply方法"></a>实现apply方法</h3><p>apply原理与call很相似，不多赘述</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// 模拟 apply</span><br><span class="line">Function.prototype.myapply = function(context, arr) &#123;</span><br><span class="line">  var context = Object(context) || window;</span><br><span class="line">  context.fn = this;</span><br><span class="line"></span><br><span class="line">  var result;</span><br><span class="line">  if (!arr) &#123;</span><br><span class="line">    result = context.fn();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    var args = [];</span><br><span class="line">    for (var i = 0, len = arr.length; i &lt; len; i++) &#123;</span><br><span class="line">      args.push(&quot;arr[&quot; + i + &quot;]&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    result = eval(&quot;context.fn(&quot; + args + &quot;)&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  delete context.fn;</span><br><span class="line">  return result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="实现bind"><a href="#实现bind" class="headerlink" title="实现bind"></a>实现bind</h3><p>实现bind要做什么</p>
<ul>
<li>返回一个函数，绑定this，传递预置参数</li>
<li>bind返回的函数可以作为构造函数使用。故作为构造函数时应使得this失效，但是传入的参数依然有效</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// mdn的实现</span><br><span class="line">if (!Function.prototype.bind) &#123;</span><br><span class="line">  Function.prototype.bind = function(oThis) &#123;</span><br><span class="line">    if (typeof this !== &apos;function&apos;) &#123;</span><br><span class="line">      // closest thing possible to the ECMAScript 5</span><br><span class="line">      // internal IsCallable function</span><br><span class="line">      throw new TypeError(&apos;Function.prototype.bind - what is trying to be bound is not callable&apos;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var aArgs   = Array.prototype.slice.call(arguments, 1),</span><br><span class="line">        fToBind = this,</span><br><span class="line">        fNOP    = function() &#123;&#125;,</span><br><span class="line">        fBound  = function() &#123;</span><br><span class="line">          // this instanceof fBound === true时,说明返回的fBound被当做new的构造函数调用</span><br><span class="line">          return fToBind.apply(this instanceof fBound</span><br><span class="line">                 ? this</span><br><span class="line">                 : oThis,</span><br><span class="line">                 // 获取调用时(fBound)的传参.bind 返回的函数入参往往是这么传递的</span><br><span class="line">                 aArgs.concat(Array.prototype.slice.call(arguments)));</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    // 维护原型关系</span><br><span class="line">    if (this.prototype) &#123;</span><br><span class="line">      // Function.prototype doesn&apos;t have a prototype property</span><br><span class="line">      fNOP.prototype = this.prototype; </span><br><span class="line">    &#125;</span><br><span class="line">    // 下行的代码使fBound.prototype是fNOP的实例,因此</span><br><span class="line">    // 返回的fBound若作为new的构造函数,new生成的新对象作为this传入fBound,新对象的__proto__就是fNOP的实例</span><br><span class="line">    fBound.prototype = new fNOP();</span><br><span class="line"></span><br><span class="line">    return fBound;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>详解请移步JavaScript深入之bind的模拟实现 #12</p>
</blockquote>
<h3 id="模拟Object-create"><a href="#模拟Object-create" class="headerlink" title="模拟Object.create"></a>模拟Object.create</h3><p>Object.create()方法创建一个新对象，使用现有的对象来提供新创建的对象的<strong>proto</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 模拟 Object.create</span><br><span class="line"></span><br><span class="line">function create(proto) &#123;</span><br><span class="line">  function F() &#123;&#125;</span><br><span class="line">  F.prototype = proto;</span><br><span class="line"></span><br><span class="line">  return new F();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现类的继承"><a href="#实现类的继承" class="headerlink" title="实现类的继承"></a>实现类的继承</h3><p>类的继承在几年前是重点内容，有n种继承方式各有优劣，es6普及后越来越不重要，那么多种写法有点『回字有四样写法』的意思，如果还想深入理解的去看红宝书即可，我们目前只实现一种最理想的继承方式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">function Parent(name) &#123;</span><br><span class="line">    this.parent = name</span><br><span class="line">&#125;</span><br><span class="line">Parent.prototype.say = function() &#123;</span><br><span class="line">    console.log(`$&#123;this.parent&#125;: 你打篮球的样子像kunkun`)</span><br><span class="line">&#125;</span><br><span class="line">function Child(name, parent) &#123;</span><br><span class="line">    // 将父类的构造函数绑定在子类上</span><br><span class="line">    Parent.call(this, parent)</span><br><span class="line">    this.child = name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** </span><br><span class="line"> 1. 这一步不用Child.prototype =Parent.prototype的原因是怕共享内存，修改父类原型对象就会影响子类</span><br><span class="line"> 2. 不用Child.prototype = new Parent()的原因是会调用2次父类的构造方法（另一次是call），会存在一份多余的父类实例属性</span><br><span class="line">3. Object.create是创建了父类原型的副本，与父类原型完全隔离</span><br><span class="line">*/</span><br><span class="line">Child.prototype = Object.create(Parent.prototype);</span><br><span class="line">Child.prototype.say = function() &#123;</span><br><span class="line">    console.log(`$&#123;this.parent&#125;好，我是练习时长两年半的$&#123;this.child&#125;`);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 注意记得把子类的构造指向子类本身</span><br><span class="line">Child.prototype.constructor = Child;</span><br><span class="line"></span><br><span class="line">var parent = new Parent(&apos;father&apos;);</span><br><span class="line">parent.say() // father: 你打篮球的样子像kunkun</span><br><span class="line"></span><br><span class="line">var child = new Child(&apos;cxk&apos;, &apos;father&apos;);</span><br><span class="line">child.say() // father好，我是练习时长两年半的cxk</span><br></pre></td></tr></table></figure>

<h3 id="实现JSON-parse"><a href="#实现JSON-parse" class="headerlink" title="实现JSON.parse"></a>实现JSON.parse</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var json = &apos;&#123;&quot;name&quot;:&quot;cxk&quot;, &quot;age&quot;:25&#125;&apos;;</span><br><span class="line">var obj = eval(&quot;(&quot; + json + &quot;)&quot;);</span><br></pre></td></tr></table></figure>

<p>此方法属于黑魔法，极易容易被xss攻击，还有一种<code>new Function</code>大同小异。</p>
<p>简单的教程看这个半小时实现一个 JSON 解析器</p>
<h3 id="实现Promise"><a href="#实现Promise" class="headerlink" title="实现Promise"></a>实现Promise</h3><blockquote>
<p>我很早之前实现过一版，而且注释很多，但是居然找不到了,这是在网络上找了一版带注释的，目测没有大问题，具体过程可以看这篇史上最易读懂的 Promise/A+ 完全实现</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line">var PromisePolyfill = (function () &#123;</span><br><span class="line">  // 和reject不同的是resolve需要尝试展开thenable对象</span><br><span class="line">  function tryToResolve (value) &#123;</span><br><span class="line">    if (this === value) &#123;</span><br><span class="line">    // 主要是防止下面这种情况</span><br><span class="line">    // let y = new Promise(res =&gt; setTimeout(res(y)))</span><br><span class="line">      throw TypeError(&apos;Chaining cycle detected for promise!&apos;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 根据规范2.32以及2.33 对对象或者函数尝试展开</span><br><span class="line">    // 保证S6之前的 polyfill 也能和ES6的原生promise混用</span><br><span class="line">    if (value !== null &amp;&amp;</span><br><span class="line">      (typeof value === &apos;object&apos; || typeof value === &apos;function&apos;)) &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">      // 这里记录这次then的值同时要被try包裹</span><br><span class="line">      // 主要原因是 then 可能是一个getter, 也也就是说</span><br><span class="line">      //   1. value.then可能报错</span><br><span class="line">      //   2. value.then可能产生副作用(例如多次执行可能结果不同)</span><br><span class="line">        var then = value.then</span><br><span class="line"></span><br><span class="line">        // 另一方面, 由于无法保证 then 确实会像预期的那样只调用一个onFullfilled / onRejected</span><br><span class="line">        // 所以增加了一个flag来防止resolveOrReject被多次调用</span><br><span class="line">        var thenAlreadyCalledOrThrow = false</span><br><span class="line">        if (typeof then === &apos;function&apos;) &#123;</span><br><span class="line">        // 是thenable 那么尝试展开</span><br><span class="line">        // 并且在该thenable状态改变之前this对象的状态不变</span><br><span class="line">          then.bind(value)(</span><br><span class="line">          // onFullfilled</span><br><span class="line">            function (value2) &#123;</span><br><span class="line">              if (thenAlreadyCalledOrThrow) return</span><br><span class="line">              thenAlreadyCalledOrThrow = true</span><br><span class="line">              tryToResolve.bind(this, value2)()</span><br><span class="line">            &#125;.bind(this),</span><br><span class="line"></span><br><span class="line">            // onRejected</span><br><span class="line">            function (reason2) &#123;</span><br><span class="line">              if (thenAlreadyCalledOrThrow) return</span><br><span class="line">              thenAlreadyCalledOrThrow = true</span><br><span class="line">              resolveOrReject.bind(this, &apos;rejected&apos;, reason2)()</span><br><span class="line">            &#125;.bind(this)</span><br><span class="line">          )</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">        // 拥有then 但是then不是一个函数 所以也不是thenable</span><br><span class="line">          resolveOrReject.bind(this, &apos;resolved&apos;, value)()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; catch (e) &#123;</span><br><span class="line">        if (thenAlreadyCalledOrThrow) return</span><br><span class="line">        thenAlreadyCalledOrThrow = true</span><br><span class="line">        resolveOrReject.bind(this, &apos;rejected&apos;, e)()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">    // 基本类型 直接返回</span><br><span class="line">      resolveOrReject.bind(this, &apos;resolved&apos;, value)()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function resolveOrReject (status, data) &#123;</span><br><span class="line">    if (this.status !== &apos;pending&apos;) return</span><br><span class="line">    this.status = status</span><br><span class="line">    this.data = data</span><br><span class="line">    if (status === &apos;resolved&apos;) &#123;</span><br><span class="line">      for (var i = 0; i &lt; this.resolveList.length; ++i) &#123;</span><br><span class="line">        this.resolveList[i]()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      for (i = 0; i &lt; this.rejectList.length; ++i) &#123;</span><br><span class="line">        this.rejectList[i]()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function Promise (executor) &#123;</span><br><span class="line">    if (!(this instanceof Promise)) &#123;</span><br><span class="line">      throw Error(&apos;Promise can not be called without new !&apos;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (typeof executor !== &apos;function&apos;) &#123;</span><br><span class="line">    // 非标准 但与Chrome谷歌保持一致</span><br><span class="line">      throw TypeError(&apos;Promise resolver &apos; + executor + &apos; is not a function&apos;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    this.status = &apos;pending&apos;</span><br><span class="line">    this.resolveList = []</span><br><span class="line">    this.rejectList = []</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">      executor(tryToResolve.bind(this), resolveOrReject.bind(this, &apos;rejected&apos;))</span><br><span class="line">    &#125; catch (e) &#123;</span><br><span class="line">      resolveOrReject.bind(this, &apos;rejected&apos;, e)()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Promise.prototype.then = function (onFullfilled, onRejected) &#123;</span><br><span class="line">  // 返回值穿透以及错误穿透, 注意错误穿透用的是throw而不是return，否则的话</span><br><span class="line">  // 这个then返回的promise状态将变成resolved即接下来的then中的onFullfilled</span><br><span class="line">  // 会被调用, 然而我们想要调用的是onRejected</span><br><span class="line">    if (typeof onFullfilled !== &apos;function&apos;) &#123;</span><br><span class="line">      onFullfilled = function (data) &#123;</span><br><span class="line">        return data</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (typeof onRejected !== &apos;function&apos;) &#123;</span><br><span class="line">      onRejected = function (reason) &#123;</span><br><span class="line">        throw reason</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var executor = function (resolve, reject) &#123;</span><br><span class="line">      setTimeout(function () &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">        // 拿到对应的handle函数处理this.data</span><br><span class="line">        // 并以此为依据解析这个新的Promise</span><br><span class="line">          var value = this.status === &apos;resolved&apos;</span><br><span class="line">            ? onFullfilled(this.data)</span><br><span class="line">            : onRejected(this.data)</span><br><span class="line">          resolve(value)</span><br><span class="line">        &#125; catch (e) &#123;</span><br><span class="line">          reject(e)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;.bind(this))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // then 接受两个函数返回一个新的Promise</span><br><span class="line">    // then 自身的执行永远异步与onFullfilled/onRejected的执行</span><br><span class="line">    if (this.status !== &apos;pending&apos;) &#123;</span><br><span class="line">      return new Promise(executor.bind(this))</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">    // pending</span><br><span class="line">      return new Promise(function (resolve, reject) &#123;</span><br><span class="line">        this.resolveList.push(executor.bind(this, resolve, reject))</span><br><span class="line">        this.rejectList.push(executor.bind(this, resolve, reject))</span><br><span class="line">      &#125;.bind(this))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // for prmise A+ test</span><br><span class="line">  Promise.deferred = Promise.defer = function () &#123;</span><br><span class="line">    var dfd = &#123;&#125;</span><br><span class="line">    dfd.promise = new Promise(function (resolve, reject) &#123;</span><br><span class="line">      dfd.resolve = resolve</span><br><span class="line">      dfd.reject = reject</span><br><span class="line">    &#125;)</span><br><span class="line">    return dfd</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // for prmise A+ test</span><br><span class="line">  if (typeof module !== &apos;undefined&apos;) &#123;</span><br><span class="line">    module.exports = Promise</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return Promise</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">PromisePolyfill.all = function (promises) &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    const result = []</span><br><span class="line">    let cnt = 0</span><br><span class="line">    for (let i = 0; i &lt; promises.length; ++i) &#123;</span><br><span class="line">      promises[i].then(value =&gt; &#123;</span><br><span class="line">        cnt++</span><br><span class="line">        result[i] = value</span><br><span class="line">        if (cnt === promises.length) resolve(result)</span><br><span class="line">      &#125;, reject)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PromisePolyfill.race = function (promises) &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    for (let i = 0; i &lt; promises.length; ++i) &#123;</span><br><span class="line">      promises[i].then(resolve, reject)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="解析-URL-Params-为对象"><a href="#解析-URL-Params-为对象" class="headerlink" title="解析 URL Params 为对象"></a>解析 URL Params 为对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">let url = &apos;http://www.domain.com/?user=anonymous&amp;id=123&amp;id=456&amp;city=%E5%8C%97%E4%BA%AC&amp;enabled&apos;;</span><br><span class="line">parseParam(url)</span><br><span class="line">/* 结果</span><br><span class="line">&#123; user: &apos;anonymous&apos;,</span><br><span class="line">  id: [ 123, 456 ], // 重复出现的 key 要组装成数组，能被转成数字的就转成数字类型</span><br><span class="line">  city: &apos;北京&apos;, // 中文需解码</span><br><span class="line">  enabled: true, // 未指定值得 key 约定为 true</span><br><span class="line">&#125;</span><br><span class="line">*/</span><br><span class="line">function parseParam(url) &#123;</span><br><span class="line">  const paramsStr = /.+\?(.+)$/.exec(url)[1]; // 将 ? 后面的字符串取出来</span><br><span class="line">  const paramsArr = paramsStr.split(&apos;&amp;&apos;); // 将字符串以 &amp; 分割后存到数组中</span><br><span class="line">  let paramsObj = &#123;&#125;;</span><br><span class="line">  // 将 params 存到对象中</span><br><span class="line">  paramsArr.forEach(param =&gt; &#123;</span><br><span class="line">    if (/=/.test(param)) &#123; // 处理有 value 的参数</span><br><span class="line">      let [key, val] = param.split(&apos;=&apos;); // 分割 key 和 value</span><br><span class="line">      val = decodeURIComponent(val); // 解码</span><br><span class="line">      val = /^\d+$/.test(val) ? parseFloat(val) : val; // 判断是否转为数字</span><br><span class="line"></span><br><span class="line">      if (paramsObj.hasOwnProperty(key)) &#123; // 如果对象有 key，则添加一个值</span><br><span class="line">        paramsObj[key] = [].concat(paramsObj[key], val);</span><br><span class="line">      &#125; else &#123; // 如果对象没有这个 key，创建 key 并设置值</span><br><span class="line">        paramsObj[key] = val;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123; // 处理没有 value 的参数</span><br><span class="line">      paramsObj[param] = true;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  return paramsObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="模板引擎实现"><a href="#模板引擎实现" class="headerlink" title="模板引擎实现"></a>模板引擎实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let template = &apos;我是&#123;&#123;name&#125;&#125;，年龄&#123;&#123;age&#125;&#125;，性别&#123;&#123;sex&#125;&#125;&apos;;</span><br><span class="line">let data = &#123;</span><br><span class="line">  name: &apos;姓名&apos;,</span><br><span class="line">  age: 18</span><br><span class="line">&#125;</span><br><span class="line">render(template, data); // 我是姓名，年龄18，性别undefined</span><br><span class="line">function render(template, data) &#123;</span><br><span class="line">  const reg = /\&#123;\&#123;(\w+)\&#125;\&#125;/; // 模板字符串正则</span><br><span class="line">  if (reg.test(template)) &#123; // 判断模板里是否有模板字符串</span><br><span class="line">    const name = reg.exec(template)[1]; // 查找当前模板里第一个模板字符串的字段</span><br><span class="line">    template = template.replace(reg, data[name]); // 将第一个模板字符串渲染</span><br><span class="line">    return render(template, data); // 递归的渲染并返回渲染后的结构</span><br><span class="line">  &#125;</span><br><span class="line">  return template; // 如果模板没有模板字符串直接返回</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="转化为驼峰命名"><a href="#转化为驼峰命名" class="headerlink" title="转化为驼峰命名"></a>转化为驼峰命名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var s1 = &quot;get-element-by-id&quot;</span><br><span class="line"></span><br><span class="line">// 转化为 getElementById</span><br><span class="line">var f = function(s) &#123;</span><br><span class="line">    return s.replace(/-\w/g, function(x) &#123;</span><br><span class="line">        return x.slice(1).toUpperCase();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="查找字符串中出现最多的字符和个数"><a href="#查找字符串中出现最多的字符和个数" class="headerlink" title="查找字符串中出现最多的字符和个数"></a>查找字符串中出现最多的字符和个数</h3><p>例: abbcccddddd -&gt; 字符最多的是d，出现了5次</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">let str = &quot;abcabcabcbbccccc&quot;;</span><br><span class="line">let num = 0;</span><br><span class="line">let char = &apos;&apos;;</span><br><span class="line"></span><br><span class="line"> // 使其按照一定的次序排列</span><br><span class="line">str = str.split(&apos;&apos;).sort().join(&apos;&apos;);</span><br><span class="line">// &quot;aaabbbbbcccccccc&quot;</span><br><span class="line"></span><br><span class="line">// 定义正则表达式</span><br><span class="line">let re = /(\w)\1+/g;</span><br><span class="line">str.replace(re,($0,$1) =&gt; &#123;</span><br><span class="line">    if(num &lt; $0.length)&#123;</span><br><span class="line">        num = $0.length;</span><br><span class="line">        char = $1;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">console.log(`字符最多的是$&#123;char&#125;，出现了$&#123;num&#125;次`);</span><br></pre></td></tr></table></figure>

<h3 id="字符串查找"><a href="#字符串查找" class="headerlink" title="字符串查找"></a>字符串查找</h3><p>请使用最基本的遍历来实现判断字符串 a 是否被包含在字符串 b 中，并返回第一次出现的位置（找不到返回 -1）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">a=&apos;34&apos;;b=&apos;1234567&apos;; // 返回 2</span><br><span class="line">a=&apos;35&apos;;b=&apos;1234567&apos;; // 返回 -1</span><br><span class="line">a=&apos;355&apos;;b=&apos;12354355&apos;; // 返回 5</span><br><span class="line">isContain(a,b);</span><br><span class="line">function isContain(a, b) &#123;</span><br><span class="line">  for (let i in b) &#123;</span><br><span class="line">    if (a[0] === b[i]) &#123;</span><br><span class="line">      let tmp = true;</span><br><span class="line">      for (let j in a) &#123;</span><br><span class="line">        if (a[j] !== b[~~i + ~~j]) &#123;</span><br><span class="line">          tmp = false;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      if (tmp) &#123;</span><br><span class="line">        return i;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return -1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现千位分隔符"><a href="#实现千位分隔符" class="headerlink" title="实现千位分隔符"></a>实现千位分隔符</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 保留三位小数</span><br><span class="line">parseToMoney(1234.56); // return &apos;1,234.56&apos;</span><br><span class="line">parseToMoney(123456789); // return &apos;123,456,789&apos;</span><br><span class="line">parseToMoney(1087654.321); // return &apos;1,087,654.321&apos;</span><br><span class="line">function parseToMoney(num) &#123;</span><br><span class="line">  num = parseFloat(num.toFixed(3));</span><br><span class="line">  let [integer, decimal] = String.prototype.split.call(num, &apos;.&apos;);</span><br><span class="line">  integer = integer.replace(/\d(?=(\d&#123;3&#125;)+$)/g, &apos;$&amp;,&apos;);</span><br><span class="line">  return integer + &apos;.&apos; + (decimal ? decimal : &apos;&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>正则表达式(运用了正则的前向声明和反前向声明):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function parseToMoney(str)&#123;</span><br><span class="line">    // 仅仅对位置进行匹配</span><br><span class="line">    let re = /(?=(?!\b)(\d&#123;3&#125;)+$)/g; </span><br><span class="line">   return str.replace(re,&apos;,&apos;); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h2><h3 id="箭头函数问题"><a href="#箭头函数问题" class="headerlink" title="箭头函数问题"></a>箭头函数问题</h3><p>答案：</p>
<p>第 1 题</p>
<p>在使用=&gt;定义函数的时候，this 的指向是定义时所在的对象，而不是使用时所在的对象；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.type = <span class="string">"animal"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  say(val) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//window</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.type + <span class="string">" says "</span> + val);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> animal = <span class="keyword">new</span> Animal();</span><br><span class="line">animal.say(<span class="string">"hi"</span>); <span class="comment">//undefined says hi</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.type = <span class="string">"animal"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  say(val) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//Animal</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.type + <span class="string">" says "</span> + val);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> animal = <span class="keyword">new</span> Animal();</span><br><span class="line">animal.say(<span class="string">"hi"</span>); <span class="comment">//animal says hi</span></span><br></pre></td></tr></table></figure>

<p>第二题：</p>
<p>箭头函数里面根本没有自己的 this，而是引用外层的 this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"id:"</span>, <span class="keyword">this</span>.id);</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 转成ES5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"id:"</span>, _this.id);</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="this-面试题"><a href="#this-面试题" class="headerlink" title="this 面试题"></a>this 面试题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">this指向了谁？</span><br><span class="line">看函数在执行的时候是如何调用的，</span><br><span class="line">1 如果这个函数是用普通函数调用模式来进行调用，它内部的this指向了window</span><br><span class="line">2如果一个函数在调用的时候是通过对象方法模式来进行调用，则它内部的this就是我们的对象</span><br><span class="line">3 如果一个函数在调用的时候通过构造函数模式调用，则它内部的this指向了生成的实例</span><br><span class="line">4 如果这个函数是通过方法借用模式调用，则这个函数内部的this就是我们手动指定this。</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第1题</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">Fn(); <span class="comment">//window 普通函数调用模式</span></span><br><span class="line"><span class="keyword">new</span> Fn(); <span class="comment">//&#123;&#125;  构造函数调用模式</span></span><br><span class="line">Fn.apply(Fn); <span class="comment">// Fn的函数体   方法借用模式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第2题</span></span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  f: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="number">2</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.__proto__ === o[<span class="number">2</span>].prototype);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">o.f(); <span class="comment">//o   对象调用模式</span></span><br><span class="line">o[<span class="number">2</span>](); <span class="comment">//o  对象调用模式</span></span><br><span class="line"><span class="keyword">new</span> o[<span class="number">2</span>](); <span class="comment">//存疑，存在着优先级的问题 &#123;&#125;  通过构造函数模式进行调用</span></span><br><span class="line">o.f.call([<span class="number">1</span>, <span class="number">2</span>]); <span class="comment">//[1,2]   call方法进行方法借用。</span></span><br><span class="line">o[<span class="number">2</span>].call([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// [1,2,3,4]  call方法进行方法借用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第3题</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"out"</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">"in"</span>,</span><br><span class="line">  prop: &#123;</span><br><span class="line">    name: <span class="string">"inside"</span>,</span><br><span class="line">    getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj.prop.getName()); <span class="comment">//对象调用模式来进行调用  obj.prop.name  'inside'</span></span><br><span class="line"><span class="keyword">var</span> test = obj.prop.getName; <span class="comment">// 把test这个变量指向了obj.prop.getName所在的内存地址。</span></span><br><span class="line"><span class="built_in">console</span>.log(test()); <span class="comment">//普通函数模式来进行调用  window 'out'</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.prop.getName.apply(<span class="built_in">window</span>)); <span class="comment">//方法借用模式  'out'</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.prop.getName.apply(<span class="keyword">this</span>)); <span class="comment">//方法借用模式  'out'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span> === <span class="built_in">window</span>); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第4题</span></span><br><span class="line"><span class="keyword">var</span> length = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  length: <span class="number">5</span>,</span><br><span class="line">  method: <span class="function"><span class="keyword">function</span>(<span class="params">f</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    f(); <span class="comment">// f在调用的时候是什么调用模式？普通函数调用模式  window.length  10</span></span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>](); <span class="comment">// 通过什么模式来进行调用的。执行之前有[]和.就是对象调用模式。</span></span><br><span class="line">    <span class="comment">//arguments是一个类数组，也就是一个对象，就是通过arguments来进行调用的</span></span><br><span class="line">    <span class="comment">//arguments.length实参的数量。实参长度是1</span></span><br><span class="line">    <span class="comment">//通过arguments对象进行调用，因此函数内部的this是  arguments</span></span><br><span class="line">    <span class="comment">// 如果一个函数在调用的时候它前面有call和apply那么就肯定是方法借用模式调用</span></span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>].call(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">// 调用method方法是通过obj.method 因此在这里的this就是 obj</span></span><br><span class="line">    <span class="comment">//通过call方法把fn内的this指向了obj</span></span><br><span class="line">    <span class="comment">// 输出obj.length  5</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.method(fn);</span><br><span class="line"></span><br><span class="line"><span class="comment">//第5题</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">Foo.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;;</span><br><span class="line">Foo.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//请写出以下输出结果：</span></span><br><span class="line">Foo.getName(); <span class="comment">//2</span></span><br><span class="line">getName(); <span class="comment">//4</span></span><br><span class="line">Foo().getName(); <span class="comment">//1</span></span><br><span class="line">getName(); <span class="comment">//1</span></span><br><span class="line"><span class="keyword">new</span> Foo.getName(); <span class="comment">//2</span></span><br><span class="line"><span class="keyword">new</span> Foo().getName(); <span class="comment">//3</span></span><br><span class="line"><span class="keyword">new</span> <span class="keyword">new</span> Foo().getName(); <span class="comment">//3</span></span><br><span class="line"><span class="comment">// new Foo()创建了一个构造函数，然后这个函数再去访问getName这个函数，</span></span><br><span class="line"><span class="comment">//对它进行调用</span></span><br><span class="line"><span class="comment">/*console.log(new Foo().getName)*/</span></span><br><span class="line"><span class="comment">/*var o = new new Foo().getName(); //</span></span><br><span class="line"><span class="comment">    console.log(o.__proto__===Foo.prototype.getName.prototype)*/</span></span><br><span class="line"><span class="comment">//用new Foo创建出来了一个实例，然后这个实例去访问 (new Foo().getName)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*console.log(new new Foo().getName())</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    console.log(new Foo().getName())*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*function Foo() &#123;</span></span><br><span class="line"><span class="comment">        getName = function () &#123;</span></span><br><span class="line"><span class="comment">            console.log(1);</span></span><br><span class="line"><span class="comment">        &#125;;</span></span><br><span class="line"><span class="comment">        return this;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    var getName;</span></span><br><span class="line"><span class="comment">    Foo.getName = function () &#123;</span></span><br><span class="line"><span class="comment">        console.log(2);</span></span><br><span class="line"><span class="comment">    &#125;;</span></span><br><span class="line"><span class="comment">    Foo.prototype.getName = function () &#123;</span></span><br><span class="line"><span class="comment">        console.log(3);</span></span><br><span class="line"><span class="comment">    &#125;;</span></span><br><span class="line"><span class="comment">    getName = function () &#123;</span></span><br><span class="line"><span class="comment">        console.log(4);</span></span><br><span class="line"><span class="comment">    &#125;;</span></span><br><span class="line"><span class="comment">    //请写出以下输出结果：</span></span><br><span class="line"><span class="comment">    Foo.getName();// 2</span></span><br><span class="line"><span class="comment">    getName();//4</span></span><br><span class="line"><span class="comment">/!*    Foo().getName();//!*!/</span></span><br><span class="line"><span class="comment">    window.getName()//1</span></span><br><span class="line"><span class="comment">    getName();//1</span></span><br><span class="line"><span class="comment">  /!*  var o = new Foo.getName();//2</span></span><br><span class="line"><span class="comment">    console.log(o);// &#123;&#125;</span></span><br><span class="line"><span class="comment">    console.log(o.__proto__===Foo.getName.prototype)//true*!/</span></span><br><span class="line"><span class="comment">    new Foo.getName();// 2</span></span><br><span class="line"><span class="comment">    new Foo().getName();//</span></span><br><span class="line"><span class="comment">    new new Foo().getName();*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第6题</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  fn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.fn(); <span class="comment">//obj</span></span><br><span class="line"><span class="keyword">var</span> f = obj.fn;</span><br><span class="line">f(); <span class="comment">//window</span></span><br><span class="line"><span class="built_in">console</span>.log(f === obj.fn); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// f和obj.fn是同一个函数，但是他们在调用的时候使用的函数调用模式不同，因此，它们内部的this指向也就不同。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// #7题</span></span><br><span class="line"><span class="keyword">var</span> arr = [</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line">arr[<span class="number">0</span>](); <span class="comment">//数组本身</span></span><br><span class="line"><span class="comment">//数组也是一个复杂数据类型，也是一个对象，那用数组去调用函数，使用的模式就是对象方法调用模式。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>); <span class="comment">// 类数组，也是就一个对象    [0:function f()&#123;&#125;]</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// window</span></span><br><span class="line">  <span class="built_in">arguments</span>[<span class="number">0</span>]();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]); <span class="comment">//内部的this就是arguments</span></span><br><span class="line">  <span class="comment">// 通过arguments对f这个方法进行调用，使用的是对象方法调用模式。</span></span><br><span class="line">&#125;</span><br><span class="line">fn(f);</span><br><span class="line"></span><br><span class="line"><span class="comment">// #8题</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperClass</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"women"</span>;</span><br><span class="line">  <span class="keyword">this</span>.bra = [<span class="string">"a"</span>, <span class="string">"b"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperClass.prototype.sayWhat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"hello"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubClass</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.subname = <span class="string">"you sister"</span>;</span><br><span class="line">  SuperClass.call(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sub = <span class="keyword">new</span> SubClass();</span><br><span class="line"><span class="built_in">console</span>.log(sub.sayWhat());</span><br></pre></td></tr></table></figure>

<h3 id="把以下代码使用两种方法，依次输出-0-9"><a href="#把以下代码使用两种方法，依次输出-0-9" class="headerlink" title="把以下代码使用两种方法，依次输出 0-9"></a>把以下代码使用两种方法，依次输出 0-9</h3><p>答案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> funcs = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  funcs.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">funcs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  func(); <span class="comment">//输出十个10</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>解决办法：</p>
<p>方法一：使用立即执行函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> funcs = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  funcs.push(</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(value);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)(i)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line">funcs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  func(); <span class="comment">//依次输出0-9</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>方法二：使用闭包</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> funcs = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  funcs.push(show(i));</span><br><span class="line">&#125;</span><br><span class="line">funcs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  func(); <span class="comment">//0 1 2 3 4 5 6 7 8 9</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>方法三：使用 let</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> funcs = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  funcs.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">funcs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  func(); <span class="comment">//依次输出0-9</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="怎么解决回调函数里面回调另一个函数，另一个函数的参数需要依赖这个回调函数。需要被解决的代码如下："><a href="#怎么解决回调函数里面回调另一个函数，另一个函数的参数需要依赖这个回调函数。需要被解决的代码如下：" class="headerlink" title="怎么解决回调函数里面回调另一个函数，另一个函数的参数需要依赖这个回调函数。需要被解决的代码如下："></a>怎么解决回调函数里面回调另一个函数，另一个函数的参数需要依赖这个回调函数。需要被解决的代码如下：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$http.get(url).success(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (success != <span class="literal">undefined</span>) &#123;</span><br><span class="line">    success(res);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).error(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error != <span class="literal">undefined</span>) &#123;</span><br><span class="line">    error(res);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>（ data.id != <span class="number">0</span>） &#123;</span><br><span class="line">    <span class="keyword">var</span> url = <span class="string">"getdata/data?id="</span> + data.id + <span class="string">""</span>;</span><br><span class="line">    $http.get(url).success(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">      showData(res);</span><br><span class="line">    &#125;).error(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (error != <span class="literal">undefined</span>) &#123;</span><br><span class="line">        error(res);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>答案：使用 Promise/async/await 解决</p>
<p>解析：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">awaitMethod</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="number">2</span> * num); <span class="comment">// 此处模拟接口的请求</span></span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打个比方，await是学生，async是校车，必须等人齐了再开车</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">await</span> awaitMethod(<span class="number">30</span>); <span class="comment">// await 这个关键字只能在使用async定义的函数里面使用</span></span><br><span class="line">  <span class="built_in">console</span>.log(result); <span class="comment">// 2秒钟之后控制台输出60 ; 后面利用 result 继续调用函数</span></span><br><span class="line">  <span class="keyword">let</span> next = <span class="keyword">await</span> awaitMethod(result);</span><br><span class="line">  <span class="built_in">console</span>.log(next); <span class="comment">// 4秒钟之后控制台输出120</span></span><br><span class="line">  <span class="keyword">return</span> next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 在async里，必须要将结果return回来，不然的话.then .catch获取不到值</span></span><br><span class="line">test()</span><br><span class="line">  .then(<span class="function"><span class="params">success</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">"成功"</span>, success))</span><br><span class="line">  .catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">"失败"</span>, error));</span><br></pre></td></tr></table></figure>

<h3 id="jQuery-的-ajax-返回的是-promise-对象吗？"><a href="#jQuery-的-ajax-返回的是-promise-对象吗？" class="headerlink" title="jQuery 的 ajax 返回的是 promise 对象吗？"></a>jQuery 的 ajax 返回的是 promise 对象吗？</h3><p>jquery 的 ajax 返回的是 deferred 对象，通过 promise 的 resolve()方法将其转换为 promise 对象。</p>
<p>var jsPromise = Promise.resolve($.ajax(‘/whatever.json’));</p>
<h3 id="promise-只有-2-个状态，成功和失败，怎么让一个函数无论成功还是失败都能被调用？"><a href="#promise-只有-2-个状态，成功和失败，怎么让一个函数无论成功还是失败都能被调用？" class="headerlink" title="promise 只有 2 个状态，成功和失败，怎么让一个函数无论成功还是失败都能被调用？"></a>promise 只有 2 个状态，成功和失败，怎么让一个函数无论成功还是失败都能被调用？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">使用promise.all()</span><br><span class="line"></span><br><span class="line">Promise.all方法用于将多个Promise实例，包装成一个新的Promise实例。</span><br><span class="line"></span><br><span class="line">Promise.all方法接受一个数组作为参数，数组里的元素都是Promise对象的实例，如果不是，就会先调用下面讲到的Promise.resolve方法，将参数转为Promise实例，再进一步处理。（Promise.all方法的参数可以不是数组，但必须具有Iterator接口，且返回的每个成员都是Promise实例。）</span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">var p =Promise.all([p1,p2,p3]);</span><br><span class="line">p的状态由p1、p2、p3决定，分为两种情况。</span><br><span class="line">当该数组里的所有Promise实例都进入Fulfilled状态：Promise.all**返回的实例才会变成Fulfilled状态。并将Promise实例数组的所有返回值组成一个数组，传递给Promise.all返回实例的回调函数**。</span><br><span class="line"></span><br><span class="line">当该数组里的某个Promise实例都进入Rejected状态：Promise.all返回的实例会立即变成Rejected状态。并将第一个rejected的实例返回值传递给Promise.all返回实例的回调函数。</span><br></pre></td></tr></table></figure>

<h3 id="以下代码依次输出的内容是？"><a href="#以下代码依次输出的内容是？" class="headerlink" title="以下代码依次输出的内容是？"></a>以下代码依次输出的内容是？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> <span class="title">executor</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">    i == <span class="number">9999</span> &amp;&amp; resolve();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<p>答案：打印顺序 2 3 5 4 1</p>
<p>解析：</p>
<p>首先先碰到一个 setTimeout，于是会先设置一个定时，在定时结束后将传递这个函数放到任务队列里面，因此开始肯定不会输出 1 。</p>
<p>然后是一个 Promise，里面的函数是直接执行的，因此应该直接输出 2 3 。</p>
<p>然后，Promise 的 then 应当会放到当前 tick 的最后，但是还是在当前 tick 中。</p>
<p>因此，应当先输出 5，然后再输出 4 ， 最后在到下一个 tick，就是 1 。</p>
<p><a href="https://juejin.im/post/5b1ffff96fb9a01e345ba704" target="_blank" rel="noopener">参考</a></p>
<h3 id="Promise-编程题"><a href="#Promise-编程题" class="headerlink" title="Promise 编程题"></a>Promise 编程题</h3><p>答案：</p>
<p>第 1 题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  resolve();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">运行结果及原因</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">1 2 4 3</span><br><span class="line"></span><br><span class="line">原因：</span><br><span class="line">Promise 构造函数是同步执行的，promise.then 中的函数是异步执行的。</span><br></pre></td></tr></table></figure>

<p>第 2 题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">"success"</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = promise1.then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"error!!!"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"promise1"</span>, promise1);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"promise2"</span>, promise2);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"promise1"</span>, promise1);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"promise2"</span>, promise2);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>

<p>运行结果及原因</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">运行结果：</span><br><span class="line">promise1 Promise &#123; &lt;pending&gt; &#125;</span><br><span class="line">promise2 Promise &#123; &lt;pending&gt; &#125;</span><br><span class="line">Uncaught (in promise) Error: error!!!</span><br><span class="line">promise1 Promise &#123; &apos;success&apos; &#125;</span><br><span class="line">promise2 Promise &#123;</span><br><span class="line">  &lt;rejected&gt; Error: error!!!</span><br><span class="line">    at promise.then (...)</span><br><span class="line">    at &lt;anonymous&gt; &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">原因：</span><br><span class="line">promise 有 3 种状态：pending（进行中）、fulfilled（已完成，又称为Resolved） 或 rejected（已失败）。状态改变只能是 pending-&gt;fulfilled 或者 pending-&gt;rejected，状态一旦改变则不能再变。上面 promise2 并不是 promise1，而是返回的一个新的 Promise 实例。</span><br></pre></td></tr></table></figure>

<p>第 3 题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">"success1"</span>);</span><br><span class="line">  reject(<span class="string">"error"</span>);</span><br><span class="line">  resolve(<span class="string">"success2"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"then: "</span>, res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"catch: "</span>, err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">运行结果及原因</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">then：success1</span><br><span class="line"></span><br><span class="line">原因：</span><br><span class="line">构造函数中的 resolve 或 reject 只有第一次执行有效，多次调用没有任何作用，呼应代码二结论：promise 状态一旦改变则不能再变。</span><br></pre></td></tr></table></figure>

<p>第 4 题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve(<span class="number">1</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res); <span class="comment">// 打印1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res); <span class="comment">// 打印2</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>运行结果：<br>1 2</p>
<p>原因：<br>promise 可以链式调用。提起链式调用我们通常会想到通过 return this 实现，不过 Promise 并不是这样实现的。promise 每次调用 .then 或者 .catch 都会返回一个新的 promise，从而实现了链式调用。</p>
<p>第 5 题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve()</span><br><span class="line">  .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"error!!!"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"then: "</span>, res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"catch: "</span>, err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">运行结果</span><br><span class="line">then: Error: error!!!</span><br><span class="line">    at Promise.resolve.then (...)</span><br><span class="line">    at ...</span><br><span class="line"></span><br><span class="line">原因</span><br><span class="line">.then 或者 .catch 中 return 一个 error 对象并不会抛出错误，所以不会被后续的 .catch 捕获，需要改成其中一种：</span><br><span class="line">return Promise.reject(new Error(&apos;error!!!&apos;))</span><br><span class="line">throw new Error(&apos;error!!!&apos;)</span><br><span class="line"></span><br><span class="line">因为返回任意一个非 promise 的值都会被包裹成 promise 对象，即 return new Error(&apos;error!!!&apos;) 等价于 return Promise.resolve(new Error(&apos;error!!!&apos;))。</span><br></pre></td></tr></table></figure>

<p>第 6 题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"once"</span>);</span><br><span class="line">    resolve(<span class="string">"success"</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> start = <span class="built_in">Date</span>.now();</span><br><span class="line">promise.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res, <span class="built_in">Date</span>.now() - start);</span><br><span class="line">&#125;);</span><br><span class="line">promise.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res, <span class="built_in">Date</span>.now() - start);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">运行结果：</span><br><span class="line">once</span><br><span class="line">success 1001</span><br><span class="line">success 1001</span><br><span class="line">注：1001不是准确数值，也可能是998、999、1000、1002 等</span><br><span class="line"></span><br><span class="line">原因：</span><br><span class="line">promise 的 .then 或者 .catch 可以被调用多次，但这里 Promise 构造函数只执行一次。或者说 promise 内部状态一经改变，并且有了一个值，那么后续每次调用 .then 或者 .catch 都会直接拿到该值。</span><br></pre></td></tr></table></figure>

<p>第 7 题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> promise;</span><br><span class="line">&#125;);</span><br><span class="line">promise.catch(<span class="built_in">console</span>.error);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">运行结果</span><br><span class="line">TypeError: Chaining cycle detected for promise #&lt;Promise&gt;...</span><br><span class="line"></span><br><span class="line">原因</span><br><span class="line">.then 或 .catch 返回的值不能是 promise 本身，否则会造成死循环。</span><br></pre></td></tr></table></figure>

<p>第 8 题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve(<span class="number">1</span>)</span><br><span class="line">  .then(<span class="number">2</span>)</span><br><span class="line">  .then(<span class="built_in">Promise</span>.resolve(<span class="number">3</span>))</span><br><span class="line">  .then(<span class="built_in">console</span>.log);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">运行结果</span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">原因</span><br><span class="line">.then 或者 .catch 的参数期望是函数，传入非函数则会发生值穿透。</span><br></pre></td></tr></table></figure>

<p>第 9 题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve()</span><br><span class="line">  .then(</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"error"</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fail1</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.error(<span class="string">"fail1: "</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> <span class="title">fail2</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">"fail2: "</span>, e);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">运行结果</span><br><span class="line">fail2: Error: error</span><br><span class="line">    at success (...)</span><br><span class="line">    at ...</span><br><span class="line"></span><br><span class="line">原因</span><br><span class="line">.then 可以接收两个参数，第一个是处理成功的函数，第二个是处理错误的函数。.catch 是 .then 第二个参数的简便写法，但是它们用法上有一点需要注意：.then 的第二个处理错误的函数捕获不了第一个处理成功的函数抛出的错误，而后续的 .catch 可以捕获之前的错误。</span><br></pre></td></tr></table></figure>

<p>第 10 题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">process.nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"nextTick"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"then"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">setImmediate(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"setImmediate"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"end"</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">运行结果</span><br><span class="line">end</span><br><span class="line">nextTick</span><br><span class="line">then</span><br><span class="line">setImmediate</span><br><span class="line"></span><br><span class="line">原因</span><br><span class="line">process.nextTick 和 promise.then 都属于 microtask，而 setImmediate 属于 macrotask，在事件循环的 check 阶段执行。事件循环的每个阶段（macrotask）之间都会执行 microtask，事件循环的开始会先执行一次 microtask。</span><br></pre></td></tr></table></figure>

<h2 id="不常考代码题"><a href="#不常考代码题" class="headerlink" title="不常考代码题"></a>不常考代码题</h2><h3 id="变量提升"><a href="#变量提升" class="headerlink" title="变量提升"></a>变量提升</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(tt);</span><br><span class="line">tt = <span class="string">"dd"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(tt);</span><br><span class="line"><span class="comment">// 变量提升之后的代码：</span></span><br><span class="line"><span class="keyword">var</span> tt;</span><br><span class="line"><span class="built_in">console</span>.log(tt); <span class="comment">//undefined</span></span><br><span class="line">tt = <span class="string">"dd"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(tt); <span class="comment">//'dd'</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="keyword">if</span> (!a) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="comment">// 变量提升之后的代码：</span></span><br><span class="line"><span class="keyword">var</span> a; <span class="comment">//undefined</span></span><br><span class="line"><span class="keyword">if</span> (!a) &#123;</span><br><span class="line">  <span class="comment">//true</span></span><br><span class="line">  a = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<h3 id="函数提升"><a href="#函数提升" class="headerlink" title="函数提升"></a>函数提升</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fn);</span><br><span class="line">fn();</span><br><span class="line"><span class="comment">// 变量提升之后的代码：</span></span><br><span class="line"><span class="keyword">var</span> fn; <span class="comment">//undefined</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fn); <span class="comment">//undefined</span></span><br><span class="line">fn(); <span class="comment">// fn is not a function</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  foo();</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br><span class="line"><span class="comment">// 变量提升之后的代码：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  foo(); <span class="comment">// 没有输出也不会报一个错误，因为foo是一个函数</span></span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(foo);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line">bar();</span><br><span class="line"><span class="comment">// 变量提升之后的代码：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> foo;</span><br><span class="line">  <span class="built_in">console</span>.log(foo); <span class="comment">// undefined</span></span><br><span class="line">  <span class="keyword">return</span>; <span class="comment">// 函数return之后的代码依旧会发生变量提升</span></span><br><span class="line">  foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line">bar();</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4</span></span><br><span class="line"><span class="built_in">console</span>.log(f1);</span><br><span class="line"><span class="built_in">console</span>.log(f2);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> f2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="comment">// 变量提升之后的代码：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">// 函数提升，整个代码块提升到文件的最开始</span></span><br><span class="line"><span class="keyword">var</span> f2;</span><br><span class="line"><span class="built_in">console</span>.log(f1); <span class="comment">// function f1() &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(f2); <span class="comment">// undefined</span></span><br><span class="line">f2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="函数和变量同时提升"><a href="#函数和变量同时提升" class="headerlink" title="函数和变量同时提升"></a>函数和变量同时提升</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(fn);</span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(fn);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fn);</span><br><span class="line"><span class="comment">// 变量提升之后的代码：</span></span><br><span class="line"><span class="keyword">var</span> fn;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fn); <span class="comment">// 2</span></span><br><span class="line">fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(fn); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(fn); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(f1());</span><br><span class="line"><span class="built_in">console</span>.log(f2);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"aa"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="comment">// 变量提升之后的代码：</span></span><br><span class="line"><span class="keyword">var</span> f2</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"aa"</span>); <span class="comment">// "aa"</span></span><br><span class="line">&#125;</span><br><span class="line">f2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(f1()); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(f2); <span class="comment">// ƒ () &#123;&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">  a = <span class="string">"aaa"</span>;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="string">"bbb"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="comment">// 变量提升之后的代码：</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4</span></span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="comment">// 变量提升之后的代码： 函数的提升后的位置是在变量提升后的位置之后的</span></span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// a()</span></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line"><span class="comment">// 变量提升之后的代码：</span></span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="keyword">var</span> b;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// a()</span></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// b()</span></span><br><span class="line">b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 6</span></span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 报错 隐式全局变量不会提升</span></span><br><span class="line">b = <span class="string">"aaa"</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">"bbb"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br></pre></td></tr></table></figure>

<h3 id="你如何获取浏览器-URL-中查询字符串中的参数？"><a href="#你如何获取浏览器-URL-中查询字符串中的参数？" class="headerlink" title="你如何获取浏览器 URL 中查询字符串中的参数？"></a>你如何获取浏览器 URL 中查询字符串中的参数？</h3><p>答案：</p>
<p>方法一：(基础版)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getQueryString</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sHref = <span class="built_in">window</span>.location.href;</span><br><span class="line">  <span class="keyword">var</span> args = sHref.split(<span class="string">"?"</span>);</span><br><span class="line">  <span class="keyword">if</span> (args[<span class="number">0</span>] == sHref) &#123;</span><br><span class="line">    <span class="comment">// 没有参数，直接返回空即可</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> arr = args[<span class="number">1</span>].split(<span class="string">"&amp;"</span>);</span><br><span class="line">  <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> arg = arr[i].split(<span class="string">"="</span>);</span><br><span class="line">    obj[arg[<span class="number">0</span>]] = arg[<span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> href = getQueryString();</span><br><span class="line"><span class="built_in">console</span>.log(href[<span class="string">"categoryId"</span>]);</span><br></pre></td></tr></table></figure>

<p>方法二：(正则版,URL 存在#则不适用)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getQueryString</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span> + name + <span class="string">"=([^&amp;]*)(&amp;|$)"</span>);</span><br><span class="line">  <span class="keyword">var</span> r = <span class="built_in">window</span>.location.search.substr(<span class="number">1</span>).match(reg);</span><br><span class="line">  <span class="keyword">if</span> (r != <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">unescape</span>(r[<span class="number">2</span>]);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getQueryString(<span class="string">"categoryId"</span>));</span><br></pre></td></tr></table></figure>

<p>方法三：(正则升级版)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getQueryString</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 未传参，返回空</span></span><br><span class="line">  <span class="keyword">if</span> (!name) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="comment">// 查询参数：先通过search取值，如果取不到就通过hash来取</span></span><br><span class="line">  <span class="keyword">var</span> after = <span class="built_in">window</span>.location.search;</span><br><span class="line">  after = after.substr(<span class="number">1</span>) || <span class="built_in">window</span>.location.hash.split(<span class="string">"?"</span>)[<span class="number">1</span>];</span><br><span class="line">  <span class="comment">// 地址栏URL没有查询参数，返回空</span></span><br><span class="line">  <span class="keyword">if</span> (!after) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="comment">// 如果查询参数中没有"name"，返回空</span></span><br><span class="line">  <span class="keyword">if</span> (after.indexOf(name) === <span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span> + name + <span class="string">"=([^&amp;]*)(&amp;|$)"</span>);</span><br><span class="line">  <span class="comment">// 当地址栏参数存在中文时，需要解码，不然会乱码</span></span><br><span class="line">  <span class="keyword">var</span> r = <span class="built_in">decodeURI</span>(after).match(reg);</span><br><span class="line">  <span class="comment">// 如果url中"name"没有值，返回空</span></span><br><span class="line">  <span class="keyword">if</span> (!r) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> r[<span class="number">2</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getQueryString(<span class="string">"categoryId"</span>));</span><br></pre></td></tr></table></figure>

<h3 id="js-实现一个打点计时器"><a href="#js-实现一个打点计时器" class="headerlink" title="js 实现一个打点计时器"></a>js 实现一个打点计时器</h3><p>1、从 start 到 end（包含 start 和 end），每隔 100 毫秒 console.log 一个数字，每次数字增幅 1<br>2、返回的对象中需要包含一个 cancel 方法，用于停止定时操作<br>3、第一个数需要立即输出</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现法一（setTimeout()方法）：</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params">start, end</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (start &lt;= end) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(start++);</span><br><span class="line">    st = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      count(start, end);</span><br><span class="line">    &#125;, <span class="number">100</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    cancel: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      clearTimeout(st);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">count(<span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现法二（setInterval()方法）：</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params">start, end</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(start++);</span><br><span class="line">  <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (start &lt;= end) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(start++);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    cancel: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      clearInterval(timer);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">count(<span class="number">1</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure>

<p>知识点：<br>setTimeout()方法用于在指定的毫秒数后调用函数或计算表达式。<br>语法：setTimeout(code, millisec)<br>注意：setTimeout() 只执行 code 一次。如果要多次调用，请使用 setInterval() 或者让 code 自身再次调用 setTimeout()。</p>
<p>setInterval() 方法可按照指定的周期（以毫秒计）来调用函数或计算表达式。<br>语法：setInterval(code ,millisec[,”lang”])<br>setInterval() 方法会不停地调用函数，直到 clearInterval() 被调用或窗口被关闭。由 setInterval() 返回的 ID 值可用作 clearInterval() 方法的参数。</p>
<h3 id="正则表达式，验证手机号码，验证规则：11-位数字，以-1-位开头"><a href="#正则表达式，验证手机号码，验证规则：11-位数字，以-1-位开头" class="headerlink" title="正则表达式，验证手机号码，验证规则：11 位数字，以 1 位开头"></a>正则表达式，验证手机号码，验证规则：11 位数字，以 1 位开头</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">checkphonenumber(number) &#123;</span><br><span class="line">	<span class="keyword">if</span> (number == <span class="literal">null</span> || number.length != <span class="number">11</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">// 移动号段正则表达式</span></span><br><span class="line">		<span class="keyword">var</span> pat1 = <span class="string">'^((13[4-9])|(147)|(15[0-2,7-9])|(178)|(18[2-4,7-8]))\\d&#123;8&#125;|(1705)\\d&#123;7&#125;$'</span>;</span><br><span class="line">		<span class="comment">// 联通号段正则表达式</span></span><br><span class="line">		<span class="keyword">var</span> pat2 = <span class="string">'^((13[0-2])|(145)|(15[5-6])|(176)|(18[5,6]))\\d&#123;8&#125;|(1709)\\d&#123;7&#125;$'</span>;</span><br><span class="line">		<span class="comment">// 电信号段正则表达式</span></span><br><span class="line">		<span class="keyword">var</span> pat3 = <span class="string">'^((133)|(153)|(177)|(18[0,1,9])|(149))\\d&#123;8&#125;$'</span>;</span><br><span class="line">		<span class="comment">// 虚拟运营商正则表达式</span></span><br><span class="line">		<span class="keyword">var</span> pat4 = <span class="string">'^((170))\\d&#123;8&#125;|(1718)|(1719)\\d&#123;7&#125;$'</span>;</span><br><span class="line">		<span class="keyword">if</span> (!part1.test(number)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (!part2.test(number)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (!part3.test(number)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (!part4.test(number)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="请给-Array-本地对象增加一个原型方法，他的用途是删除数组中重复的条目并按升序排序，最后返回新数组。"><a href="#请给-Array-本地对象增加一个原型方法，他的用途是删除数组中重复的条目并按升序排序，最后返回新数组。" class="headerlink" title="请给 Array 本地对象增加一个原型方法，他的用途是删除数组中重复的条目并按升序排序，最后返回新数组。"></a>请给 Array 本地对象增加一个原型方法，他的用途是删除数组中重复的条目并按升序排序，最后返回新数组。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.distinct = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ret = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = i + <span class="number">1</span>; j &lt; <span class="keyword">this</span>.length; ) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>[i] === <span class="keyword">this</span>[j]) &#123;</span><br><span class="line">        ret.push(<span class="keyword">this</span>.splice(j, <span class="number">1</span>)[<span class="number">0</span>]);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        j++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log([<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"b"</span>, <span class="string">"a"</span>, <span class="string">"e"</span>].distinct()); <span class="comment">// ["a", "b"]</span></span><br></pre></td></tr></table></figure>

<h3 id="为字符串扩展一个-rewrite-函数，接收一个正则-pattern-和一个字符串-result-如果该字符串符合-pattern，-则以-result-对结果进行转义输出。"><a href="#为字符串扩展一个-rewrite-函数，接收一个正则-pattern-和一个字符串-result-如果该字符串符合-pattern，-则以-result-对结果进行转义输出。" class="headerlink" title="为字符串扩展一个 rewrite 函数，接收一个正则 pattern 和一个字符串 result,如果该字符串符合 pattern， 则以 result 对结果进行转义输出。"></a>为字符串扩展一个 rewrite 函数，接收一个正则 pattern 和一个字符串 result,如果该字符串符合 pattern， 则以 result 对结果进行转义输出。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"/foo"</span>.rewrite(<span class="regexp">/^\/foo/</span>, <span class="string">"/bar"</span>);</span><br><span class="line"><span class="string">"u1234"</span>.rewrite(<span class="regexp">/^\/u(\d+)/</span>, <span class="string">"/user/$1"</span>);</span><br><span class="line"><span class="string">"/i"</span>.rewrite(<span class="regexp">/^\o/</span>, <span class="string">"/ooo"</span>);</span><br></pre></td></tr></table></figure>

<h3 id="实现一个-js-对象序列化函数，将-js-对象序列化为可反序列化的代码，要求-1-尽量和-json-兼容，2-支持不可序列化的值，如-undefined-NaN-Infinify-Infinity，3-支持特殊对象，如正则、Date-等"><a href="#实现一个-js-对象序列化函数，将-js-对象序列化为可反序列化的代码，要求-1-尽量和-json-兼容，2-支持不可序列化的值，如-undefined-NaN-Infinify-Infinity，3-支持特殊对象，如正则、Date-等" class="headerlink" title="实现一个 js 对象序列化函数，将 js 对象序列化为可反序列化的代码，要求 1.尽量和 json 兼容，2.支持不可序列化的值，如 undefined/NaN/Infinify-Infinity，3. 支持特殊对象，如正则、Date 等"></a>实现一个 js 对象序列化函数，将 js 对象序列化为可反序列化的代码，要求 1.尽量和 json 兼容，2.支持不可序列化的值，如 undefined/NaN/Infinify-Infinity，3. 支持特殊对象，如正则、Date 等</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">serialize(&#123;&#125;);</span><br><span class="line">serialize(&#123; <span class="attr">a</span>: <span class="string">"b"</span> &#125;);</span><br><span class="line">serialize(&#123; <span class="attr">a</span>: <span class="number">0</span> / <span class="number">0</span> &#125;);</span><br><span class="line">serialize(&#123; <span class="attr">a</span>: <span class="regexp">/foo/</span> &#125;);</span><br></pre></td></tr></table></figure>

<p>设计一道 JavaScript 的 range 算法如下：</p>
<p>range(1, 10, 3) 返回 [1, 4, 7, 10];<br>range(‘A’, ‘F’, 2) 返回 [‘A’, ‘C’, ‘E’]<br>// 请使用 JavaScript 语言实现该功能（可以使用 ES6）</p>
<h3 id="头条的视频网站上支持了弹幕，假设一个视频有很多弹幕，弹幕的数据是一个数组，格式定义如下："><a href="#头条的视频网站上支持了弹幕，假设一个视频有很多弹幕，弹幕的数据是一个数组，格式定义如下：" class="headerlink" title="头条的视频网站上支持了弹幕，假设一个视频有很多弹幕，弹幕的数据是一个数组，格式定义如下："></a>头条的视频网站上支持了弹幕，假设一个视频有很多弹幕，弹幕的数据是一个数组，格式定义如下：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        time: Number,</span><br><span class="line">        content: String</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        time: Number,</span><br><span class="line">        content: String</span><br><span class="line">    &#125;...</span><br><span class="line">]</span><br><span class="line">(其中 time 表示时间，content表示弹幕内容)，那么如何快速定位到某个时间点的弹幕，请编码实现（不使用数组的 sort 方法）</span><br></pre></td></tr></table></figure>

<h3 id="尝试实现注释部分的-JavaScript-代码，-可在其他任何地方添加更多代码。"><a href="#尝试实现注释部分的-JavaScript-代码，-可在其他任何地方添加更多代码。" class="headerlink" title="尝试实现注释部分的 JavaScript 代码， 可在其他任何地方添加更多代码。"></a>尝试实现注释部分的 JavaScript 代码， 可在其他任何地方添加更多代码。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var Obj = function(msg) &#123;</span><br><span class="line">    this.msg = msg;</span><br><span class="line">    this.shout = function () &#123;</span><br><span class="line">        alert(this.msg)</span><br><span class="line">    &#125;</span><br><span class="line">    this.waitAndShout = function() &#123;</span><br><span class="line">        // 隔五秒钟后执行上面的 shout 方法</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="请编写一个-JavaScript-函数-parseQuerySting-它的用途是把-URL-参数解析为一个对象"><a href="#请编写一个-JavaScript-函数-parseQuerySting-它的用途是把-URL-参数解析为一个对象" class="headerlink" title="请编写一个 JavaScript 函数 parseQuerySting, 它的用途是把 URL 参数解析为一个对象"></a>请编写一个 JavaScript 函数 parseQuerySting, 它的用途是把 URL 参数解析为一个对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var url = &quot;http://www.58.com/index.aspx?key0=0&amp;key1=1&amp;key2=2...&quot;</span><br><span class="line">var obj = parseQuerySting(url);</span><br><span class="line">alert(obj.key0) // 输出 0</span><br></pre></td></tr></table></figure>

<h3 id="判断一个字符串中出现次数最多的字符，统计这个次数"><a href="#判断一个字符串中出现次数最多的字符，统计这个次数" class="headerlink" title="判断一个字符串中出现次数最多的字符，统计这个次数"></a>判断一个字符串中出现次数最多的字符，统计这个次数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"asdfssaaasasasasaa"</span>;</span><br><span class="line"><span class="keyword">var</span> json = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.length; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!json[str.charAt(i)]) &#123;</span><br><span class="line">    json[str.charAt(i)] = <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    json[str.charAt(i)]++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> iMax = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> iIndex = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> json) &#123;</span><br><span class="line">  <span class="keyword">if</span> (json[i] &gt; iMax) &#123;</span><br><span class="line">    iMax = json[i];</span><br><span class="line">    iIndex = i;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">alert(<span class="string">"出现次数最多的是:"</span> + iIndex + <span class="string">"出现"</span> + iMax + <span class="string">"次"</span>);</span><br></pre></td></tr></table></figure>

<h3 id="写一个获取非行间样式的函数"><a href="#写一个获取非行间样式的函数" class="headerlink" title="写一个获取非行间样式的函数"></a>写一个获取非行间样式的函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">obj, attr, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.currentStyle) &#123;</span><br><span class="line">      <span class="keyword">return</span> obj.currentStyle(attr);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      obj.getComputedStyle(attr, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    obj.style[attr] = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="字符串反转，如将-‘12345678’-变成-‘87654321’"><a href="#字符串反转，如将-‘12345678’-变成-‘87654321’" class="headerlink" title="字符串反转，如将 ‘12345678’ 变成 ‘87654321’"></a>字符串反转，如将 ‘12345678’ 变成 ‘87654321’</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//思路：先将字符串转换为数组 split()，利用数组的反序函数 reverse()颠倒数组，再利用 jion() 转换为字符串</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"12345678"</span>;</span><br><span class="line">str = str</span><br><span class="line">  .split(<span class="string">""</span>)</span><br><span class="line">  .reverse()</span><br><span class="line">  .join(<span class="string">""</span>);</span><br></pre></td></tr></table></figure>

<h3 id="将数字-12345678-转化成-RMB-形式-如：-12-345-678"><a href="#将数字-12345678-转化成-RMB-形式-如：-12-345-678" class="headerlink" title="将数字 12345678 转化成 RMB 形式 如： 12,345,678"></a>将数字 12345678 转化成 RMB 形式 如： 12,345,678</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//个人方法；</span></span><br><span class="line"><span class="comment">//思路：先将数字转为字符， str= str + '' ;</span></span><br><span class="line"><span class="comment">//利用反转函数，每三位字符加一个 ','最后一位不加； re()是自定义的反转函数，最后再反转回去！</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= re(str).length; i++) &#123;</span><br><span class="line">  tmp += re(str)[i - <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">if</span> (i % <span class="number">3</span> == <span class="number">0</span> &amp;&amp; i != re(str).length) &#123;</span><br><span class="line">    tmp += <span class="string">","</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="生成-5-个不同的随机数"><a href="#生成-5-个不同的随机数" class="headerlink" title="生成 5 个不同的随机数"></a>生成 5 个不同的随机数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//思路：5个不同的数，每生成一次就和前面的所有数字相比较，如果有相同的，则放弃当前生成的数字！</span></span><br><span class="line"><span class="keyword">var</span> num1 = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  num1[i] = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">10</span>) + <span class="number">1</span>; <span class="comment">//范围是 [1, 10]</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (num1[i] == num1[j]) &#123;</span><br><span class="line">      i--;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="去掉数组中重复的数字"><a href="#去掉数组中重复的数字" class="headerlink" title="去掉数组中重复的数字"></a>去掉数组中重复的数字</h3><p>方法一</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//思路：每遍历一次就和之前的所有做比较，不相等则放入新的数组中！</span></span><br><span class="line"><span class="comment">//这里用的原型 个人做法；</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> len = <span class="keyword">this</span>.length,</span><br><span class="line">    newArr = [],</span><br><span class="line">    flag = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++, flag = <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>[i] == <span class="keyword">this</span>[j]) &#123;</span><br><span class="line">        flag = <span class="number">0</span>; <span class="comment">//找到相同的数字后，不执行添加数据</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    flag ? newArr.push(<span class="keyword">this</span>[i]) : <span class="string">""</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newArr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>方法二</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> len = arr.length,</span><br><span class="line">    newArr = [],</span><br><span class="line">    flag;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i += <span class="number">1</span>, flag = <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[i] == arr[j]) &#123;</span><br><span class="line">        flag = <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    flag ? newArr.push(arr[i]) : <span class="string">""</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  alert(newArr);</span><br><span class="line">&#125;)([<span class="number">1</span>, <span class="number">1</span>, <span class="number">22</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">55</span>, <span class="number">66</span>]);</span><br></pre></td></tr></table></figure>

<h3 id="阶乘函数"><a href="#阶乘函数" class="headerlink" title="阶乘函数"></a>阶乘函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原型方法</span></span><br><span class="line"><span class="built_in">Number</span>.prototype.N = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> re = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="keyword">this</span>; i++) &#123;</span><br><span class="line">    re *= i;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> re;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> num = <span class="number">5</span>;</span><br><span class="line">alert(num.N());</span><br></pre></td></tr></table></figure>

<h3 id="看题做答"><a href="#看题做答" class="headerlink" title="看题做答"></a>看题做答</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> tmp = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">this</span>.x = <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(tmp);    <span class="comment">//A</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.x)；     <span class="comment">//B</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> f1(); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.x)     <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(f1());        <span class="comment">//3</span></span><br></pre></td></tr></table></figure>

<p>解析：<br>     这道题让我重新认识了对象和函数，首先看代码（1），这里实例话化了 f1 这个类。相当于执行了 f1 函数。所以这个时候 A 会输出 1， 而 B 这个时候的 this 代表的是 实例化的当前对象 obj B 输出 3.。 代码（2）毋庸置疑会输出 3， 重点 代码（3）首先这里将不再是一个类，它只是一个函数。那么 A 输出 1， B 呢？这里的 this 代表的其实就是 window 对象，那么 this.x 就是一个全局变量 相当于在外部 的一个全局变量。所以 B 输出 3。最后代码由于 f 没有返回值那么一个函数如果没返回值的话，将会返回 underfined ，所以答案就是 ： 1， 3， 3， 1， 3， underfined 。</p>
<h3 id="下面输出多少？"><a href="#下面输出多少？" class="headerlink" title="下面输出多少？"></a>下面输出多少？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1 = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="keyword">var</span> o2 = o1;</span><br><span class="line">o2.name = <span class="string">"CSSer"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(o1.name);</span><br></pre></td></tr></table></figure>

<p>解析：</p>
<p>如果不看答案，你回答真确了的话，那么说明你对 javascript 的数据类型了解的还是比较清楚了。js 中有两种数据类型，分别是：基本数据类型和引用数据类型（object Array）。对于保存基本类型值的变量，变量是按值访问的，因为我们操作的是变量实际保存的值。对于保存引用类型值的变量，变量是按引用访问的，我们操作的是变量值所引用（指向）的对象。答案就清楚了：  //CSSer;</p>
<h3 id="下面输出多少？-1"><a href="#下面输出多少？-1" class="headerlink" title="下面输出多少？"></a>下面输出多少？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeObjectProperty</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  o.siteUrl = <span class="string">"http://www.csser.com/"</span>;</span><br><span class="line">  o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">  o.siteUrl = <span class="string">"http://www.popcg.com/"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> CSSer = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">changeObjectProperty(CSSer);</span><br><span class="line"><span class="built_in">console</span>.log(CSSer.siteUrl); <span class="comment">//</span></span><br></pre></td></tr></table></figure>

<p>解析：</p>
<p>如果 CSSer 参数是按引用传递的，那么结果应该是”<a href="http://www.popcg.com/&quot;，但实际结果却仍是&quot;http://www.csser.com/&quot;。事实是这样的：在函数内部修改了引用类型值的参数，该参数值的原始引用保持不变。我们可以把参数想象成局部变量，当参数被重写时，这个变量引用的就是一个局部变量，局部变量的生存期仅限于函数执行的过程中，函数执行完毕，局部变量即被销毁以释放内存。" target="_blank" rel="noopener">http://www.popcg.com/&quot;，但实际结果却仍是&quot;http://www.csser.com/&quot;。事实是这样的：在函数内部修改了引用类型值的参数，该参数值的原始引用保持不变。我们可以把参数想象成局部变量，当参数被重写时，这个变量引用的就是一个局部变量，局部变量的生存期仅限于函数执行的过程中，函数执行完毕，局部变量即被销毁以释放内存。</a><br>    （补充：内部环境可以通过作用域链访问所有的外部环境中的变量对象，但外部环境无法访问内部环境。每个环境都可以向上搜索作用域链，以查询变量和函数名，反之向下则不能。）</p>
<h3 id="输出多少？"><a href="#输出多少？" class="headerlink" title="输出多少？"></a>输出多少？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">6</span>;</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">666</span>;</span><br><span class="line">  alert(a); <span class="comment">// 输出666，</span></span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line">a = <span class="number">66</span>;</span><br></pre></td></tr></table></figure>

<p>因为 var a = 666;定义了局部变量 a，并且赋值为 666，根据变量作用域链，<br>全局变量处在作用域末端，优先访问了局部变量，从而覆盖了全局变量 。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">6</span>;</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(a); <span class="comment">// 输出undefined</span></span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">666</span>;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line">a = <span class="number">66</span>;</span><br></pre></td></tr></table></figure>

<p>因为 var a = 666;定义了局部变量 a，同样覆盖了全局变量，但是在 alert(a);之前<br>a 并未赋值，所以输出 undefined。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">6</span>;</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(a);</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">66</span>;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line">a = <span class="number">666</span>;</span><br><span class="line">alert(a);</span><br><span class="line"><span class="comment">// 666, undefined;</span></span><br></pre></td></tr></table></figure>

<p>记住： 异步处理，一切 OK 声明提前</p>
<h3 id="JS-的继承性？"><a href="#JS-的继承性？" class="headerlink" title="JS 的继承性？"></a>JS 的继承性？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.color = <span class="string">"red"</span>;</span><br><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">color</span>: <span class="string">"blue"</span> &#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayColor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="keyword">this</span>.color);</span><br><span class="line">&#125;</span><br><span class="line">sayColor(); <span class="comment">//red</span></span><br><span class="line">sayColor.call(<span class="keyword">this</span>); <span class="comment">//red this-window对象</span></span><br><span class="line">sayColor.call(<span class="built_in">window</span>); <span class="comment">//red</span></span><br><span class="line">sayColor.call(o); <span class="comment">//blue</span></span><br></pre></td></tr></table></figure>

<h3 id="精度问题-JS-精度不能精确到-0-1-所以-。。。。同时存在于值和差值中"><a href="#精度问题-JS-精度不能精确到-0-1-所以-。。。。同时存在于值和差值中" class="headerlink" title="精度问题: JS 精度不能精确到 0.1 所以  。。。。同时存在于值和差值中"></a>精度问题: JS 精度不能精确到 0.1 所以  。。。。同时存在于值和差值中</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="number">0.3</span>,</span><br><span class="line">  m = <span class="number">0.2</span>,</span><br><span class="line">  i = <span class="number">0.2</span>,</span><br><span class="line">  j = <span class="number">0.1</span>;</span><br><span class="line">alert(n - m == i - j); <span class="comment">//false</span></span><br><span class="line">alert(n - m == <span class="number">0.1</span>); <span class="comment">//false</span></span><br><span class="line">alert(i - j == <span class="number">0.1</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h3 id="加减运算"><a href="#加减运算" class="headerlink" title="加减运算"></a>加减运算</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="string">"5"</span> + <span class="number">3</span>); <span class="comment">//53 string</span></span><br><span class="line">alert(<span class="string">"5"</span> + <span class="string">"3"</span>); <span class="comment">//53 string</span></span><br><span class="line">alert(<span class="string">"5"</span> - <span class="number">3</span>); <span class="comment">//2 number</span></span><br><span class="line">alert(<span class="string">"5"</span> - <span class="string">"3"</span>); <span class="comment">//2 number</span></span><br></pre></td></tr></table></figure>

<h3 id="结果是什么？"><a href="#结果是什么？" class="headerlink" title="结果是什么？"></a>结果是什么？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  foo.a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">this</span>.a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">2</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">3</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">4</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">foo.prototype.a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="number">5</span>);</span><br><span class="line">&#125;;</span><br><span class="line">foo.a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="number">6</span>);</span><br><span class="line">&#125;;</span><br><span class="line">foo.a(); <span class="comment">//6</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> foo();</span><br><span class="line">obj.a(); <span class="comment">//2</span></span><br><span class="line">foo.a(); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>

<h3 id="输出结果"><a href="#输出结果" class="headerlink" title="输出结果"></a>输出结果</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  a = <span class="number">0</span>;</span><br><span class="line">  alert(a);</span><br><span class="line">  alert(<span class="keyword">this</span>.a); <span class="comment">//没有定义 a这个属性</span></span><br><span class="line">  <span class="keyword">var</span> a;</span><br><span class="line">  alert(a);</span><br><span class="line">&#125;</span><br><span class="line">test(); <span class="comment">// 0, 5, 0</span></span><br><span class="line"><span class="keyword">new</span> test(); <span class="comment">// 0, undefined, 0 //由于类它自身没有属性a， 所以是undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="计算字符串字节数"><a href="#计算字符串字节数" class="headerlink" title="计算字符串字节数"></a>计算字符串字节数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> (<span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">arguments</span>.length || !s) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">""</span> == s) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> l = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; s.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (s.charCodeAt(i) &gt; <span class="number">255</span>) l += <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span> l += <span class="number">1</span>; <span class="comment">//charCodeAt()得到的是unCode码</span></span><br><span class="line">  &#125; <span class="comment">//汉字的unCode码大于 255bit 就是两个字节</span></span><br><span class="line">  alert(l);</span><br><span class="line">&#125;)(<span class="string">"hello world!"</span>);</span><br></pre></td></tr></table></figure>

<h3 id="结果是"><a href="#结果是" class="headerlink" title="结果是"></a>结果是</h3><p>var bool = !!2; alert(bool)；//true;<br>双向非操作可以把字符串和数字转换为布尔值</p>
<h3 id="声明对象，添加属性，输出属性"><a href="#声明对象，添加属性，输出属性" class="headerlink" title="声明对象，添加属性，输出属性"></a>声明对象，添加属性，输出属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">"leipeng"</span>,</span><br><span class="line">  showName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.showName();</span><br></pre></td></tr></table></figure>

<h3 id="匹配输入的字符：第一个必须是字母或下划线开头，长度-5-20"><a href="#匹配输入的字符：第一个必须是字母或下划线开头，长度-5-20" class="headerlink" title="匹配输入的字符：第一个必须是字母或下划线开头，长度 5-20"></a>匹配输入的字符：第一个必须是字母或下划线开头，长度 5-20</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^[a-zA-Z][a-zA-Z0-9_]&#123;5,20&#125;/</span>,</span><br><span class="line">  name1 = <span class="string">"leipeng"</span>,</span><br><span class="line">  name2 = <span class="string">"0leipeng"</span>,</span><br><span class="line">  name3 = <span class="string">"你好leipeng"</span>,</span><br><span class="line">  name4 = <span class="string">"hi"</span>;</span><br><span class="line">alert(reg.test(name1));</span><br><span class="line">alert(reg.test(name2));</span><br><span class="line">alert(reg.test(name3));</span><br><span class="line">alert(reg.test(name4));</span><br></pre></td></tr></table></figure>

<h3 id="检测变量类型"><a href="#检测变量类型" class="headerlink" title="检测变量类型"></a>检测变量类型</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkStr</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">typeof</span> str == <span class="string">"string"</span> ? alert(<span class="string">"true"</span>) : alert(<span class="string">"false"</span>);</span><br><span class="line">&#125;</span><br><span class="line">checkStr(<span class="string">"leipeng"</span>);</span><br></pre></td></tr></table></figure>

<h3 id="如何在-HTML-中添加事件，几种方法？"><a href="#如何在-HTML-中添加事件，几种方法？" class="headerlink" title="如何在 HTML 中添加事件，几种方法？"></a>如何在 HTML 中添加事件，几种方法？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、标签之中直接添加 onclick=&quot;fun()&quot;;</span><br><span class="line">2、JS 添加 Eobj.onclick = method;</span><br><span class="line">3、现代事件  IE： obj.attachEvent(&apos;onclick&apos;, method)；</span><br><span class="line">            FF: obj.addEventListener(&apos;click&apos;, method, false);</span><br></pre></td></tr></table></figure>

<h3 id="请问代码实现-outerHTML"><a href="#请问代码实现-outerHTML" class="headerlink" title="请问代码实现 outerHTML"></a>请问代码实现 outerHTML</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//说明：outerHTML其实就是innerHTML再加上本身；</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.outerHTML = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> innerCon = <span class="keyword">this</span>.innerHTML, <span class="comment">//获得里面的内容</span></span><br><span class="line">    outerCon = <span class="keyword">this</span>.appendChild(innerCon); <span class="comment">//添加到里面</span></span><br><span class="line">  alert(outerCon);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>演示代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"outer"</span>&gt;</span></span><br><span class="line">      hello</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">Object</span>.prototype.outerHTML = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> innerCon = <span class="keyword">this</span>.innerHTML, <span class="comment">//获得里面的内容</span></span></span><br><span class="line"><span class="actionscript">          outerCon = <span class="keyword">this</span>.appendChild(innerCon); <span class="comment">//添加到里面</span></span></span><br><span class="line">        alert(outerCon);</span><br><span class="line">      &#125;;</span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">$</span>(<span class="params">id</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id);</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="javascript">      alert($(<span class="string">"outer"</span>).innerHTML);</span></span><br><span class="line"><span class="javascript">      alert($(<span class="string">"outer"</span>).outerHTML);</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="JS-中的简单继承-call-方法！"><a href="#JS-中的简单继承-call-方法！" class="headerlink" title="JS 中的简单继承 call 方法！"></a>JS 中的简单继承 call 方法！</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//顶一个父母类，注意：类名都是首字母大写的哦！</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">name, money</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.money = money;</span><br><span class="line">  <span class="keyword">this</span>.info = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"姓名： "</span> + <span class="keyword">this</span>.name + <span class="string">" 钱： "</span> + <span class="keyword">this</span>.money);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125; <span class="comment">//定义孩子类</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Children</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  Parent.call(<span class="keyword">this</span>, name); <span class="comment">//继承 姓名属性，不要钱。</span></span><br><span class="line">  <span class="keyword">this</span>.info = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"姓名： "</span> + <span class="keyword">this</span>.name);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125; <span class="comment">//实例化类</span></span><br><span class="line"><span class="keyword">var</span> per = <span class="keyword">new</span> Parent(<span class="string">"parent"</span>, <span class="number">800000000000</span>);</span><br><span class="line"><span class="keyword">var</span> chi = <span class="keyword">new</span> Children(<span class="string">"child"</span>);</span><br><span class="line">per.info();</span><br><span class="line">chi.info();</span><br></pre></td></tr></table></figure>

<h3 id="解析-URL-成一个对象？"><a href="#解析-URL-成一个对象？" class="headerlink" title="解析 URL 成一个对象？"></a>解析 URL 成一个对象？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.urlQueryString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> url = <span class="keyword">this</span>.split(<span class="string">"?"</span>)[<span class="number">1</span>].split(<span class="string">"&amp;"</span>),</span><br><span class="line">    len = url.length;</span><br><span class="line">  <span class="keyword">this</span>.url = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i += <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> cell = url[i].split(<span class="string">"="</span>),</span><br><span class="line">      key = cell[<span class="number">0</span>],</span><br><span class="line">      val = cell[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">this</span>.url[<span class="string">""</span> + key + <span class="string">""</span>] = val;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.url;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">"?name=12&amp;age=23"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(url.urlQueryString().age);</span><br></pre></td></tr></table></figure>

<h3 id="看下列代码输出什么？"><a href="#看下列代码输出什么？" class="headerlink" title="看下列代码输出什么？"></a>看下列代码输出什么？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="string">"11"</span> + <span class="number">2</span> - <span class="string">"1"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(foo);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> foo);</span><br><span class="line"><span class="comment">// 执行完后foo的值为111，foo的类型为Number。</span></span><br></pre></td></tr></table></figure>

<h3 id="看下列代码-输出什么？"><a href="#看下列代码-输出什么？" class="headerlink" title="看下列代码,输出什么？"></a>看下列代码,输出什么？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">a.value = <span class="number">1</span>;</span><br><span class="line">b = a;</span><br><span class="line">b.value = <span class="number">2</span>;</span><br><span class="line">alert(a.value);</span><br><span class="line"><span class="comment">// 执行完后输出结果为2</span></span><br></pre></td></tr></table></figure>

<h3 id="已知数组-var-stringArray-“This”-“is”-“Baidu”-“Campus”-，Alert-出”This-is-Baidu-Campus”。"><a href="#已知数组-var-stringArray-“This”-“is”-“Baidu”-“Campus”-，Alert-出”This-is-Baidu-Campus”。" class="headerlink" title="已知数组 var stringArray = [“This”, “is”, “Baidu”, “Campus”]，Alert 出”This is Baidu Campus”。"></a>已知数组 var stringArray = [“This”, “is”, “Baidu”, “Campus”]，Alert 出”This is Baidu Campus”。</h3><p>alert(stringArray.join(“”))</p>
<h3 id="请描述出下列代码运行的结果"><a href="#请描述出下列代码运行的结果" class="headerlink" title="请描述出下列代码运行的结果"></a>请描述出下列代码运行的结果</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">d();</span><br></pre></td></tr></table></figure>

<h3 id="需要将变量-e-的值修改为“a-b-c-d”-请写出对应的代码"><a href="#需要将变量-e-的值修改为“a-b-c-d”-请写出对应的代码" class="headerlink" title="需要将变量 e 的值修改为“a+b+c+d”,请写出对应的代码"></a>需要将变量 e 的值修改为“a+b+c+d”,请写出对应的代码</h3><p>var e=”abcd”;</p>
<h3 id="下面这个-ul，如何点击每一列的时候-alert-其-index-（闭包）"><a href="#下面这个-ul，如何点击每一列的时候-alert-其-index-（闭包）" class="headerlink" title="下面这个 ul，如何点击每一列的时候 alert 其 index?（闭包）"></a>下面这个 ul，如何点击每一列的时候 alert 其 index?（闭包）</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"”test”"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>这是第一条<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>这是第二条<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>这是第三条<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>答案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法一：</span></span><br><span class="line"><span class="keyword">var</span> lis = <span class="built_in">document</span>.getElementById(<span class="string">"2223"</span>).getElementsByTagName(<span class="string">"li"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  lis[i].index = i;</span><br><span class="line">  lis[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.index);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//方法二：</span></span><br><span class="line"><span class="keyword">var</span> lis = <span class="built_in">document</span>.getElementById(<span class="string">"2223"</span>).getElementsByTagName(<span class="string">"li"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  lis[i].index = i;</span><br><span class="line">  lis[i].onclick = (<span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      alert(a);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="小贤是一条可爱的小狗-Dog-，它的叫声很好听-wow-，每次看到主人的时候就会乖乖叫一声-yelp-。从这段描述可以得到以下对象："><a href="#小贤是一条可爱的小狗-Dog-，它的叫声很好听-wow-，每次看到主人的时候就会乖乖叫一声-yelp-。从这段描述可以得到以下对象：" class="headerlink" title="小贤是一条可爱的小狗(Dog)，它的叫声很好听(wow)，每次看到主人的时候就会乖乖叫一声(yelp)。从这段描述可以得到以下对象："></a>小贤是一条可爱的小狗(Dog)，它的叫声很好听(wow)，每次看到主人的时候就会乖乖叫一声(yelp)。从这段描述可以得到以下对象：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">Dog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.wow = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">               alert(’Wow’);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.yelp = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">              <span class="keyword">this</span>.wow();</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>小芒和小贤一样，原来也是一条可爱的小狗，可是突然有一天疯了(MadDog)，一看到人就会每隔半秒叫一声(wow)地不停叫唤(yelp)。请根据描述，按示例的形式用代码来实。（继承，原型，setInterval）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MadDog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.yelp = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      self.wow();</span><br><span class="line">    &#125;, <span class="number">500</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">MadDog.prototype = <span class="keyword">new</span> Dog();</span><br><span class="line"><span class="comment">//for test</span></span><br><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> Dog();</span><br><span class="line">dog.yelp();</span><br><span class="line"><span class="keyword">var</span> madDog = <span class="keyword">new</span> MadDog();</span><br><span class="line">madDog.yelp();</span><br></pre></td></tr></table></figure>

<h3 id="实现一个函数-clone，可以对-JavaScript-中的-5-种主要的数据类型（包括-Number、String、Object、Array、Boolean）进行值复制"><a href="#实现一个函数-clone，可以对-JavaScript-中的-5-种主要的数据类型（包括-Number、String、Object、Array、Boolean）进行值复制" class="headerlink" title="实现一个函数 clone，可以对 JavaScript 中的 5 种主要的数据类型（包括 Number、String、Object、Array、Boolean）进行值复制"></a>实现一个函数 clone，可以对 JavaScript 中的 5 种主要的数据类型（包括 Number、String、Object、Array、Boolean）进行值复制</h3><ul>
<li>考察点 1：对于基本数据类型和引用数据类型在内存中存放的是值还是指针这一区别是否清楚</li>
<li>考察点 2：是否知道如何判断一个变量是什么类型的</li>
<li>考察点 3：递归算法的设计</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法一：</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.clone = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> o = <span class="keyword">this</span>.constructor === <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> e <span class="keyword">in</span> <span class="keyword">this</span>) &#123;</span><br><span class="line">    o[e] = <span class="keyword">typeof</span> <span class="keyword">this</span>[e] === <span class="string">"object"</span> ? <span class="keyword">this</span>[e].clone() : <span class="keyword">this</span>[e];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> o;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 克隆一个对象</span></span><br><span class="line"><span class="comment"> * @param Obj</span></span><br><span class="line"><span class="comment"> * @returns</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//方法二：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">Obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> buf;</span><br><span class="line">  <span class="keyword">if</span> (Obj <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">    buf = []; <span class="comment">//创建一个空的数组</span></span><br><span class="line">    <span class="keyword">var</span> i = Obj.length;</span><br><span class="line">    <span class="keyword">while</span> (i--) &#123;</span><br><span class="line">      buf[i] = clone(Obj[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> buf;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (Obj <span class="keyword">instanceof</span> <span class="built_in">Object</span>) &#123;</span><br><span class="line">    buf = &#123;&#125;; <span class="comment">//创建一个空对象</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> Obj) &#123;</span><br><span class="line">      <span class="comment">//为这个对象添加新的属性</span></span><br><span class="line">      buf[k] = clone(Obj[k]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> buf;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//普通变量直接赋值</span></span><br><span class="line">    <span class="keyword">return</span> Obj;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="输出今天的日期，以-YYYY-MM-DD-的方式，比如今天是-2014-年-9-月-26-日，则输出-2014-09-26"><a href="#输出今天的日期，以-YYYY-MM-DD-的方式，比如今天是-2014-年-9-月-26-日，则输出-2014-09-26" class="headerlink" title="输出今天的日期，以 YYYY-MM-DD 的方式，比如今天是 2014 年 9 月 26 日，则输出 2014-09-26"></a>输出今天的日期，以 YYYY-MM-DD 的方式，比如今天是 2014 年 9 月 26 日，则输出 2014-09-26</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="comment">// 获取年，getFullYear()返回4位的数字</span></span><br><span class="line"><span class="keyword">var</span> year = d.getFullYear();</span><br><span class="line"><span class="comment">// 获取月，月份比较特殊，0是1月，11是12月</span></span><br><span class="line"><span class="keyword">var</span> month = d.getMonth() + <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 变成两位</span></span><br><span class="line">month = month &lt; <span class="number">10</span> ? <span class="string">"0"</span> + month : month;</span><br><span class="line"><span class="comment">// 获取日</span></span><br><span class="line"><span class="keyword">var</span> day = d.getDate();</span><br><span class="line">day = day &lt; <span class="number">10</span> ? <span class="string">"0"</span> + day : day;</span><br><span class="line">alert(year + <span class="string">"-"</span> + month + <span class="string">"-"</span> + day);</span><br></pre></td></tr></table></figure>

<h3 id="写出函数-DateDemo-的返回结果，系统时间假定为今天"><a href="#写出函数-DateDemo-的返回结果，系统时间假定为今天" class="headerlink" title="写出函数 DateDemo 的返回结果，系统时间假定为今天"></a>写出函数 DateDemo 的返回结果，系统时间假定为今天</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DateDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> d,</span><br><span class="line">    s = <span class="string">"今天日期是："</span>;</span><br><span class="line">  d = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  s += d.getMonth() + <span class="string">"/"</span>;</span><br><span class="line">  s += d.getDate() + <span class="string">"/"</span>;</span><br><span class="line">  s += d.getYear();</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>答案：今天日期是：7/17/2010</p>
<h3 id="只允许使用-和-Math-，求一个函数-y-f-x-a-b-当-x-gt-100-时返回-a-的值，否则返回-b-的值，不能使用-if-else-等条件语句，也不能使用-数组。"><a href="#只允许使用-和-Math-，求一个函数-y-f-x-a-b-当-x-gt-100-时返回-a-的值，否则返回-b-的值，不能使用-if-else-等条件语句，也不能使用-数组。" class="headerlink" title="只允许使用 + - _ / 和 Math._ ，求一个函数 y = f(x, a, b);当 x &gt; 100 时返回 a 的值，否则返回 b 的值，不能使用 if else 等条件语句，也不能使用|,?:,数组。"></a>只允许使用 + - _ / 和 Math._ ，求一个函数 y = f(x, a, b);当 x &gt; 100 时返回 a 的值，否则返回 b 的值，不能使用 if else 等条件语句，也不能使用|,?:,数组。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> temp = <span class="built_in">Math</span>.ceil(<span class="built_in">Math</span>.min(<span class="built_in">Math</span>.max(x - <span class="number">100</span>, <span class="number">0</span>), <span class="number">1</span>));</span><br><span class="line">  <span class="keyword">return</span> a * temp + b * (<span class="number">1</span> - temp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(f(<span class="number">-10</span>, <span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure>

<h2 id="看代码，写结果"><a href="#看代码，写结果" class="headerlink" title="看代码，写结果"></a>看代码，写结果</h2><h3 id="看题算结果"><a href="#看题算结果" class="headerlink" title="看题算结果"></a>看题算结果</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tasks = []; <span class="comment">// 这里存放异步操作的 Promise</span></span><br><span class="line"><span class="keyword">var</span> output = <span class="function"><span class="params">i</span> =&gt;</span></span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>(), i);</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;, <span class="number">1000</span> * i);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成全部的异步操作</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  tasks.push(output(i));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>, i);</span><br></pre></td></tr></table></figure>

<p>答案：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Mon Aug 12 2019 09:37:36 GMT+0800 (中国标准时间) 5</span><br><span class="line">Mon Aug 12 2019 09:33:55 GMT+0800 (中国标准时间) 0</span><br><span class="line">然后每隔1s打印</span><br><span class="line">Mon Aug 12 2019 09:33:56 GMT+0800 (中国标准时间) 1</span><br><span class="line">Mon Aug 12 2019 09:33:57 GMT+0800 (中国标准时间) 2</span><br><span class="line">Mon Aug 12 2019 09:33:58 GMT+0800 (中国标准时间) 3</span><br><span class="line">Mon Aug 12 2019 09:33:59 GMT+0800 (中国标准时间) 4</span><br></pre></td></tr></table></figure>

<p>解析：<a href="https://www.cnblogs.com/adouwt/p/6481479.html" target="_blank" rel="noopener">参考</a></p>
<h3 id="看题算结果-1"><a href="#看题算结果-1" class="headerlink" title="看题算结果"></a>看题算结果</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模拟其他语言中的 sleep，实际上可以是任何异步操作</span></span><br><span class="line"><span class="keyword">const</span> sleep = <span class="function"><span class="params">timeountMS</span> =&gt;</span></span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(resolve, timeountMS);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">// 声明即执行的 async 函数表达式</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">await</span> sleep(<span class="number">1000</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>(), i);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> sleep(<span class="number">1000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>(), i);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>答案：每隔1s打印</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Mon Aug 12 2019 09:39:02 GMT+0800 (中国标准时间) 0</span><br><span class="line">Mon Aug 12 2019 09:39:03 GMT+0800 (中国标准时间) 1</span><br><span class="line">Mon Aug 12 2019 09:39:04 GMT+0800 (中国标准时间) 2</span><br><span class="line">Mon Aug 12 2019 09:39:05 GMT+0800 (中国标准时间) 3</span><br><span class="line">Mon Aug 12 2019 09:39:06 GMT+0800 (中国标准时间) 4</span><br><span class="line">Mon Aug 12 2019 09:39:07 GMT+0800 (中国标准时间) 5</span><br></pre></td></tr></table></figure>

<p>解析：<a href="https://www.cnblogs.com/adouwt/p/6481479.html" target="_blank" rel="noopener">参考</a></p>
<h3 id="请写出以下代码的执行结果"><a href="#请写出以下代码的执行结果" class="headerlink" title="请写出以下代码的执行结果"></a>请写出以下代码的执行结果</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(function() &#123;</span><br><span class="line">    fn();</span><br><span class="line">    var fn = function() &#123;</span><br><span class="line">        alert(1);</span><br><span class="line">    &#125;</span><br><span class="line">    fn();</span><br><span class="line">    function fn() &#123;</span><br><span class="line">        alert(2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<h3 id="请说明以下各种情况的执行结果，并注明产生对应结果的理由"><a href="#请说明以下各种情况的执行结果，并注明产生对应结果的理由" class="headerlink" title="请说明以下各种情况的执行结果，并注明产生对应结果的理由"></a>请说明以下各种情况的执行结果，并注明产生对应结果的理由</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function doSomething() &#123;</span><br><span class="line">    alert(this);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a) element.onclick = doSomething, 点击 element 元素后</span><br><span class="line">b) element.onclick = function() doSomething()&#123;&#125;, 点击 element 元素后</span><br><span class="line">c) 直接执行 doSomething()</span><br></pre></td></tr></table></figure>

<h3 id="请写出以下代码的执行结果-1"><a href="#请写出以下代码的执行结果-1" class="headerlink" title="请写出以下代码的执行结果"></a>请写出以下代码的执行结果</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;;</span><br><span class="line">var events = &#123; m1: &quot;clicked&quot;, m2: &quot;changed&quot;&#125;;</span><br><span class="line">for(e in events) &#123;</span><br><span class="line">    obj[e] = function() &#123;</span><br><span class="line">        alert(events[e])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">alert(obj.m1 == obj.m2);</span><br><span class="line">obj.m1();</span><br><span class="line">obj.m2();</span><br></pre></td></tr></table></figure>

<h3 id="以下代码输出多少"><a href="#以下代码输出多少" class="headerlink" title="以下代码输出多少"></a>以下代码输出多少</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"world"</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">"undefined"</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> name = <span class="string">"jack"</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Hi!"</span> + name);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Hello,"</span> + name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">==&gt; Hi!jack</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"world"</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">"undefined"</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> name = <span class="string">"jack"</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Hi!"</span> + name);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Hello,"</span> + name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(name)</span><br><span class="line"></span><br><span class="line">==&gt; Hello,world</span><br></pre></td></tr></table></figure>

<h3 id="计算打印结果"><a href="#计算打印结果" class="headerlink" title="计算打印结果"></a>计算打印结果</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">n, o</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(o);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    fun: <span class="function"><span class="keyword">function</span>(<span class="params">m</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> fun(m, n);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//    var a = fun(0);</span></span><br><span class="line"><span class="comment">//    a.fun(1)</span></span><br><span class="line"><span class="comment">//    a.fun(2)</span></span><br><span class="line"><span class="comment">//    a.fun(3)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印</span></span><br><span class="line"><span class="comment">// undefined 0 0 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    var b = fun(0).fun(1).fun(2).fun(3)</span></span><br><span class="line"><span class="comment">// 打印 undefined 0 1 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = fun(<span class="number">0</span>).fun(<span class="number">1</span>);</span><br><span class="line">c.fun(<span class="number">2</span>);</span><br><span class="line">c.fun(<span class="number">3</span>);</span><br><span class="line"><span class="comment">// 打印</span></span><br><span class="line"><span class="comment">// undefined 0 1 1</span></span><br></pre></td></tr></table></figure>

<h3 id="看下面代码，给出输出结果"><a href="#看下面代码，给出输出结果" class="headerlink" title="看下面代码，给出输出结果"></a>看下面代码，给出输出结果</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure>

<p>但是</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// setTimout在for里面是异步执行的，在延迟输出的时候，i的值已经是4了</span></span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 4 4 4</span></span><br></pre></td></tr></table></figure>

<p>如何输出 1 2 3</p>
<p>答案：</p>
<p>立即执行函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">  setTimeout(</span><br><span class="line">    (<span class="function"><span class="params">i</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;)(i),</span><br><span class="line">    <span class="number">0</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="看下面代码，给出输出结果-考察闭包及-运算符"><a href="#看下面代码，给出输出结果-考察闭包及-运算符" class="headerlink" title="看下面代码，给出输出结果(考察闭包及++运算符)"></a>看下面代码，给出输出结果(考察闭包及++运算符)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i++);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f1 = Foo(),</span><br><span class="line">  f2 = Foo();</span><br><span class="line"></span><br><span class="line">f1(); <span class="comment">// 0</span></span><br><span class="line">f1(); <span class="comment">// 1</span></span><br><span class="line">f2(); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    a++;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = fn();</span><br><span class="line"><span class="built_in">console</span>.log(b());</span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a++);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = fn();</span><br><span class="line"><span class="built_in">console</span>.log(b());</span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h3 id="看下面代码，给出输出结果-考察时间戳"><a href="#看下面代码，给出输出结果-考察时间戳" class="headerlink" title="看下面代码，给出输出结果(考察时间戳)"></a>看下面代码，给出输出结果(考察时间戳)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//总结：第一个setTimeout，时间间隔&lt;1000的话，输出1000多，&gt;1000的话，输出间隔值多</span></span><br><span class="line"><span class="comment">//     第二个setTimeout，是1000+时间间隔</span></span><br><span class="line"><span class="keyword">var</span> dateNum = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>() - dateNum);</span><br><span class="line">&#125;, <span class="number">1200</span>); <span class="comment">//1200多</span></span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">new</span> <span class="built_in">Date</span>() - dateNum &lt; <span class="number">1000</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>() - dateNum);</span><br><span class="line">&#125;, <span class="number">1500</span>); <span class="comment">// 2500左右</span></span><br></pre></td></tr></table></figure>

<h3 id="看题写结果"><a href="#看题写结果" class="headerlink" title="看题写结果"></a>看题写结果</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> output = <span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  output(i); <span class="comment">// 这里传过去的 i 值被复制了</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(i);</span><br></pre></td></tr></table></figure>

<p>答案：</p>
<p>5<br>0<br>1<br>2<br>3<br>4</p>
<p>解析：<a href="https://www.cnblogs.com/adouwt/p/6481479.html" target="_blank" rel="noopener">参考</a></p>
<p>第 16 题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"test函数"</span>);</span><br><span class="line">&#125;</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"定时器回调函数"</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line">test();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">"hello"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="下列-JavaScript-代码执行后，依次-alert-的结果是"><a href="#下列-JavaScript-代码执行后，依次-alert-的结果是" class="headerlink" title="下列 JavaScript 代码执行后，依次 alert 的结果是"></a>下列 JavaScript 代码执行后，依次 alert 的结果是</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">proto</span>: &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125; &#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">F.prototype = obj.proto;</span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> F();</span><br><span class="line">obj.proto.c = <span class="number">3</span>;</span><br><span class="line">obj.proto = &#123; <span class="attr">a</span>: <span class="number">-1</span>, <span class="attr">b</span>: <span class="number">-2</span> &#125;;</span><br><span class="line">alert(f.a);</span><br><span class="line">alert(f.c);</span><br><span class="line"><span class="keyword">delete</span> F.prototype[<span class="string">"a"</span>];</span><br><span class="line">alert(f.a);</span><br><span class="line">alert(obj.proto.a);</span><br></pre></td></tr></table></figure>

<h3 id="下列-JavaScript-代码执行后，运行的结果是"><a href="#下列-JavaScript-代码执行后，运行的结果是" class="headerlink" title="下列 JavaScript 代码执行后，运行的结果是"></a>下列 JavaScript 代码执行后，运行的结果是</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>点击我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn"</span>);</span><br><span class="line"><span class="keyword">var</span> handler = &#123;</span><br><span class="line">  id: <span class="string">"_eventHandler"</span>,</span><br><span class="line">  exec: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.id);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">btn.addEventListener(<span class="string">"click"</span>, handler.exec.false);</span><br></pre></td></tr></table></figure>

<h3 id="输出结果是多少？"><a href="#输出结果是多少？" class="headerlink" title="输出结果是多少？"></a>输出结果是多少？</h3><p>1）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a; <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> b = a * <span class="number">0</span>; <span class="comment">// NaN</span></span><br><span class="line"><span class="keyword">if</span> (b == b) &#123;</span><br><span class="line">  <span class="comment">// false</span></span><br><span class="line">  <span class="built_in">console</span>.log(b * <span class="number">2</span> + <span class="string">"2"</span> - <span class="number">0</span> + <span class="number">4</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(!b * <span class="number">2</span> + <span class="string">"2"</span> - <span class="number">0</span> + <span class="number">4</span>); <span class="comment">// 22 + 4 = 26</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>答案：26</p>
<p>2）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">var a;</span></span><br><span class="line"><span class="regexp">var b = a * 0;</span></span><br><span class="line"><span class="regexp">if (b == b) &#123; /</span><span class="regexp">/ true</span></span><br><span class="line"><span class="regexp">       console.log(b * 2 + "2" - 0 + 4); /</span><span class="regexp">/ 6</span></span><br><span class="line"><span class="regexp">&#125; else &#123;</span></span><br><span class="line"><span class="regexp">       console.log(!b * 2 + "2" - 0 + 4);</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure>

<p>答案：6</p>
<p>3）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> t = t++;</span><br><span class="line">&#125;</span><br><span class="line">test(t);</span><br><span class="line"><span class="built_in">console</span>.log(t); <span class="comment">// 外部不能访问函数内的变量</span></span><br></pre></td></tr></table></figure>

<p>答案：10</p>
<p>4）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">test</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> t = test++;</span><br><span class="line">&#125;</span><br><span class="line">test(t);</span><br><span class="line"><span class="built_in">console</span>.log(t);</span><br></pre></td></tr></table></figure>

<p>答案：10</p>
<p>6）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">test</span>) </span>&#123;</span><br><span class="line">  t = test++;</span><br><span class="line">  <span class="built_in">console</span>.log(t);</span><br><span class="line">&#125;</span><br><span class="line">test(t);</span><br><span class="line"><span class="built_in">console</span>.log(t);</span><br></pre></td></tr></table></figure>

<p>答案：10</p>
<p>7）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">test</span>) </span>&#123;</span><br><span class="line">  t = t + test;</span><br><span class="line">  <span class="built_in">console</span>.log(t);</span><br><span class="line">  <span class="keyword">var</span> t = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line">test(t);</span><br><span class="line"><span class="built_in">console</span>.log(t);</span><br></pre></td></tr></table></figure>

<p>答案：NaN 10</p>
<p>8）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="keyword">var</span> b = a / <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (b == b) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(b * <span class="number">2</span> + <span class="string">"2"</span> - <span class="number">0</span> + <span class="number">4</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(!b * <span class="number">2</span> + <span class="string">"2"</span> - <span class="number">0</span> + <span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>答案：26</p>
<p>9）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">     <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">   var a;</span></span><br><span class="line"><span class="regexp">   var b = a /</span> <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">if</span> (b == b) &#123;</span><br><span class="line">       <span class="built_in">console</span>.log(b * <span class="number">2</span> + <span class="string">"2"</span> + <span class="number">4</span>);</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="built_in">console</span>.log(!b * <span class="number">2</span> + <span class="string">"2"</span> + <span class="number">4</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>答案：Infinity24</p>
<h3 id="下列-JavaScript-代码执行后，iNum-的值是"><a href="#下列-JavaScript-代码执行后，iNum-的值是" class="headerlink" title="下列 JavaScript 代码执行后，iNum 的值是"></a>下列 JavaScript 代码执行后，iNum 的值是</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> iNum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (i % <span class="number">5</span> == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  iNum++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(iNum);</span><br></pre></td></tr></table></figure>

<p>答案：8</p>
<h3 id="下列-JavaScript-代码执行后，依次打印的结果是"><a href="#下列-JavaScript-代码执行后，依次打印的结果是" class="headerlink" title="下列 JavaScript 代码执行后，依次打印的结果是"></a>下列 JavaScript 代码执行后，依次打印的结果是</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = (b = <span class="number">5</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">typeof</span> a);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">typeof</span> b);</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b);</span><br></pre></td></tr></table></figure>

<p>答案：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">number</span><br><span class="line">number</span><br><span class="line">undefined</span><br><span class="line">number</span><br></pre></td></tr></table></figure>

<h3 id="console-log-8-1-输出值是多少？"><a href="#console-log-8-1-输出值是多少？" class="headerlink" title="console.log( 8 | 1 ); 输出值是多少？"></a>console.log( 8 | 1 ); 输出值是多少？</h3><p>9</p>
<h3 id="请写出三种以上的-Firefox-有但-InternetExplorer-没有的属性和函数"><a href="#请写出三种以上的-Firefox-有但-InternetExplorer-没有的属性和函数" class="headerlink" title="请写出三种以上的 Firefox 有但 InternetExplorer 没有的属性和函数"></a>请写出三种以上的 Firefox 有但 InternetExplorer 没有的属性和函数</h3><p>1、在 IE 下可通过<code>document.frames[&quot;id&quot;];</code>得到该 IFRAME 对象，</p>
<p>而在火狐下则是通过<code>document.getElementById(&quot;content_panel_if&quot;).contentWindow;</code></p>
<p>2、IE 的写法： <code>_tbody=_table.childNodes[0]</code><br>在 FF 中，firefox 会在子节点中包含空白则第一个子节点为空白””， 而 ie 不会返回空白<br>可以通过<code>if(&quot;&quot; != node.nodeName)</code>过滤掉空白子对象</p>
<p>3、模拟点击事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.all) &#123;</span><br><span class="line">  <span class="comment">//ie下</span></span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"a3"</span>).click();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//非IE</span></span><br><span class="line">  <span class="keyword">var</span> evt = <span class="built_in">document</span>.createEvent(<span class="string">"MouseEvents"</span>);</span><br><span class="line">  evt.initEvent(<span class="string">"click"</span>, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"a3"</span>).dispatchEvent(evt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4、事件注册</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isIE) &#123;</span><br><span class="line">  <span class="built_in">window</span>.attachEvent(<span class="string">"onload"</span>, init);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, init, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写一个快速方法将-html-的-sup-提取转换为一个数组"><a href="#编写一个快速方法将-html-的-sup-提取转换为一个数组" class="headerlink" title="编写一个快速方法将 html 的 sup 提取转换为一个数组"></a>编写一个快速方法将 html 的 sup 提取转换为一个数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 编写一个快速方法将html的sup提取转换为一个数组，如：</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"气量(10&lt;sup&gt;8&lt;/sup&gt;m&lt;sup&gt;3&lt;/sup&gt;)"</span>;</span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="comment">// ['气量(10',8,'m',3,')']</span></span><br></pre></td></tr></table></figure>

<p>答案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法1</span></span><br><span class="line">str.split(<span class="regexp">/\&lt;\/?sup\&gt;/</span>);</span><br><span class="line"><span class="comment">// 方法2</span></span><br><span class="line">str.split(<span class="regexp">/&lt;[^&gt;]+&gt;/</span>);</span><br></pre></td></tr></table></figure>

<h3 id="求-num-的值"><a href="#求-num-的值" class="headerlink" title="求 num 的值"></a>求 num 的值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//   面试题1</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">123</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(num); <span class="comment">// 123</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">456</span>;</span><br><span class="line">  f1();</span><br><span class="line">&#125;</span><br><span class="line">f2();</span><br><span class="line"></span><br><span class="line"><span class="comment">//面试题1 变式</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">123</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(num); <span class="comment">// 456</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">456</span>;</span><br><span class="line">  f1(num);</span><br><span class="line">&#125;</span><br><span class="line">f2();</span><br><span class="line"></span><br><span class="line"><span class="comment">//面试题1  变式</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">123</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(num); <span class="comment">// 456</span></span><br><span class="line">&#125;</span><br><span class="line">f2();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  num = <span class="number">456</span>; <span class="comment">//这里是全局变量</span></span><br><span class="line">  f1();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// 456</span></span><br></pre></td></tr></table></figure>

<h3 id="有一个函数，参数是一个函数，返回值也是一个函数，返回的函数功能和入参的函数相似，但这个函数只能执行-3-次，再次执行无效，如何实现"><a href="#有一个函数，参数是一个函数，返回值也是一个函数，返回的函数功能和入参的函数相似，但这个函数只能执行-3-次，再次执行无效，如何实现" class="headerlink" title="有一个函数，参数是一个函数，返回值也是一个函数，返回的函数功能和入参的函数相似，但这个函数只能执行 3 次，再次执行无效，如何实现"></a>有一个函数，参数是一个函数，返回值也是一个函数，返回的函数功能和入参的函数相似，但这个函数只能执行 3 次，再次执行无效，如何实现</h3><p>这个题目是考察闭包的使用</p>
<p>答案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"hi"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">threeTimes</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> times = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (times++ <span class="xml"><span class="tag">&lt; <span class="attr">3</span>) &#123;</span></span></span><br><span class="line"><span class="xml">      fn();</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  &#125;;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">const newFn = threeTimes(sayHi);</span></span><br><span class="line"><span class="xml">newFn();</span></span><br><span class="line"><span class="xml">newFn();</span></span><br><span class="line"><span class="xml">newFn();</span></span><br><span class="line"><span class="xml">newFn();</span></span><br><span class="line"><span class="xml">newFn(); // 后面两次执行都无任何反应</span></span><br></pre></td></tr></table></figure>

<p>通过闭包变量 <code>times</code> 来控制函数的执行</p>
<h3 id="实现-add-函数-让-add-a-b-和-add-a-b-两种调用结果相同"><a href="#实现-add-函数-让-add-a-b-和-add-a-b-两种调用结果相同" class="headerlink" title="实现 add 函数,让 add(a)(b)和 add(a,b)两种调用结果相同"></a>实现 add 函数,让 add(a)(b)和 add(a,b)两种调用结果相同</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (b === <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> a + x;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="格式化金钱，每千分位加逗号"><a href="#格式化金钱，每千分位加逗号" class="headerlink" title="格式化金钱，每千分位加逗号"></a>格式化金钱，每千分位加逗号</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> s = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = str.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    s = str[i] + s;</span><br><span class="line">    count++;</span><br><span class="line">    <span class="keyword">if</span> (count % <span class="number">3</span> == <span class="number">0</span> &amp;&amp; i != <span class="number">0</span>) &#123;</span><br><span class="line">      s = <span class="string">","</span> + s;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.replace(<span class="regexp">/(\d)(?=(?:\d&#123;3&#125;)+$)/g</span>, <span class="string">"$1,"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="反转数组"><a href="#反转数组" class="headerlink" title="反转数组"></a>反转数组</h3><p><strong>要求</strong></p>
<p><strong>input</strong>: I am a student <br><br><strong>output</strong>: student a am I <br><br>输入是数组 输出也是数组<br><br>不允许用 <code>split</code> <code>splice</code> <code>reverse</code><br></p>
<p>答案：</p>
<p><strong>解法一</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverseArry</span>(<span class="params">arry</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> str = arry.join(<span class="string">" "</span>);</span><br><span class="line">  <span class="keyword">const</span> result = [];</span><br><span class="line">  <span class="keyword">let</span> word = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = str.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (str[i] != <span class="string">" "</span>) &#123;</span><br><span class="line">      word += str[i];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      result.unshift(word);</span><br><span class="line">      word = <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  result.unshift(word);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reverseArry([<span class="string">"I"</span>, <span class="string">"am"</span>, <span class="string">"a"</span>, <span class="string">"student"</span>]));</span><br><span class="line"><span class="comment">// ["student", "a", "am", "I"]</span></span><br></pre></td></tr></table></figure>

<p><strong>解法二</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverseArry</span>(<span class="params">arry</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = [];</span><br><span class="line">  <span class="keyword">const</span> distance = arry.length - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = distance; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    result[distance - i] = arry[i];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="说出以下函数的作用是？空白区域应该填写什么？"><a href="#说出以下函数的作用是？空白区域应该填写什么？" class="headerlink" title="说出以下函数的作用是？空白区域应该填写什么？"></a>说出以下函数的作用是？空白区域应该填写什么？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//define</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">window</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.str = str;</span><br><span class="line">  &#125;</span><br><span class="line">  fn.prototype.format = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arg = ______;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.str.replace(_____, <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> arg[b] || <span class="string">""</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="built_in">window</span>.fn = fn;</span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br><span class="line"><span class="comment">//use</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> t = <span class="keyword">new</span> fn(<span class="string">'&lt;p&gt;&lt;a href="&#123;0&#125;"&gt;&#123;1&#125;&lt;/a&gt;&lt;span&gt;&#123;2&#125;&lt;/span&gt;&lt;/p&gt;'</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(t.format(<span class="string">"http://www.alibaba.com"</span>, <span class="string">"Alibaba"</span>, <span class="string">"Welcome"</span>));</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>答案：访函数的作用是使用 format 函数将函数的参数替换掉{0}这样的内容，返回一个格式化后的结果：<br>第一个空是：arguments<br>第二个空是：/{(\d+)}/ig</p>
<h3 id="原生-JS-的-window-onload-与-Jquery-的-document-ready-function-有什么不同？如何用原生-JS-实现-Jq-的-ready-方法？"><a href="#原生-JS-的-window-onload-与-Jquery-的-document-ready-function-有什么不同？如何用原生-JS-实现-Jq-的-ready-方法？" class="headerlink" title="原生 JS 的 window.onload 与 Jquery 的$(document).ready(function(){})有什么不同？如何用原生 JS 实现 Jq 的 ready 方法？"></a>原生 JS 的 window.onload 与 Jquery 的$(document).ready(function(){})有什么不同？如何用原生 JS 实现 Jq 的 ready 方法？</h3><p>window.onload()方法是必须等到页面内包括图片的所有元素加载完毕后才能执行。<br>$(document).ready()是 DOM 结构绘制完毕后就执行，不必等到加载完毕。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 传递函数给whenReady()</span></span><br><span class="line"><span class="comment"> * 当文档解析完毕且为操作准备就绪时，函数作为document的方法调用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> whenReady = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//这个函数返回whenReady()函数</span></span><br><span class="line">  <span class="keyword">var</span> funcs = []; <span class="comment">//当获得事件时，要运行的函数</span></span><br><span class="line">  <span class="keyword">var</span> ready = <span class="literal">false</span>; <span class="comment">//当触发事件处理程序时,切换为true //当文档就绪时,调用事件处理程序</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handler</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ready) <span class="keyword">return</span>; <span class="comment">//确保事件处理程序只完整运行一次 //如果发生onreadystatechange事件，但其状态不是complete的话,那么文档尚未准备好</span></span><br><span class="line">    <span class="keyword">if</span> (e.type === <span class="string">"onreadystatechange"</span> &amp;&amp; <span class="built_in">document</span>.readyState !== <span class="string">"complete"</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125; <span class="comment">//运行所有注册函数 //注意每次都要计算funcs.length //以防这些函数的调用可能会导致注册更多的函数</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; funcs.length; i++) &#123;</span><br><span class="line">      funcs[i].call(<span class="built_in">document</span>);</span><br><span class="line">    &#125; <span class="comment">//事件处理函数完整执行,切换ready状态, 并移除所有函数</span></span><br><span class="line">    ready = <span class="literal">true</span>;</span><br><span class="line">    funcs = <span class="literal">null</span>;</span><br><span class="line">  &#125; <span class="comment">//为接收到的任何事件注册处理程序</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.addEventListener) &#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>, handler, <span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">"readystatechange"</span>, handler, <span class="literal">false</span>); <span class="comment">//IE9+</span></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, handler, <span class="literal">false</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.attachEvent) &#123;</span><br><span class="line">    <span class="built_in">document</span>.attachEvent(<span class="string">"onreadystatechange"</span>, handler);</span><br><span class="line">    <span class="built_in">window</span>.attachEvent(<span class="string">"onload"</span>, handler);</span><br><span class="line">  &#125; <span class="comment">//返回whenReady()函数</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">whenReady</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ready) &#123;</span><br><span class="line">      fn.call(<span class="built_in">document</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      funcs.push(fn);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>如果上述代码十分难懂，下面这个简化版：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ready</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.addEventListener) &#123;</span><br><span class="line">    <span class="comment">//标准浏览器</span></span><br><span class="line">    <span class="built_in">document</span>.addEventListener(</span><br><span class="line">      <span class="string">"DOMContentLoaded"</span>,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//注销事件, 避免反复触发</span></span><br><span class="line">        <span class="built_in">document</span>.removeEventListener(</span><br><span class="line">          <span class="string">"DOMContentLoaded"</span>,</span><br><span class="line">          <span class="built_in">arguments</span>.callee,</span><br><span class="line">          <span class="literal">false</span></span><br><span class="line">        );</span><br><span class="line">        fn(); <span class="comment">//执行函数</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="literal">false</span></span><br><span class="line">    );</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.attachEvent) &#123;</span><br><span class="line">    <span class="comment">//IE</span></span><br><span class="line">    <span class="built_in">document</span>.attachEvent(<span class="string">"onreadystatechange"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">document</span>.readyState == <span class="string">"complete"</span>) &#123;</span><br><span class="line">        <span class="built_in">document</span>.detachEvent(<span class="string">"onreadystatechange"</span>, <span class="built_in">arguments</span>.callee);</span><br><span class="line">        fn(); <span class="comment">//函数执行</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="对作用域上下文和-this-的理解，看下列代码："><a href="#对作用域上下文和-this-的理解，看下列代码：" class="headerlink" title="对作用域上下文和 this 的理解，看下列代码："></a>对作用域上下文和 this 的理解，看下列代码：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> User = &#123;</span><br><span class="line">  count: <span class="number">1</span>,</span><br><span class="line">  getCount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.count;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(User.getCount()); <span class="comment">// what?</span></span><br><span class="line"><span class="keyword">var</span> func = User.getCount;</span><br><span class="line"><span class="built_in">console</span>.log(func()); <span class="comment">// what?</span></span><br></pre></td></tr></table></figure>

<p>问两处 console 输出什么？为什么？</p>
<p>答案：1 和 undefined。func 是在 winodw 的上下文中被执行的，所以会访问不到 count 属性。</p>
<p>解析：</p>
<p>继续追问，那么如何确保 Uesr 总是能访问到 func 的上下文，即正确返回 1。正确的方法是使用 Function.prototype.bind。兼容各个浏览器完整代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind =</span><br><span class="line">  <span class="built_in">Function</span>.prototype.bind ||</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> self.apply(context, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="keyword">var</span> func = User.getCount.bind(User);</span><br><span class="line"><span class="built_in">console</span>.log(func());</span><br></pre></td></tr></table></figure>

<h3 id="在-Javascript-中什么是伪数组？如何将伪数组转化为标准数组？"><a href="#在-Javascript-中什么是伪数组？如何将伪数组转化为标准数组？" class="headerlink" title="在 Javascript 中什么是伪数组？如何将伪数组转化为标准数组？"></a>在 Javascript 中什么是伪数组？如何将伪数组转化为标准数组？</h3><p>伪数组（类数组）：无法直接调用数组方法或期望 length 属性有什么特殊的行为，但仍可以对真正数组遍历方法来遍历它们。典型的是函数的 argument 参数，还有像调用 getElementsByTagName,document.childNodes 之类的,它们都返回 NodeList 对象都属于伪数组。可以使用 Array.prototype.slice.call(fakeArray)将数组转化为真正的 Array 对象。</p>
<p>假设我们要给每个 log 方法添加一个”(app)”前缀，比如’hello world!’ -&gt;’(app)hello world!’。方法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>); <span class="comment">//为了使用unshift数组方法，将argument转化为真正的数组</span></span><br><span class="line">  args.unshift(<span class="string">"(app)"</span>);</span><br><span class="line">  <span class="built_in">console</span>.log.apply(<span class="built_in">console</span>, args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="定义一个-log-方法，让它可以代理-console-log-的方法。"><a href="#定义一个-log-方法，让它可以代理-console-log-的方法。" class="headerlink" title="定义一个 log 方法，让它可以代理 console.log 的方法。"></a>定义一个 log 方法，让它可以代理 console.log 的方法。</h3><p>可行的方法一：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(msg);</span><br><span class="line">&#125;</span><br><span class="line">log(<span class="string">"hello world!"</span>); <span class="comment">// hello world!</span></span><br></pre></td></tr></table></figure>

<p>如果要传入多个参数呢？显然上面的方法不能满足要求，所以更好的方法是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log.apply(<span class="built_in">console</span>, <span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>到此，追问 apply 和 call 方法的异同。</p>
<p>对于 apply 和 call 两者在作用上是相同的，即是调用一个对象的一个方法，以另一个对象替换当前对象。将一个函数的对象上下文从初始的上下文改变为由 thisObj 指定的新对象。</p>
<p>但两者在参数上有区别的。对于第一个参数意义都一样，但对第二个参数： apply 传入的是一个参数数组，也就是将多个参数组合成为一个数组传入，而 call 则作为 call 的参数传入（从第二个参数开始）。  如 func.call(func1,var1,var2,var3)对应的 apply 写法为：func.apply(func1,[var1,var2,var3]) 。</p>
<h3 id="给-String-对象添加一个方法，传入一个-string-类型的参数，然后将-string-的每个字符间价格空格返回，例如：addSpace-“hello-world”-gt-‘h-e-l-l-o-w-o-r-l-d’"><a href="#给-String-对象添加一个方法，传入一个-string-类型的参数，然后将-string-的每个字符间价格空格返回，例如：addSpace-“hello-world”-gt-‘h-e-l-l-o-w-o-r-l-d’" class="headerlink" title="给 String 对象添加一个方法，传入一个 string 类型的参数，然后将 string 的每个字符间价格空格返回，例如：addSpace(“hello world”) // -&gt; ‘h e l l o  w o r l d’"></a>给 String 对象添加一个方法，传入一个 string 类型的参数，然后将 string 的每个字符间价格空格返回，例如：addSpace(“hello world”) // -&gt; ‘h e l l o  w o r l d’</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.spacify = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.split(<span class="string">""</span>).join(<span class="string">" "</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>接着上述问题答案提问，1）直接在对象的原型上添加方法是否安全？尤其是在 Object 对象上。(这个我没能答出？希望知道的说一下。)　 2）函数声明与函数表达式的区别？<br>答案：在 js 中，解析器在向执行环境中加载数据时，对函数声明和函数表达式并非是一视同仁的，解析器会率先读取函数声明，并使其在执行任何代码之前可用（可以访问），至于函数表达式，则必须等到解析器执行到它所在的代码行，才会真正被解析执行。</p>
<h3 id="请评价以下代码并给出改进意见"><a href="#请评价以下代码并给出改进意见" class="headerlink" title="请评价以下代码并给出改进意见"></a>请评价以下代码并给出改进意见</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) &#123;</span><br><span class="line">  <span class="keyword">var</span> addListener = <span class="function"><span class="keyword">function</span>(<span class="params">el, type, listener, useCapture</span>) </span>&#123;</span><br><span class="line">    el.addEventListener(type, listener, useCapture);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.all) &#123;</span><br><span class="line">  addListener = <span class="function"><span class="keyword">function</span>(<span class="params">el, type, listener</span>) </span>&#123;</span><br><span class="line">    el.attachEvent(<span class="string">"on"</span> + type, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      listener.apply(el);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>不应该在 if 和 else 语句中声明 addListener 函数，应该先声明；</li>
<li>不需要使用 window.addEventListener 或 document.all 来进行检测浏览器，应该使用能力检测； *　由于 attachEvent 在 IE 中有 this 指向问题，所以调用它时需要处理一下</li>
</ul>
<p>改进如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">elem, type, handler</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (elem.addEventListener) &#123;</span><br><span class="line">    elem.addEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (elem.attachEvent) &#123;</span><br><span class="line">    elem[<span class="string">"temp"</span> + type + handler] = handler;</span><br><span class="line">    elem[type + handler] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      elem[<span class="string">"temp"</span> + type + handler].apply(elem);</span><br><span class="line">    &#125;;</span><br><span class="line">    elem.attachEvent(<span class="string">"on"</span> + type, elem[type + handler]);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    elem[<span class="string">"on"</span> + type] = handler;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写一个-JavaScript-函数，输入指定类型的选择器-仅需支持-id，class，tagName-三种简单-CSS-选择器，无需兼容组合选择器-可以返回匹配的-DOM-节点，需考虑浏览器兼容性和性能。"><a href="#编写一个-JavaScript-函数，输入指定类型的选择器-仅需支持-id，class，tagName-三种简单-CSS-选择器，无需兼容组合选择器-可以返回匹配的-DOM-节点，需考虑浏览器兼容性和性能。" class="headerlink" title="编写一个 JavaScript 函数，输入指定类型的选择器(仅需支持 id，class，tagName 三种简单 CSS 选择器，无需兼容组合选择器)可以返回匹配的 DOM 节点，需考虑浏览器兼容性和性能。"></a>编写一个 JavaScript 函数，输入指定类型的选择器(仅需支持 id，class，tagName 三种简单 CSS 选择器，无需兼容组合选择器)可以返回匹配的 DOM 节点，需考虑浏览器兼容性和性能。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** @param selector &#123;String&#125; 传入的CSS选择器。* @return &#123;Array&#125;*/</span></span><br><span class="line"><span class="keyword">var</span> query = <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="regexp">/^(#)?(\.)?(\w+)$/gim</span>;</span><br><span class="line">  <span class="keyword">var</span> regResult = reg.exec(selector);</span><br><span class="line">  <span class="keyword">var</span> result = [];</span><br><span class="line">  <span class="comment">//如果是id选择器</span></span><br><span class="line">  <span class="keyword">if</span> (regResult[<span class="number">1</span>]) &#123;</span><br><span class="line">    <span class="keyword">if</span> (regResult[<span class="number">3</span>]) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">document</span>.querySelector === <span class="string">"function"</span>) &#123;</span><br><span class="line">        result.push(<span class="built_in">document</span>.querySelector(regResult[<span class="number">3</span>]));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result.push(<span class="built_in">document</span>.getElementById(regResult[<span class="number">3</span>]));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="comment">//如果是class选择器</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (regResult[<span class="number">2</span>]) &#123;</span><br><span class="line">    <span class="keyword">if</span> (regResult[<span class="number">3</span>]) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">document</span>.getElementsByClassName === <span class="string">"function"</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> doms = <span class="built_in">document</span>.getElementsByClassName(regResult[<span class="number">3</span>]);</span><br><span class="line">        <span class="keyword">if</span> (doms) &#123;</span><br><span class="line">          result = converToArray(doms);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="comment">//如果不支持getElementsByClassName函数</span></span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> allDoms = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"*"</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = allDoms.length; i &lt; len; i++) &#123;</span><br><span class="line">          <span class="keyword">if</span> (allDoms[i].className.search(<span class="keyword">new</span> <span class="built_in">RegExp</span>(regResult[<span class="number">2</span>])) &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">            result.push(allDoms[i]);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="comment">//如果是标签选择器</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (regResult[<span class="number">3</span>]) &#123;</span><br><span class="line">    <span class="keyword">var</span> doms = <span class="built_in">document</span>.getElementsByTagName(regResult[<span class="number">3</span>].toLowerCase());</span><br><span class="line">    <span class="keyword">if</span> (doms) &#123;</span><br><span class="line">      result = converToArray(doms);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">converToArray</span>(<span class="params">nodes</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> array = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    array = <span class="built_in">Array</span>.prototype.slice.call(nodes, <span class="number">0</span>); <span class="comment">//针对非IE浏览器</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (ex) &#123;</span><br><span class="line">    array = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = nodes.length; i &lt; len; i++) &#123;</span><br><span class="line">      array.push(nodes[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="下列控制台都输出什么"><a href="#下列控制台都输出什么" class="headerlink" title="下列控制台都输出什么"></a>下列控制台都输出什么</h3><p>第 1 题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  name = <span class="string">"张三"</span>;</span><br><span class="line">&#125;</span><br><span class="line">setName();</span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br></pre></td></tr></table></figure>

<p>答案：”张三”</p>
<p>第 2 题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//考点：1、变量声明提升 2、变量搜索机制</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">test();</span><br></pre></td></tr></table></figure>

<p>答案：undefined</p>
<p>第 3 题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">window</span>.b = <span class="number">3</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(b);</span><br><span class="line">&#125;</span><br><span class="line">test2();</span><br></pre></td></tr></table></figure>

<p>答案：3</p>
<p>第 4 题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">c = <span class="number">5</span>; <span class="comment">//声明一个全局变量c</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">window</span>.c = <span class="number">3</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(c); <span class="comment">//答案：undefined，原因：由于此时的c是一个局部变量c，并且没有被赋值</span></span><br><span class="line">  <span class="keyword">var</span> c;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">window</span>.c); <span class="comment">//答案：3，原因：这里的c就是一个全局变量c</span></span><br><span class="line">&#125;</span><br><span class="line">test3();</span><br></pre></td></tr></table></figure>

<p>第 5 题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line">arr[<span class="number">0</span>] = <span class="string">"a"</span>;</span><br><span class="line">arr[<span class="number">1</span>] = <span class="string">"b"</span>;</span><br><span class="line">arr[<span class="number">10</span>] = <span class="string">"c"</span>;</span><br><span class="line">alert(arr.length); <span class="comment">//答案：11</span></span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">5</span>]); <span class="comment">//答案：undefined</span></span><br></pre></td></tr></table></figure>

<p>第 6 题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a++); <span class="comment">//答案：1</span></span><br><span class="line"><span class="built_in">console</span>.log(++a); <span class="comment">//答案：3</span></span><br></pre></td></tr></table></figure>

<p>第 7 题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="literal">null</span> == <span class="literal">undefined</span>); <span class="comment">//答案：true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"1"</span> == <span class="number">1</span>); <span class="comment">//答案：true，因为会将数字1先转换为字符串1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"1"</span> === <span class="number">1</span>); <span class="comment">//答案：false，因为数据类型不一致</span></span><br></pre></td></tr></table></figure>

<p>第 8 题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">1</span>;</span><br><span class="line">(<span class="string">"number"</span>);</span><br><span class="line"><span class="keyword">typeof</span> <span class="string">"hello"</span>;</span><br><span class="line">(<span class="string">"string"</span>);</span><br><span class="line"><span class="keyword">typeof</span> /[<span class="number">0</span><span class="number">-9</span>]/;</span><br><span class="line">(<span class="string">"object"</span>);</span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125;;</span><br><span class="line">(<span class="string">"object"</span>);</span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>;</span><br><span class="line">(<span class="string">"object"</span>);</span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>;</span><br><span class="line">(<span class="string">"undefined"</span>);</span><br><span class="line"><span class="keyword">typeof</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">(<span class="string">"object"</span>);</span><br><span class="line"><span class="keyword">typeof</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;; <span class="comment">//"function"</span></span><br></pre></td></tr></table></figure>

<p>第 9 题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="number">3.14</span>); <span class="comment">//3</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">"3asdf"</span>); <span class="comment">//3</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"1.23abc456"</span>);</span><br><span class="line"><span class="built_in">parseInt</span>(<span class="literal">true</span>); <span class="comment">//"true" NaN</span></span><br></pre></td></tr></table></figure>

<p>第 10 题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//考点：函数声明提前</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> foo;</span><br><span class="line">  foo = <span class="number">10</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="comment">//var foo = 11;</span></span><br><span class="line">&#125;</span><br><span class="line">alert(<span class="keyword">typeof</span> bar()); <span class="comment">//"function"</span></span><br></pre></td></tr></table></figure>

<p>第 11 题：考点：函数声明提前</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  foo = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">bar();</span><br><span class="line">alert(foo); <span class="comment">//答案：1</span></span><br></pre></td></tr></table></figure>

<p>第 12 题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//是一个函数</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">////3</span></span><br></pre></td></tr></table></figure>

<p>第 13 题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//考点：对arguments的操作</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>] = <span class="number">2</span>;</span><br><span class="line">    alert(a);<span class="comment">//答案：2，因为：a、arguments是对实参的访问，b、通过arguments[i]可以修改指定实参的值</span></span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">1</span>);</span><br><span class="line"><span class="number">265</span>、第<span class="number">14</span>题：</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    alert(<span class="built_in">arguments</span>.length);<span class="comment">//答案：3，因为arguments是对实参的访问</span></span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<p>第 15 题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bar(); <span class="comment">//报错</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"hello"</span> + name);</span><br><span class="line">  <span class="built_in">console</span>.log(bar);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//alert(typeof bar);</span></span><br><span class="line">foo(<span class="string">"world"</span>); <span class="comment">//"hello"</span></span><br><span class="line"><span class="built_in">console</span>.log(bar); <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(foo.toString());</span><br><span class="line">bar(); <span class="comment">//报错</span></span><br></pre></td></tr></table></figure>

<h3 id="下面程序输出的结果是什么？"><a href="#下面程序输出的结果是什么？" class="headerlink" title="下面程序输出的结果是什么？"></a>下面程序输出的结果是什么？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function sayHi() &#123;</span><br><span class="line">  console.log(name);</span><br><span class="line">  console.log(age);</span><br><span class="line">  var name = &quot;Lydia&quot;;</span><br><span class="line">  let age = 21;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sayHi();</span><br><span class="line">A: Lydia 和 undefined</span><br><span class="line">B: Lydia 和 ReferenceError</span><br><span class="line">C: ReferenceError 和 21</span><br><span class="line">D: undefined 和 ReferenceError</span><br></pre></td></tr></table></figure>

<p>参考答案</p>
<p>在函数中，我们首先使用var关键字声明了name变量。 这意味着变量在创建阶段会被提升（JavaScript会在创建变量创建阶段为其分配内存空间），默认值为undefined，直到我们实际执行到使用该变量的行。 我们还没有为name变量赋值，所以它仍然保持undefined的值。</p>
<p>使用let关键字（和const）声明的变量也会存在变量提升，但与var不同，初始化没有被提升。 在我们声明（初始化）它们之前，它们是不可访问的。 这被称为“暂时死区”。 当我们在声明变量之前尝试访问变量时，JavaScript会抛出一个ReferenceError。</p>
<p>关于let的是否存在变量提升，我们何以用下面的例子来验证：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let name = &apos;ConardLi&apos;</span><br><span class="line">&#123;</span><br><span class="line">  console.log(name) // Uncaught ReferenceError: name is not defined</span><br><span class="line">  let name = &apos;code秘密花园&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>let变量如果不存在变量提升，console.log(name)就会输出ConardLi，结果却抛出了ReferenceError，那么这很好的说明了，let也存在变量提升，但是它存在一个“暂时死区”，在变量未初始化或赋值前不允许访问。</p>
<p>变量的赋值可以分为三个阶段：</p>
<p>创建变量，在内存中开辟空间<br>初始化变量，将变量初始化为undefined<br>真正赋值<br>关于let、var和function：</p>
<p>let的「创建」过程被提升了，但是初始化没有提升。<br>var的「创建」和「初始化」都被提升了。<br>function的「创建」「初始化」和「赋值」都被提升了。</p>
<h3 id="下面代码输出什么"><a href="#下面代码输出什么" class="headerlink" title="下面代码输出什么"></a>下面代码输出什么</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var a = 10;</span><br><span class="line">(function () &#123;</span><br><span class="line">    console.log(a)</span><br><span class="line">    a = 5</span><br><span class="line">    console.log(window.a)</span><br><span class="line">    var a = 20;</span><br><span class="line">    console.log(a)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<p>依次输出：undefined -&gt; 10 -&gt; 20</p>
<p>在立即执行函数中，var a = 20; 语句定义了一个局部变量 a，由于js的变量声明提升机制，局部变量a的声明会被提升至立即执行函数的函数体最上方，且由于这样的提升并不包括赋值，因此第一条打印语句会打印undefined，最后一条语句会打印20。</p>
<p>由于变量声明提升，a = 5; 这条语句执行时，局部的变量a已经声明，因此它产生的效果是对局部的变量a赋值，此时window.a 依旧是最开始赋值的10，</p>
<h3 id="下面的输出结果是什么？"><a href="#下面的输出结果是什么？" class="headerlink" title="下面的输出结果是什么？"></a>下面的输出结果是什么？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class Chameleon &#123;</span><br><span class="line">  static colorChange(newColor) &#123;</span><br><span class="line">    this.newColor = newColor;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  constructor(&#123; newColor = &quot;green&quot; &#125; = &#123;&#125;) &#123;</span><br><span class="line">    this.newColor = newColor;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const freddie = new Chameleon(&#123; newColor: &quot;purple&quot; &#125;);</span><br><span class="line">freddie.colorChange(&quot;orange&quot;);</span><br></pre></td></tr></table></figure>

<p>A: orange<br>B: purple<br>C: green<br>D: TypeError<br>答案: D</p>
<p>colorChange方法是静态的。 静态方法仅在创建它们的构造函数中存在，并且不能传递给任何子级。 由于freddie是一个子级对象，函数不会传递，所以在freddie实例上不存在freddie方法：抛出TypeError。</p>
<h3 id="下面代码中什么时候会输出1？"><a href="#下面代码中什么时候会输出1？" class="headerlink" title="下面代码中什么时候会输出1？"></a>下面代码中什么时候会输出1？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a = ?;</span><br><span class="line">if(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3)&#123;</span><br><span class="line">     conso.log(1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为==会进行隐式类型转换 所以我们重写toString方法就可以了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var a = &#123;</span><br><span class="line">  i: 1,</span><br><span class="line">  toString() &#123;</span><br><span class="line">    return a.i++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if( a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3 ) &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="下面的输出结果是什么？-1"><a href="#下面的输出结果是什么？-1" class="headerlink" title="下面的输出结果是什么？"></a>下面的输出结果是什么？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">    &apos;2&apos;: 3,</span><br><span class="line">    &apos;3&apos;: 4,</span><br><span class="line">    &apos;length&apos;: 2,</span><br><span class="line">    &apos;splice&apos;: Array.prototype.splice,</span><br><span class="line">    &apos;push&apos;: Array.prototype.push</span><br><span class="line">&#125;</span><br><span class="line">obj.push(1)</span><br><span class="line">obj.push(2)</span><br><span class="line">console.log(obj)</span><br></pre></td></tr></table></figure>

<p>参考答案</p>
<p>1.使用第一次push，obj对象的push方法设置 obj[2]=1;obj.length+=1<br>2.使用第二次push，obj对象的push方法设置 obj[3]=2;obj.length+=1<br>3.使用console.log输出的时候，因为obj具有 length 属性和 splice 方法，故将其作为数组进行打印<br>4.打印时因为数组未设置下标为 0 1 处的值，故打印为empty，主动 obj[0] 获取为 undefined</p>
<h3 id="下面代码输出的结果是什么？"><a href="#下面代码输出的结果是什么？" class="headerlink" title="下面代码输出的结果是什么？"></a>下面代码输出的结果是什么？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var a = &#123;n: 1&#125;;</span><br><span class="line">var b = a;</span><br><span class="line">a.x = a = &#123;n: 2&#125;;</span><br><span class="line"></span><br><span class="line">console.log(a.x)     </span><br><span class="line">console.log(b.x)</span><br></pre></td></tr></table></figure>

<p>参考答案</p>
<p>undefined<br>{n:2}</p>
<p>首先，a和b同时引用了{n:2}对象，接着执行到a.x = a = {n：2}语句，尽管赋值是从右到左的没错，但是.的优先级比=要高，所以这里首先执行a.x，相当于为a（或者b）所指向的{n:1}对象新增了一个属性x，即此时对象将变为{n:1;x:undefined}。之后按正常情况，从右到左进行赋值，此时执行a ={n:2}的时候，a的引用改变，指向了新对象{n：2},而b依然指向的是旧对象。之后执行a.x = {n：2}的时候，并不会重新解析一遍a，而是沿用最初解析a.x时候的a，也即旧对象，故此时旧对象的x的值为{n：2}，旧对象为 {n:1;x:{n：2}}，它被b引用着。<br>后面输出a.x的时候，又要解析a了，此时的a是指向新对象的a，而这个新对象是没有x属性的，故访问时输出undefined；而访问b.x的时候，将输出旧对象的x的值，即{n:2}。</p>
<h3 id="下面代码的输出是什么"><a href="#下面代码的输出是什么" class="headerlink" title="下面代码的输出是什么?"></a>下面代码的输出是什么?</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function checkAge(data) &#123;</span><br><span class="line">  if (data === &#123; age: 18 &#125;) &#123;</span><br><span class="line">    console.log(&quot;You are an adult!&quot;);</span><br><span class="line">  &#125; else if (data == &#123; age: 18 &#125;) &#123;</span><br><span class="line">    console.log(&quot;You are still an adult.&quot;);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    console.log(`Hmm.. You don&apos;t have an age I guess`);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">checkAge(&#123; age: 18 &#125;);</span><br></pre></td></tr></table></figure>

<p>参考答案</p>
<p>Hmm.. You don’t have an age I guess<br>在比较相等性，原始类型通过它们的值进行比较，而对象通过它们的引用进行比较。JavaScript检查对象是否具有对内存中相同位置的引用。</p>
<p>我们作为参数传递的对象和我们用于检查相等性的对象在内存中位于不同位置，所以它们的引用是不同的。</p>
<p>这就是为什么{ age: 18 } === { age: 18 }和 { age: 18 } == { age: 18 }返回 false的原因。</p>
<h3 id="下面代码的输出是什么-1"><a href="#下面代码的输出是什么-1" class="headerlink" title="下面代码的输出是什么?"></a>下面代码的输出是什么?</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123; 1: &quot;a&quot;, 2: &quot;b&quot;, 3: &quot;c&quot; &#125;;</span><br><span class="line">const set = new Set([1, 2, 3, 4, 5]);</span><br><span class="line"></span><br><span class="line">obj.hasOwnProperty(&quot;1&quot;);</span><br><span class="line">obj.hasOwnProperty(1);</span><br><span class="line">set.has(&quot;1&quot;);</span><br><span class="line">set.has(1);</span><br></pre></td></tr></table></figure>

<p>参考答案</p>
<p>true  true  false  true<br>所有对象键（不包括Symbols）都会被存储为字符串，即使你没有给定字符串类型的键。 这就是为什么obj.hasOwnProperty（’1’）也返回true。</p>
<p>上面的说法不适用于Set。 在我们的Set中没有“1”：set.has（’1’）返回false。 它有数字类型1，set.has（1）返回true。</p>
<h3 id="下面代码的输出是什么-2"><a href="#下面代码的输出是什么-2" class="headerlink" title="下面代码的输出是什么?"></a>下面代码的输出是什么?</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// example 1</span><br><span class="line">var a=&#123;&#125;, b=&apos;123&apos;, c=123;  </span><br><span class="line">a[b]=&apos;b&apos;;</span><br><span class="line">a[c]=&apos;c&apos;;  </span><br><span class="line">console.log(a[b]);</span><br><span class="line"></span><br><span class="line">// example 2</span><br><span class="line">var a=&#123;&#125;, b=Symbol(&apos;123&apos;), c=Symbol(&apos;123&apos;);  </span><br><span class="line">a[b]=&apos;b&apos;;</span><br><span class="line">a[c]=&apos;c&apos;;  </span><br><span class="line">console.log(a[b]);</span><br><span class="line"></span><br><span class="line">// example 3</span><br><span class="line">var a=&#123;&#125;, b=&#123;key:&apos;123&apos;&#125;, c=&#123;key:&apos;456&apos;&#125;;  </span><br><span class="line">a[b]=&apos;b&apos;;</span><br><span class="line">a[c]=&apos;c&apos;;  </span><br><span class="line">console.log(a[b]);</span><br></pre></td></tr></table></figure>

<p>参考答案</p>
<p>这题考察的是对象的键名的转换。</p>
<p>对象的键名只能是字符串和 Symbol 类型。<br>其他类型的键名会被转换成字符串类型。<br>对象转字符串默认会调用 toString 方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// example 1</span><br><span class="line">var a=&#123;&#125;, b=&apos;123&apos;, c=123;</span><br><span class="line">a[b]=&apos;b&apos;;</span><br><span class="line">// c 的键名会被转换成字符串&apos;123&apos;，这里会把 b 覆盖掉。</span><br><span class="line">a[c]=&apos;c&apos;;  </span><br><span class="line">// 输出 c</span><br><span class="line">console.log(a[b]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// example 2</span><br><span class="line">var a=&#123;&#125;, b=Symbol(&apos;123&apos;), c=Symbol(&apos;123&apos;);  </span><br><span class="line">// b 是 Symbol 类型，不需要转换。</span><br><span class="line">a[b]=&apos;b&apos;;</span><br><span class="line">// c 是 Symbol 类型，不需要转换。任何一个 Symbol 类型的值都是不相等的，所以不会覆盖掉 b。</span><br><span class="line">a[c]=&apos;c&apos;;</span><br><span class="line">// 输出 b</span><br><span class="line">console.log(a[b]);</span><br><span class="line"></span><br><span class="line">// example 3</span><br><span class="line">var a=&#123;&#125;, b=&#123;key:&apos;123&apos;&#125;, c=&#123;key:&apos;456&apos;&#125;;  </span><br><span class="line">// b 不是字符串也不是 Symbol 类型，需要转换成字符串。</span><br><span class="line">// 对象类型会调用 toString 方法转换成字符串 [object Object]。</span><br><span class="line">a[b]=&apos;b&apos;;</span><br><span class="line">// c 不是字符串也不是 Symbol 类型，需要转换成字符串。</span><br><span class="line">// 对象类型会调用 toString 方法转换成字符串 [object Object]。这里会把 b 覆盖掉。</span><br><span class="line">a[c]=&apos;c&apos;;  </span><br><span class="line">// 输出 c</span><br><span class="line">console.log(a[b]);</span><br></pre></td></tr></table></figure>

<h3 id="下面代码的输出是什么-3"><a href="#下面代码的输出是什么-3" class="headerlink" title="下面代码的输出是什么?"></a>下面代码的输出是什么?</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(() =&gt; &#123;</span><br><span class="line">  let x, y;</span><br><span class="line">  try &#123;</span><br><span class="line">    throw new Error();</span><br><span class="line">  &#125; catch (x) &#123;</span><br><span class="line">    (x = 1), (y = 2);</span><br><span class="line">    console.log(x);</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(x);</span><br><span class="line">  console.log(y);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>参考答案</p>
<p>1  undefined  2<br>catch块接收参数x。当我们传递参数时，这与变量的x不同。这个变量x是属于catch作用域的。</p>
<p>之后，我们将这个块级作用域的变量设置为1，并设置变量y的值。 现在，我们打印块级作用域的变量x，它等于1。</p>
<p>在catch块之外，x仍然是undefined，而y是2。 当我们想在catch块之外的console.log(x)时，它返回undefined，而y返回2。</p>
<h3 id="下面代码的输出结果是什么？"><a href="#下面代码的输出结果是什么？" class="headerlink" title="下面代码的输出结果是什么？"></a>下面代码的输出结果是什么？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function Foo() &#123;</span><br><span class="line">    Foo.a = function() &#123;</span><br><span class="line">        console.log(1)</span><br><span class="line">    &#125;</span><br><span class="line">    this.a = function() &#123;</span><br><span class="line">        console.log(2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Foo.prototype.a = function() &#123;</span><br><span class="line">    console.log(3)</span><br><span class="line">&#125;</span><br><span class="line">Foo.a = function() &#123;</span><br><span class="line">    console.log(4)</span><br><span class="line">&#125;</span><br><span class="line">Foo.a();</span><br><span class="line">let obj = new Foo();</span><br><span class="line">obj.a();</span><br><span class="line">Foo.a();</span><br></pre></td></tr></table></figure>

<p>参考答案</p>
<p>输出顺序是 4 2 1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">function Foo() &#123;</span><br><span class="line">    Foo.a = function() &#123;</span><br><span class="line">        console.log(1)</span><br><span class="line">    &#125;</span><br><span class="line">    this.a = function() &#123;</span><br><span class="line">        console.log(2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 以上只是 Foo 的构建方法，没有产生实例，此刻也没有执行</span><br><span class="line"></span><br><span class="line">Foo.prototype.a = function() &#123;</span><br><span class="line">    console.log(3)</span><br><span class="line">&#125;</span><br><span class="line">// 现在在 Foo 上挂载了原型方法 a ，方法输出值为 3</span><br><span class="line"></span><br><span class="line">Foo.a = function() &#123;</span><br><span class="line">    console.log(4)</span><br><span class="line">&#125;</span><br><span class="line">// 现在在 Foo 上挂载了直接方法 a ，输出值为 4</span><br><span class="line"></span><br><span class="line">Foo.a();</span><br><span class="line">// 立刻执行了 Foo 上的 a 方法，也就是刚刚定义的，所以</span><br><span class="line">// # 输出 4</span><br></pre></td></tr></table></figure>

<p>原文链接：<a href="https://blog.csdn.net/sinat_37903468/article/details/100887223" target="_blank" rel="noopener">https://blog.csdn.net/sinat_37903468/article/details/100887223</a></p>
<h3 id="笔试经验"><a href="#笔试经验" class="headerlink" title="笔试经验"></a>笔试经验</h3><p><strong>面试中的写代码的过程,一定不能紧张,要沉住气慢慢来</strong>.只要不是系统自动检查结果,只要是面试官看着你写,就有很大的表现的机会,哪怕最后做不出来。</p>
<p>可以肯定的是,<strong>面试官不会只根据是否能运行成功来评价应聘者</strong>.</p>
<p>所以,<strong>只需要顺着正确思路稳稳地做就好了,不要怕最后运行不成功</strong>.</p>
<p><strong>如果实在做不出,也一定要和面试官说清你当前的进展和思路</strong>,而不是一句”我不会”就想结束问题.</p>
<blockquote>
<p>关于这篇文章,有几点我想先说清楚,方便读者更顺利的学习.</p>
<ul>
<li><p>这篇文章<strong>不适合前端小白阅读</strong>,需要对<code>JS</code>和<code>ES6</code>有一定了解,否则遇到一些写法可能不太看得懂</p>
</li>
<li><p>因为精力有限,我只加了较为粗略但足以帮助读者理解的注释,因为多数题也只有几行代码而已.</p>
</li>
</ul>
<p>如果遇到还<strong>不懂的地方</strong>,我认为读者完全可以<strong>自己去查询文档来了解为什么这么做</strong>,为什么使用这个函数.</p>
<p>或者,<strong>先查询该问题通常的解决思路,再回来参考我的实现</strong></p>
<ul>
<li><p>代码<strong>大量使用了<code>ES6</code>的语法</strong></p>
</li>
<li><p>学习手撕代码,不只是理解的过程,更是<strong>实践</strong>的过程</p>
</li>
</ul>
<p>我在完全掌握(可以默写出每段代码,并讲清楚每一行的作用)以下代码的过程中,做了以下几件事</p>
<ul>
<li><ul>
<li><p>参考别人的实现,结合自己的思路,写出一个自己的版本</p>
</li>
<li><p><strong>不断对代码进行优化</strong></p>
</li>
</ul>
<p>当你尝试去优化一段代码的时候,对它的理解和记忆会异常深刻</p>
<ul>
<li>不看之前的实现,重新自己实现一次</li>
</ul>
<p>再和之前的实现做对比,检查错误</p>
<ul>
<li><strong>反复阅读和默写</strong>,直到可以完全正确的默写为之</li>
</ul>
</li>
<li><p><strong>作为一个专业的程序员,除了工作中的编码,额外的无实际产出的练习(反复练习解决一个问题,反复默写同一段代码),也是必不可少的.</strong></p>
</li>
</ul>
<p>这就像歌手不可能到了舞台上才去练习自己的声音.他一定会在平时大量去练声.</p>
<p>这就是我强调要反复敲代码的原因.别想着平时只要理解,工作中再去熟能生巧.</p>
<p><strong>工作不是给你练习的地方,工作是你的舞台.</strong></p>
<ul>
<li><p>下文中几乎每一段代码,都是我反复优化后的结果,希望可以带给读者新的启发.</p>
</li>
<li><p>我把代码大致分成了几个专题,一共包含了大致<strong>30个问题的解决方案</strong></p>
</li>
<li><p>除了文章中的问题,还有些<strong>我没有提到的,都是频率较低的问题</strong></p>
</li>
</ul>
<p>关于<strong>算法题,除了排序和查找我也基本没有写</strong>.因为算法问题千变万化,需要的是解决问题的思维,而不是固定的实现</p>
<ul>
<li>重要性与顺序无关</li>
</ul>
</blockquote>
<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><h4 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h4><ul>
<li>事件代理</li>
</ul>
<h4 id="数组-对象"><a href="#数组-对象" class="headerlink" title="数组 对象"></a>数组 对象</h4><ul>
<li><p>扁平化</p>
</li>
<li><p>去重 - <code>unique()</code></p>
</li>
<li><p>拷贝</p>
</li>
<li><ul>
<li>浅拷贝</li>
<li>深拷贝（<code>copy()</code>函数实现、<code>JSON.stringify</code>）</li>
</ul>
</li>
</ul>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><ul>
<li><p>去除空格 - <code>trim()</code></p>
</li>
<li><p>字符串全排列</p>
</li>
<li><ul>
<li>广度优先实现</li>
<li>深度优先实现</li>
</ul>
</li>
</ul>
<h4 id="排序和查找"><a href="#排序和查找" class="headerlink" title="排序和查找"></a>排序和查找</h4><ul>
<li>插入排序</li>
<li>归并排序</li>
<li>快速排序</li>
<li>二分查找</li>
<li>找出出现次数最多的元素 - <code>getMostItem()</code></li>
</ul>
<h4 id="功能函数实现"><a href="#功能函数实现" class="headerlink" title="功能函数实现"></a>功能函数实现</h4><ul>
<li><code>setTimeout</code>实现<code>setInterval</code></li>
<li>函数柯里化</li>
<li>防抖 节流</li>
</ul>
<h4 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h4><ul>
<li>单链表</li>
</ul>
<h4 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h4><ul>
<li>发布订阅模式</li>
</ul>
<h4 id="JS原生API实现"><a href="#JS原生API实现" class="headerlink" title="JS原生API实现"></a>JS原生API实现</h4><ul>
<li><code>bind()</code> <code>call()</code> <code>apply()</code></li>
<li><code>InstanceOf</code></li>
<li><code>new</code></li>
<li><code>reduce()</code> <code>forEach()</code></li>
<li><code>Promise</code></li>
</ul>
<h4 id="HTTP请求"><a href="#HTTP请求" class="headerlink" title="HTTP请求"></a>HTTP请求</h4><ul>
<li>AJAX封装</li>
<li>JSONP</li>
</ul>
<h2 id="DOM-1"><a href="#DOM-1" class="headerlink" title="DOM"></a>DOM</h2><h3 id="事件代理"><a href="#事件代理" class="headerlink" title="事件代理"></a>事件代理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(&quot;father-id&quot;).onclick=function(event)&#123;</span><br><span class="line">    event=event||window.event</span><br><span class="line">    let target=event.target||event.srcElement</span><br><span class="line">    //可以自己打印一下event.target.nodeName,看看是什么</span><br><span class="line">    if (target.nodeName.toLowerCase()===&apos;xxx&apos;)&#123;</span><br><span class="line">        //事件内容</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数组-对象-1"><a href="#数组-对象-1" class="headerlink" title="数组 对象"></a>数组 对象</h2><h3 id="扁平化"><a href="#扁平化" class="headerlink" title="扁平化"></a>扁平化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function flatten(arr) &#123;</span><br><span class="line"> let result=[]</span><br><span class="line"> for (let i=0,len=arr.length;i&lt;len;i++) &#123;</span><br><span class="line">  if (Array.isArray(arr[i])) &#123;</span><br><span class="line">   result=result.concat(flatten(arr[i]))</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">   result.push(arr[i])</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="去重-unique"><a href="#去重-unique" class="headerlink" title="去重 - unique()"></a>去重 - <code>unique()</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function unique(arr) &#123;</span><br><span class="line">    let appeard=new Set()</span><br><span class="line">    return arr.filter(item=&gt;&#123;</span><br><span class="line">        //创建一个可以唯一标识对象的字符串id</span><br><span class="line">        let id=item+JSON.stringify(item)</span><br><span class="line">        if (appeard.has(id)) &#123;</span><br><span class="line">            return false</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            appeard.add(id)</span><br><span class="line">            return true</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="拷贝"><a href="#拷贝" class="headerlink" title="拷贝"></a>拷贝</h3><h4 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function copy(obj) &#123;</span><br><span class="line"> let result=Array.isArray(obj)?[]:&#123;&#125;</span><br><span class="line"> Object.keys(obj).forEach(key=&gt;result[key]=obj[key])</span><br><span class="line"> return result</span><br><span class="line">&#125;</span><br><span class="line">otherStar=&#123;...star&#125;</span><br><span class="line">Object.assign(&#123;&#125;,star)</span><br></pre></td></tr></table></figure>

<h4 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h4><h5 id="copy-函数实现"><a href="#copy-函数实现" class="headerlink" title="copy()函数实现"></a><code>copy()</code>函数实现</h5><p>处理了<strong>循环引用</strong>和<strong>key为symbol类型的情况</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function copy(obj,appeard=new Map()) &#123;</span><br><span class="line"> if (!(obj instanceof Object)) return obj//如果是原始数据类型</span><br><span class="line">    if (appeard.has(obj)) return appeard.get(obj)//如果已经出现过</span><br><span class="line"></span><br><span class="line">    let result=Array.isArray(obj)?[]:&#123;&#125;</span><br><span class="line">    appeard.set(obj,result)//将新对象放入map</span><br><span class="line"></span><br><span class="line">    //遍历所有属性进行递归拷贝</span><br><span class="line">    ;[...Object.keys(obj),...Object.getOwnPropertySymbols(obj)]</span><br><span class="line">     .forEach(key=&gt;result[key]=copy(obj[key],appeard))</span><br><span class="line"></span><br><span class="line">    return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="JSON-stringify"><a href="#JSON-stringify" class="headerlink" title="JSON.stringify"></a><code>JSON.stringify</code></h5><ul>
<li>只能处理纯JSON数据</li>
<li>有几种情况会发生错误</li>
<li>包含不能转成 JSON 格式的数据</li>
<li>循环引用</li>
<li>undefined,NaN, -Infinity, Infinity 都会被转化成null</li>
<li><strong>RegExp/函数</strong>不会拷贝</li>
<li>new Date()会被转成字符串</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new=JSON.parse(JSON.stringify(old))</span><br></pre></td></tr></table></figure>

<h2 id="字符串-1"><a href="#字符串-1" class="headerlink" title="字符串"></a>字符串</h2><h3 id="去除空格-trim"><a href="#去除空格-trim" class="headerlink" title="去除空格 - trim()"></a>去除空格 - <code>trim()</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">function myTrim(str) &#123;</span><br><span class="line"> return str.replace(/(^\s+)|(\s+$)/g,&apos;&apos;)//将前空格和后空格替换为空</span><br><span class="line">&#125;</span><br><span class="line">function myTrim(str) &#123;//记录前后空格的个数,最后对字符串进行截取</span><br><span class="line"> let first=0,last=str.length</span><br><span class="line"> for (let i in str) &#123;</span><br><span class="line">  if (str[i]===&apos; &apos;) &#123;</span><br><span class="line">   first++</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">   break</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> for (let i=last;i&gt;first;i--) &#123;</span><br><span class="line">  if (str[i]===&apos; &apos;) &#123;</span><br><span class="line">   last--</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">   break</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> return str.substr(first,last-first)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="字符串全排列"><a href="#字符串全排列" class="headerlink" title="字符串全排列"></a>字符串全排列</h3><h4 id="广度优先实现"><a href="#广度优先实现" class="headerlink" title="广度优先实现"></a>广度优先实现</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function combine(str) &#123;//抽出一个字符s,对其余的进行排列,将s放在每种排列开头</span><br><span class="line"> if (str.length===1) return [str]</span><br><span class="line"> let results=[]</span><br><span class="line"> for (let i in str) &#123;</span><br><span class="line">  for (let s of combine(str.slice(0,i)+str.slice(1+(+i)))) &#123;</span><br><span class="line">   results.push(str[i]+s)</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">    //可能会出现类似&quot;aa&quot;=&gt;[aa,aa,aa,aa]的情况,需要去重</span><br><span class="line"> return [...new Set(results)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="深度优先实现"><a href="#深度优先实现" class="headerlink" title="深度优先实现"></a>深度优先实现</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function combine(str) &#123;//记录已经使用过的字符,深度优先访问所有方案</span><br><span class="line"> let result=[]</span><br><span class="line"> ;(function _combine(str,path=&apos;&apos;)&#123;</span><br><span class="line">  if (str.length===0) return result.push(path)</span><br><span class="line">  for (let i in str) &#123;</span><br><span class="line">   _combine(str.slice(0,i)+str.slice((+i)+1,str.length),path+str[i])</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;)(str)</span><br><span class="line">    //可能会出现类似&quot;aa&quot;=&gt;[aa,aa,aa,aa]的情况,需要去重</span><br><span class="line"> return [...new Set(result)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="排序和查找-1"><a href="#排序和查找-1" class="headerlink" title="排序和查找"></a>排序和查找</h2><h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function sort(arr) &#123;//原地</span><br><span class="line"> for (let i in arr) &#123;//选一个元素</span><br><span class="line">  while (i&gt;0&amp;&amp;arr[i]&lt;arr[i-1]) &#123;//向前移动到合适的位置</span><br><span class="line">   [arr[i],arr[i-1]]=[arr[i-1],arr[i]]</span><br><span class="line">   i--</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function sort(arr) &#123;</span><br><span class="line"> if (arr.length===1) return arr</span><br><span class="line"></span><br><span class="line"> //分成两部分</span><br><span class="line"> let mid=Math.floor(arr.length/2)</span><br><span class="line"> let [part1,part2]=[sort(arr.slice(0,mid)),sort(arr.slice(mid))]</span><br><span class="line"></span><br><span class="line"> //对比+合并</span><br><span class="line"> let result=[]</span><br><span class="line"> while (part1.length&gt;0&amp;&amp;part2.length&gt;0)</span><br><span class="line">  result.push((part1[0]&lt;part2[0]?part1:part2).shift())</span><br><span class="line"> return [...result,...part1,...part2]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function sort(arr) &#123;</span><br><span class="line"> if (arr.length&lt;=1) return arr</span><br><span class="line"></span><br><span class="line">    //选基准值</span><br><span class="line"> let mid_pos=arr.length&gt;&gt;1</span><br><span class="line"> let mid=arr.splice(mid_pos,1)[0]</span><br><span class="line"></span><br><span class="line"> let left=[],right=[]</span><br><span class="line"></span><br><span class="line">    //和基准值比较,分别插入left,right数组</span><br><span class="line"> arr.forEach(item=&gt;(item&lt;=mid?left:right).push(item))</span><br><span class="line"></span><br><span class="line"> return [...sort(left),mid,...sort(right)]//递归调用排序</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function search(arr,target) &#123;//循环写法,不断移动左右指针,缩小范围</span><br><span class="line"> let left=0,right=arr.length-1</span><br><span class="line"></span><br><span class="line"> while (left&lt;=right) &#123;</span><br><span class="line">  const mid_pos=Math.floor((left+right)/2)</span><br><span class="line">  const mid_val=arr[mid_pos]</span><br><span class="line"></span><br><span class="line">  if (target===mid_val) &#123;</span><br><span class="line">   return mid_pos</span><br><span class="line">  &#125; else if (target&gt;mid_val) &#123;</span><br><span class="line">   left=mid_pos+1</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">   right=mid_pos-1</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> return -1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="找出出现次数最多的元素-getMostItem"><a href="#找出出现次数最多的元素-getMostItem" class="headerlink" title="找出出现次数最多的元素 - getMostItem()"></a>找出出现次数最多的元素 - <code>getMostItem()</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">function getMost(arr) &#123;</span><br><span class="line"> //计数</span><br><span class="line"> let map=new Map()</span><br><span class="line"> arr.forEach(item=&gt;&#123;</span><br><span class="line">  if (map.has(item)) &#123;</span><br><span class="line">   map.set(item,map.get(item)+1)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">   map.set(item,1)</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"></span><br><span class="line"> //找出出现最多</span><br><span class="line"> let [max_vals,max_num]=[[arr[0]],map.get(arr[0])]</span><br><span class="line"> map.forEach((count,item)=&gt;&#123;</span><br><span class="line">  if (count&gt;max_num)&#123;</span><br><span class="line">   max_vals=[item]</span><br><span class="line">   max_num=count</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">   max_vals.push(item)</span><br><span class="line">  &#125; </span><br><span class="line"> &#125;)</span><br><span class="line"> return max_vals</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(getMost([&apos;1&apos;, &apos;2&apos;, &apos;3&apos;, &apos;3&apos;, &apos;55&apos;, &apos;3&apos;, &apos;55&apos;, &apos;55&apos;]))</span><br></pre></td></tr></table></figure>

<h2 id="功能函数实现-1"><a href="#功能函数实现-1" class="headerlink" title="功能函数实现"></a>功能函数实现</h2><h3 id="setTimeout实现setInterval"><a href="#setTimeout实现setInterval" class="headerlink" title="setTimeout实现setInterval"></a><code>setTimeout</code>实现<code>setInterval</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function myInterval(fn,interval,...args) &#123;</span><br><span class="line"> let context=this</span><br><span class="line"> setTimeout(()=&gt;&#123;</span><br><span class="line">  fn.apply(context,args)</span><br><span class="line">  myInterval(fn,interval,...args)//别忘了为它传入参数</span><br><span class="line"> &#125;,interval)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">myInterval((num)=&gt;console.log(num),500,10)</span><br></pre></td></tr></table></figure>

<h3 id="函数柯里化"><a href="#函数柯里化" class="headerlink" title="函数柯里化"></a>函数柯里化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function sum(...args1)&#123;</span><br><span class="line">    return function (...args2) &#123;</span><br><span class="line">        return [...args1,...args2].reduce((p,n)=&gt;p+n)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">console.log(sum(1, 2, 2)(7))</span><br></pre></td></tr></table></figure>

<h3 id="防抖-节流"><a href="#防抖-节流" class="headerlink" title="防抖 节流"></a>防抖 节流</h3><p>实现了两个<strong>加工方法</strong>,返回一个加工后的防抖/节流函数</p>
<h4 id="防抖"><a href="#防抖" class="headerlink" title="防抖"></a>防抖</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function debounce(fn,delay) &#123;</span><br><span class="line"> let timer=null</span><br><span class="line"> return function ()&#123;</span><br><span class="line">  if (timer) clearTimeout(timer)</span><br><span class="line">  timer=setTimeout(()=&gt;fn.call(...arguments),delay)//别忘了为它传入参数</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="节流"><a href="#节流" class="headerlink" title="节流"></a>节流</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function throttle(fn,delay) &#123;</span><br><span class="line"> let flag=true</span><br><span class="line"> return function() &#123;</span><br><span class="line">  if (!flag) return</span><br><span class="line"></span><br><span class="line">  flag=false</span><br><span class="line">  setTimeout(()=&gt;&#123;</span><br><span class="line">   fn(...arguments)//别忘了为它传入参数</span><br><span class="line">   flag=true</span><br><span class="line">  &#125;,delay)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数据结构-1"><a href="#数据结构-1" class="headerlink" title="数据结构"></a>数据结构</h2><h3 id="单链表"><a href="#单链表" class="headerlink" title="单链表"></a>单链表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">function Node(element) &#123;//结点类</span><br><span class="line"> [this.element,this.next]=[element,null]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class LinkList &#123;//链表类</span><br><span class="line"> constructor() &#123;</span><br><span class="line">  this.length=0</span><br><span class="line">  this.head=new Node()</span><br><span class="line">  this.tail=new Node()</span><br><span class="line">  this.head.next=this.tail</span><br><span class="line"> &#125;</span><br><span class="line"> get_all() &#123;</span><br><span class="line">  let result=[]</span><br><span class="line">  let now=this.head</span><br><span class="line">  while (now.next!==this.tail) &#123;</span><br><span class="line">   now=now.next</span><br><span class="line">   result.push(now.element)</span><br><span class="line">  &#125;</span><br><span class="line">  return result</span><br><span class="line"> &#125;</span><br><span class="line"> unshift(element) &#123;//开头添加</span><br><span class="line">  let node=new Node(element)</span><br><span class="line">  node.next=this.head.next</span><br><span class="line">  this.head.next=node</span><br><span class="line"> &#125;</span><br><span class="line"> shift()&#123;//开头删除</span><br><span class="line">  let node=this.head.next</span><br><span class="line">  this.head.next=this.head.next.next</span><br><span class="line">  return node.element</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">let list=new LinkList()</span><br><span class="line">list.unshift(15)</span><br><span class="line">list.unshift(16)</span><br><span class="line">list.unshift(17)</span><br><span class="line">console.log(list.shift())//17</span><br><span class="line">console.log(list.get_all())//[ 16, 15 ]</span><br></pre></td></tr></table></figure>

<h2 id="设计模式-1"><a href="#设计模式-1" class="headerlink" title="设计模式"></a>设计模式</h2><h3 id="发布订阅模式"><a href="#发布订阅模式" class="headerlink" title="发布订阅模式"></a>发布订阅模式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class Observer &#123;</span><br><span class="line"> constructor() &#123;</span><br><span class="line">  this.events=&#123;&#125;//事件中心</span><br><span class="line"> &#125;</span><br><span class="line"> publish(eventName,...args) &#123;//发布=&gt;调用事件中心中对应的函数</span><br><span class="line">  if (this.events[eventName])</span><br><span class="line">   this.events[eventName].forEach(cb=&gt;cb.apply(this,args))</span><br><span class="line"> &#125;</span><br><span class="line"> subscribe(eventName,callback) &#123;//订阅=&gt;向事件中心中添加事件</span><br><span class="line">  if (this.events[eventName]) &#123;</span><br><span class="line">   this.events[eventName].push(callback)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">   this.events[eventName]=[callback]</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> unSubscribe(eventName,callback) &#123;//取消订阅</span><br><span class="line">  if (events[eventName])</span><br><span class="line">   events[eventName]=events[eventName].filter(cb=&gt;cb!==callback)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="JS原生API实现-1"><a href="#JS原生API实现-1" class="headerlink" title="JS原生API实现"></a>JS原生API实现</h2><h3 id="bind-call-apply"><a href="#bind-call-apply" class="headerlink" title="bind() call() apply()"></a><code>bind()</code> <code>call()</code> <code>apply()</code></h3><h4 id="apply"><a href="#apply" class="headerlink" title="apply()"></a><code>apply()</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Function.prototype.myApply=function(context,args) &#123;</span><br><span class="line"> context.fn=this//为context设置函数属性</span><br><span class="line"> let result=context.fn(...args)//调用函数</span><br><span class="line"> delete context.fn//删除context的函数属性</span><br><span class="line"> return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="call"><a href="#call" class="headerlink" title="call()"></a><code>call()</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//除了...args</span><br><span class="line">//和apply都一样</span><br><span class="line">Function.prototype.myCall=function(context,...args) &#123;</span><br><span class="line"> context.fn=this</span><br><span class="line"> let result=context.fn(...args)</span><br><span class="line"> delete context.fn</span><br><span class="line"> return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="bind"><a href="#bind" class="headerlink" title="bind()"></a><code>bind()</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Function.prototype.myBind=function(context,args1) &#123;//使用[闭包+apply]实现</span><br><span class="line"> return (...args2)=&gt;this.apply(context,[...args1,...args2]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="InstanceOf"><a href="#InstanceOf" class="headerlink" title="InstanceOf"></a><code>InstanceOf</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function myInstanceOf(son,father) &#123;//沿着父亲的原型链向上查找是否有儿子的原型</span><br><span class="line"> while (true) &#123;</span><br><span class="line">  son=son.__proto__</span><br><span class="line">  if (!son) return false</span><br><span class="line">  if (son===father.prototype) return true</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myInstanceOf([], Array)  // true</span><br></pre></td></tr></table></figure>

<h3 id="new"><a href="#new" class="headerlink" title="new"></a><code>new</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function myNew(constructor_fn,...args) &#123;</span><br><span class="line"> //构造新的空对象</span><br><span class="line"> let new_obj=&#123;&#125;</span><br><span class="line"> new_obj.__proto__=constructor_fn.prototype</span><br><span class="line"></span><br><span class="line"> let result=constructor_fn.apply(new_obj,args)</span><br><span class="line"> //如果构造函数没有返回一个对象,则返回新创建的对象</span><br><span class="line"> //如果构造函数返回了一个对象,则返回那个对象</span><br><span class="line"> //如果构造函数返回原始值,则当作没有返回对象</span><br><span class="line"> return result instanceof Object?result:new_obj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function Animal(name) &#123;</span><br><span class="line">  this.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let animal = myNew(Animal, &apos;dog&apos;);</span><br><span class="line">console.log(animal.name)  // dog</span><br></pre></td></tr></table></figure>

<h3 id="reduce-forEach"><a href="#reduce-forEach" class="headerlink" title="reduce() forEach()"></a><code>reduce()</code> <code>forEach()</code></h3><h4 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a><code>reduce()</code></h4><p>api用法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.reduce(function(prev, cur, index, arr)&#123;&#125;, initialValue)</span><br></pre></td></tr></table></figure>

<p>实现:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.myReduce=function(fn,init_val)&#123;</span><br><span class="line"> let [val,idx]=init_val?[init_val,0]:[this[0],1]//设置初始值</span><br><span class="line"> for (let i=idx,len=this.length;i&lt;len;i++) &#123;</span><br><span class="line">  val=fn(val,this[i],i,this)//循环并迭代结果</span><br><span class="line"> &#125;</span><br><span class="line"> return val</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log([1,2,3,4,5].reduce((pre,item)=&gt;pre+item,0)) // 15</span><br></pre></td></tr></table></figure>

<h4 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a><code>forEach()</code></h4><p>api用法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[1,3,5,7,9].myForEach(function(item,index,arr) &#123;</span><br><span class="line">    console.log(this)</span><br><span class="line">&#125;,15)</span><br></pre></td></tr></table></figure>

<p>实现:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.myForEach=function(fn,temp_this) &#123;</span><br><span class="line">    for (let i=0,len=this.length;i&lt;len;i++)&#123;</span><br><span class="line">        fn.call(temp_this,this[i],i,this)//循环数组元素,为回调函数传入参数</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a><code>Promise</code></h3><h4 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all()"></a><code>Promise.all()</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Promise.prototype.all=function(promiseList) &#123;</span><br><span class="line">    return new Promise((resolve,reject)=&gt;&#123;</span><br><span class="line">        if (promiseList.length===0) return resolve([])</span><br><span class="line">        let result=[],count=0</span><br><span class="line"></span><br><span class="line">        promiseList.forEach((promise,index)=&gt;&#123;</span><br><span class="line">            Promise.resolve(promise).then(value=&gt;&#123;</span><br><span class="line">                result[index]=value</span><br><span class="line">                if (++count===promiseList.length) resolve(result)</span><br><span class="line">            &#125;,reason=&gt;reject(reason))</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ES6所有API完整实现"><a href="#ES6所有API完整实现" class="headerlink" title="ES6所有API完整实现"></a>ES6所有API完整实现</h4><p>通过Promise/A+ test测试</p>
<p>实现细节过多,还请参照Promise/A+规范阅读</p>
<p>也可以直接参考我关于promise的笔记</p>
<blockquote>
<p>深入理解promise</p>
<p><a href="https://blog.csdn.net/weixin_43758603/article/details/109641486" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43758603/article/details/109641486</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line">class Promise &#123;</span><br><span class="line"> constructor(task) &#123;</span><br><span class="line">  this.status=&quot;pending&quot;</span><br><span class="line">  this.value=undefined</span><br><span class="line">  this.reason=undefined</span><br><span class="line">  this.fulfilled_callbacks=[]</span><br><span class="line">  this.rejected_callbacks=[]</span><br><span class="line"></span><br><span class="line">  try &#123;</span><br><span class="line">   task(this._resolve,this._reject)</span><br><span class="line">  &#125; catch (error) &#123;</span><br><span class="line">   this._reject(error)</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> then(onFulfilled,onRejected)&#123;</span><br><span class="line">  if (this.status===&apos;fulfilled&apos;) &#123;</span><br><span class="line">   let promise2=new Promise((resolve,reject)=&gt;&#123;</span><br><span class="line">    setTimeout(()=&gt;&#123;</span><br><span class="line">     try &#123;</span><br><span class="line">      if (!this._isFunction(onFulfilled)) &#123;</span><br><span class="line">       resolve(this.value)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">       this._resolvePromise(promise2,onFulfilled(this.value))</span><br><span class="line">      &#125;</span><br><span class="line">     &#125; catch (error) &#123;</span><br><span class="line">      reject(error)</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;,0)</span><br><span class="line">   &#125;)</span><br><span class="line">   return promise2</span><br><span class="line">  &#125; else if (this.status===&apos;rejected&apos;) &#123;</span><br><span class="line">   let promise2=new Promise((resolve,reject)=&gt;&#123;</span><br><span class="line">    setTimeout(()=&gt;&#123;</span><br><span class="line">     try &#123;</span><br><span class="line">      if (!this._isFunction(onRejected)) &#123;</span><br><span class="line">       reject(this.reason)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">       this._resolvePromise(promise2,onRejected(this.reason))</span><br><span class="line">      &#125;</span><br><span class="line">     &#125; catch (error) &#123;</span><br><span class="line">      reject(error)</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;,0)</span><br><span class="line">   &#125;)</span><br><span class="line">   return promise2</span><br><span class="line">  &#125; else if (this.status===&apos;pending&apos;)  &#123;</span><br><span class="line">   let promise2=new Promise((resolve,reject)=&gt;&#123;</span><br><span class="line">    this.fulfilled_callbacks.push(()=&gt;&#123;</span><br><span class="line">     try &#123;</span><br><span class="line">      if (!this._isFunction(onFulfilled)) &#123;</span><br><span class="line">       resolve(this.value)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">       this._resolvePromise(promise2,onFulfilled(this.value))</span><br><span class="line">      &#125;</span><br><span class="line">     &#125; catch (error) &#123;</span><br><span class="line">      reject(error)</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    this.rejected_callbacks.push(()=&gt;&#123;</span><br><span class="line">     try &#123;</span><br><span class="line">      if (!this._isFunction(onRejected)) &#123;</span><br><span class="line">       reject(this.reason)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">       this._resolvePromise(promise2,onRejected(this.reason))</span><br><span class="line">      &#125;</span><br><span class="line">     &#125; catch (error) &#123;</span><br><span class="line">      reject(error)</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">   &#125;)</span><br><span class="line">   return promise2</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> catch=onRejected=&gt;this.then(null,onRejected)</span><br><span class="line"></span><br><span class="line"> finally=onFinished=&gt;this.then(onFinished,onFinished)</span><br><span class="line"></span><br><span class="line"> static deferred()&#123;</span><br><span class="line">  let deferred=&#123;&#125;</span><br><span class="line">  deferred.promise=new Promise((resolve,reject)=&gt;&#123;</span><br><span class="line">   deferred.resolve=resolve</span><br><span class="line">   deferred.reject=reject</span><br><span class="line">  &#125;)</span><br><span class="line">  return deferred</span><br><span class="line"> &#125;</span><br><span class="line"> static resolve(value) &#123;</span><br><span class="line">  if (value instanceof Promise) return value</span><br><span class="line">  return new Promise(resolve=&gt;resolve(value))</span><br><span class="line"> &#125;</span><br><span class="line"> static reject=reason=&gt;&#123;return new Promise((resolve, reject)=&gt;reject(reason))&#125;</span><br><span class="line"></span><br><span class="line"> static all(promiseList) &#123;</span><br><span class="line">  return new Promise((resolve,reject)=&gt;&#123;</span><br><span class="line">   if (promiseList.length===0) return resolve([])</span><br><span class="line">   let result=[],count=0</span><br><span class="line"></span><br><span class="line">   promiseList.forEach((promise,index)=&gt;&#123;</span><br><span class="line">    Promise.resolve(promise).then(value=&gt;&#123;</span><br><span class="line">     result[index]=value</span><br><span class="line">     if (++count===promiseList.length) resolve(result)</span><br><span class="line">    &#125;,reason=&gt;reject(reason))</span><br><span class="line">   &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"> &#125;</span><br><span class="line"> static race(promiseList) &#123;</span><br><span class="line">  return new Promise((resolve,reject)=&gt;&#123;</span><br><span class="line">   if (promiseList.length===0) return resolve()</span><br><span class="line">   promiseList.forEach(promise=&gt;&#123;</span><br><span class="line">    Promise.resolve(promise)</span><br><span class="line">     .then(value=&gt;resolve(value),reason=&gt;reject(reason))</span><br><span class="line">   &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"> &#125;</span><br><span class="line"> static allSettled(promiseList) &#123;</span><br><span class="line">  return new Promise(resolve=&gt;&#123;</span><br><span class="line">   let result=[],count=0</span><br><span class="line">   if (len===0) return resolve(result)</span><br><span class="line"></span><br><span class="line">   promiseList.forEach((promise,i)=&gt;&#123;</span><br><span class="line">    Promise.resolve(promise).then(value=&gt;&#123;</span><br><span class="line">     result[i]=&#123;</span><br><span class="line">      status:&apos;fulfilled&apos;,</span><br><span class="line">      value:value</span><br><span class="line">     &#125;</span><br><span class="line">     if (++count===promiseList.length) resolve(result)</span><br><span class="line">    &#125;,reason=&gt;&#123;</span><br><span class="line">     result[i]=&#123;</span><br><span class="line">      status:&apos;rejected&apos;,</span><br><span class="line">      reason:reason</span><br><span class="line">     &#125;</span><br><span class="line">     if (++count===promiseList.length) resolve(result)</span><br><span class="line">    &#125;)</span><br><span class="line">   &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"> &#125;</span><br><span class="line"> _resolve=value=&gt;&#123;</span><br><span class="line">  if (this.status!==&apos;pending&apos;) return</span><br><span class="line">  setTimeout(()=&gt;&#123;</span><br><span class="line">   this.status =&apos;fulfilled&apos;</span><br><span class="line">   this.value = value</span><br><span class="line">   this.fulfilled_callbacks.forEach(cb=&gt;cb(this.value))</span><br><span class="line">  &#125;,0)</span><br><span class="line"> &#125;</span><br><span class="line"> _reject=reason=&gt;&#123;</span><br><span class="line">  if (this.status!==&apos;pending&apos;) return</span><br><span class="line">  setTimeout(()=&gt;&#123;</span><br><span class="line">   this.reason = reason</span><br><span class="line">   this.status =&apos;rejected&apos;</span><br><span class="line">   this.rejected_callbacks.forEach(cb=&gt;cb(this.reason))</span><br><span class="line">  &#125;,0)</span><br><span class="line"> &#125;</span><br><span class="line"> _isFunction=f=&gt;Object.prototype.toString.call(f).toLocaleLowerCase()===&apos;[object function]&apos;</span><br><span class="line"> </span><br><span class="line"> _isObject=o=&gt;Object.prototype.toString.call(o).toLocaleLowerCase()===&apos;[object object]&apos;</span><br><span class="line"></span><br><span class="line"> _resolvePromise(promise,x)&#123;</span><br><span class="line">  if (promise===x) &#123;</span><br><span class="line">      promise._reject(new TypeError(&apos;cant be the same&apos;))</span><br><span class="line">      return</span><br><span class="line">  &#125;</span><br><span class="line">  if (x instanceof Promise) &#123;</span><br><span class="line">   if (x.status===&apos;fulfilled&apos;) &#123;</span><br><span class="line">    promise._resolve(x.value)</span><br><span class="line">   &#125; else if (x.status===&apos;rejected&apos;) &#123;</span><br><span class="line">    promise._reject(x.reason)</span><br><span class="line">   &#125; else if (x.status===&apos;pending&apos;) &#123;</span><br><span class="line">    x.then(value=&gt;&#123;</span><br><span class="line">     this._resolvePromise(promise,value)</span><br><span class="line">    &#125;,reason=&gt;&#123;</span><br><span class="line">     promise._reject(reason)</span><br><span class="line">    &#125;)</span><br><span class="line">   &#125;</span><br><span class="line">   return</span><br><span class="line">  &#125;</span><br><span class="line">  if (this._isObject(x)||this._isFunction(x)) &#123;</span><br><span class="line">   let then</span><br><span class="line">   try &#123;</span><br><span class="line">    then=x.then</span><br><span class="line">   &#125; catch (error) &#123;</span><br><span class="line">    promise._reject(error)</span><br><span class="line">    return</span><br><span class="line">   &#125;</span><br><span class="line">   if (this._isFunction(then)) &#123;</span><br><span class="line">    let called=false</span><br><span class="line">    try &#123;</span><br><span class="line">     then.call(x,value=&gt;&#123;</span><br><span class="line">      if (called) return</span><br><span class="line">      called=true</span><br><span class="line">      this._resolvePromise(promise,value)</span><br><span class="line">     &#125;,reason=&gt;&#123;</span><br><span class="line">      if (called) return</span><br><span class="line">      called=true</span><br><span class="line">      promise._reject(reason)</span><br><span class="line">     &#125;)</span><br><span class="line">    &#125; catch (error) &#123;</span><br><span class="line">     if (called) return</span><br><span class="line">     promise._reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">    promise._resolve(x)</span><br><span class="line">   &#125;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">   promise._resolve(x)</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">module.exports = Promise</span><br></pre></td></tr></table></figure>

<h2 id="HTTP请求-1"><a href="#HTTP请求-1" class="headerlink" title="HTTP请求"></a>HTTP请求</h2><h3 id="AJAX封装"><a href="#AJAX封装" class="headerlink" title="AJAX封装"></a>AJAX封装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">function ajax(method,url,params,callback) &#123;</span><br><span class="line"> //对参数进行处理</span><br><span class="line"> method=method.toUpperCase()</span><br><span class="line"> let post_params=null</span><br><span class="line"> let get_params=&apos;&apos;</span><br><span class="line"> </span><br><span class="line"> if (method===&apos;GET&apos;) &#123;</span><br><span class="line">  if (typeof params===&apos;object&apos;) &#123;</span><br><span class="line">   let tempArr=[]</span><br><span class="line">   for (let key in params) &#123;</span><br><span class="line">    tempArr.push(`$&#123;key&#125;=$&#123;params[key]&#125;`)</span><br><span class="line">   &#125;</span><br><span class="line">   params=tempArr.join(&apos;&amp;&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">  get_params=`?$&#123;params&#125;`</span><br><span class="line"> &#125; else &#123;</span><br><span class="line">  post_params=params</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> //发请求</span><br><span class="line"> let xhr=new XMLHttpRequest()</span><br><span class="line"></span><br><span class="line"> xhr.onreadystatechange=function()&#123;</span><br><span class="line">  if (xhr.readyState!==4) return</span><br><span class="line">  callback(xhr.responseText)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> xhr.open(method,url+get_params,false)</span><br><span class="line"> if (method===&apos;POST&apos;)</span><br><span class="line">  xhr.setRequestHeader(&apos;Content-Type&apos;,&apos;application/x-www-form-urlencoded&apos;)</span><br><span class="line"></span><br><span class="line"> xhr.send(post_params) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ajax(&apos;get&apos;,&apos;https://www.baidu.com&apos;,&#123;id:15&#125;,data=&gt;console.log(data))</span><br></pre></td></tr></table></figure>

<h3 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">function jsonp(url, params_obj, callback) &#123;</span><br><span class="line"> //创建一个供后端返回数据调用的函数名</span><br><span class="line"> let funcName = &apos;jsonp_&apos; + Data.now() + Math.random().toString().substr(2, 5)</span><br><span class="line"></span><br><span class="line"> //将参数拼接成字符串</span><br><span class="line"> if (typeof params===&apos;object&apos;) &#123;</span><br><span class="line">  let temp=[]</span><br><span class="line">  for (let key in params) &#123;</span><br><span class="line">   temp.push(`$&#123;key&#125;=$&#123;params[key]&#125;`)</span><br><span class="line">  &#125;</span><br><span class="line">  params=temp.join(&apos;&amp;&apos;)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> //在html中插入&lt;script&gt;资源请求标签</span><br><span class="line"> let script=document.createElement(&apos;script&apos;)</span><br><span class="line"> script.src=`$&#123;url&#125;?$&#123;params&#125;&amp;callback=$&#123;funcName&#125;`</span><br><span class="line"> document.body.appendChild(script)</span><br><span class="line"></span><br><span class="line"> //在本地设置供后端返回数据时调用的函数</span><br><span class="line"> window[funcName]=data=&gt;&#123;</span><br><span class="line">  callback(data)</span><br><span class="line"></span><br><span class="line">  delete window[funcName]</span><br><span class="line">  document.body.removeChild(script)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//使用方法</span><br><span class="line">jsonp(&apos;http://xxxxxxxx&apos;,&#123;id:123&#125;,data=&gt;&#123;</span><br><span class="line"> //获取数据后的操作</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>js插入html中标签的内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://www.liuzhuocheng.com?callback=funcName&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>后端返回的<code>&lt;script&gt;</code>资源的内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://www.liuzhuocheng.com?callback=funcName&quot;&gt;</span><br><span class="line"> funcName(&apos;datadatadatadatadatadatadatadata&apos;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="面试代码题解释"><a href="#面试代码题解释" class="headerlink" title="面试代码题解释"></a>面试代码题解释</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var a = 10;</span><br><span class="line">(function () &#123;</span><br><span class="line">    console.log(a)</span><br><span class="line">    a = 5</span><br><span class="line">    console.log(window.a)</span><br><span class="line">    var a = 20;</span><br><span class="line">    console.log(a)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<p>这段代码的输出结果为：</p>
<ul>
<li>第一个  console.log(a)  输出  10 ，因为在外部定义了变量  a  并赋值为  10 。</li>
<li>第二个  console.log(window.a)  输出  10 ，这里通过  window.a  访问全局变量  a ，其值仍为  10 。</li>
<li>第三个  console.log(a)  输出  20 ，这是在函数内部重新声明的局部变量  a  的值。</li>
</ul>
<p>这段代码主要考察了以下几个方面：</p>
<ul>
<li>作用域：展示了全局作用域和函数内部作用域的区别。</li>
<li>变量声明：不同位置声明变量的可见性和生命周期。</li>
</ul>
<p>在函数内部重新声明了变量  a ，这会形成一个局部作用域，覆盖了外部的全局变量  a 。在函数内部对  a  进行赋值操作只会影响局部变量，而不会改变全局变量的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const p = Promise.resolve();</span><br><span class="line">(async () =&gt; &#123;</span><br><span class="line">    await p;</span><br><span class="line">    console.log(&apos;await end&apos;);</span><br><span class="line">&#125;)();</span><br><span class="line">p.then(() =&gt; &#123;</span><br><span class="line">    console.log(&apos;then 1&apos;);</span><br><span class="line">&#125;).then(() =&gt; &#123;</span><br><span class="line">    console.log(&apos;then 2&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>好的，下面是一个更通俗易懂的解释：</p>
<p>首先， Promise.resolve()  创建了一个已经完成的 Promise 对象  p 。</p>
<p>然后，在  async  函数中使用  await p ，这意味着程序会在这里暂停，等待  p  完成。</p>
<p>由于  p  已经完成了，所以  await p  不会阻塞，会直接继续执行后面的代码，输出  await end 。</p>
<p>而  p.then()  里的回调函数，它们会在  p  完成后被调用。但在这个例子中，程序在  await p  后就已经继续执行了，不会再回到  then  里的回调函数。</p>
<p>所以，最后只会输出  await end 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&apos;2.1.2&apos;, &apos;0.402.1&apos;, &apos;3.20.1&apos;, &apos;0.1.8&apos;, &apos;5.1.2&apos;, &apos;1.3.4.5&apos;]</span><br></pre></td></tr></table></figure>

<p>你可以使用 JavaScript 的 sort() 方法对数组进行排序，以下是一个示例代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const arr = [&apos;2.1.2&apos;, &apos;0.402.1&apos;, &apos;3.20.1&apos;, &apos;0.1.8&apos;, &apos;5.1.2&apos;, &apos;1.3.4.5&apos;];</span><br><span class="line">arr.sort();</span><br><span class="line">console.log(arr);</span><br></pre></td></tr></table></figure>

<p>执行上面的代码后，将会对数组进行排序，并将排序后的结果输出到控制台。</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2024-03-31T15:48:02.000Z" itemprop="dateUpdated">2024-03-31 23:48:02</time>
</span><br>


        
        感谢您的阅读，欢迎评论(*^▽^*) 转载请附上本文链接：<a href="/interview/javascript-bian-cheng-ti.html" target="_blank" rel="external">https://qw8.github.io/interview/javascript-bian-cheng-ti.html</a>
        
    </div>
    
    <footer>
        <a href="https://qw8.github.io">
            <img src="/img/avatar.jpg" alt="秦伟">
            秦伟
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/算法/">算法</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/编程题/">编程题</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://qw8.github.io/interview/javascript-bian-cheng-ti.html&title=《JavaScript编程题》 — 秦伟博客&pic=https://qw8.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://qw8.github.io/interview/javascript-bian-cheng-ti.html&title=《JavaScript编程题》 — 秦伟博客&source=前端、全栈、SEO的知识点、面试题与学习链接的整理" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://qw8.github.io/interview/javascript-bian-cheng-ti.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《JavaScript编程题》 — 秦伟博客&url=https://qw8.github.io/interview/javascript-bian-cheng-ti.html&via=https://qw8.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://qw8.github.io/interview/javascript-bian-cheng-ti.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/interview/javascript-nan-ti.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">JavaScript难题</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/interview/javascript-bu-chang-kao.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">JavaScript不常考</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'false' == 'true',
            appId: "TJ17Ax10JrfIIljlO8qkwGvz-gzGzoHsz",
            appKey: "jDGQKdWT9hlzsTLRAbInE4bK",
            avatar: "mm",
            placeholder: "说点什么吧(*╹▽╹*)",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->










</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢您，我会继续努力哒(*^▽^*)
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

    <footer class="footer">
    <div class="top">
        <div class="map">
            <!--地球信息-->
<script type="text/javascript" src="/js/jquery-3.4.1.js"></script>
<script type="text/javascript">
    var windowWidth = $(window).width();
    if (windowWidth > 480) {
        document.write('<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5mz4gy0w2d8&amp;m=0&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33" async="async">  <\/script>');
    }
</script>
        </div>
        <p>
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>

</p>
        <p>
            <span>本网站总字数：832.3k</span>
            <span id="sitetime"></span>
        </p>
        <p>部分内容来源于互联网，用于个人知识的总结，如有侵权还请联系删除</p>
        <p>
            
            <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i
                    class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>

    <div class="bottom">
        <p>
            <span>Copyright &copy; 2019 - 2024 <a
                href="http://pdouyin.com/" target="_blank">秦伟的个人博客</a> All Rights Reserved.</span>
            <!-- <span>
                
                
            </span> -->
        </p>
    </div>
</footer>

<script language=javascript>
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
        year - 作为date对象的年份，为4位年份值
        month - 0-11之间的整数，做为date对象的月份
        day - 1-31之间的整数，做为date对象的天数
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
        minutes - 0-59之间的整数，做为date对象的分钟数
        seconds - 0-59之间的整数，做为date对象的秒数
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */
        var t1 = Date.UTC(2019, 8, 25, 18, 0, 0); // 北京时间
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
        document.getElementById("sitetime").innerHTML = "已安全运行 " + diffYears + "年 " + diffDays + "天 " + diffHours + "小时 " + diffMinutes + "分钟 " + diffSeconds + "秒";
    }
    siteTime();
</script>
</main>
<div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://qw8.github.io/interview/javascript-bian-cheng-ti.html&title=《JavaScript编程题》 — 秦伟博客&pic=https://qw8.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://qw8.github.io/interview/javascript-bian-cheng-ti.html&title=《JavaScript编程题》 — 秦伟博客&source=前端、全栈、SEO的知识点、面试题与学习链接的整理" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://qw8.github.io/interview/javascript-bian-cheng-ti.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《JavaScript编程题》 — 秦伟博客&url=https://qw8.github.io/interview/javascript-bian-cheng-ti.html&via=https://qw8.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://qw8.github.io/interview/javascript-bian-cheng-ti.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKElEQVR42u3aS2rEMBAFwLn/pZNtILHnPUkTsFReBeNoVDY0/dHrFV9fP66rO/dPXj2TrLnswsDAeCzj6/a6f+b3OvmLSFZO9oaBgXEO4+qHk6CZ3EnCaBKsL+9jYGBgxEEw2fr9djEwMDA+EXBzwFjIxsDAwMiL2GRbeTcsD76La3EMDIwHMvKu+////ZH5BgYGxqMYa8vRvGRdvCsMDIytGW3alzf984RvLOBiYGCcw0iOTbRHLmay1PwYxx/fAQMDY1NG+89t2pcfJktC+YJvgoGB8UDGzM8no82x1eoRJgYGxjGMtrBs79z/VpsmYmBgnMOYKVPbwxD54bO8qYeBgXECY9VRsLHxwHyv7M0kFgMDYzvGfENtnjpYKmNgYBzJKErHeHg5lnQWp0UwMDAOYORbT4remXQwD7gYGBgnMJIBQB6I8+FlO4QovgkGBsZ2jHwTSUO/LU1nGm2vsXeJgYHxQEZ+DKItQdtBaVvEYmBgnMbI07j59G5mqFB8EwwMjO0YecDNn8+DbH4U7E0jDwMD4zBGnoq1ZXC76SJNxMDAOIDRFqhtCC5C51gqiYGBsSnjc8Vqy0iGCm+SQgwMjE0ZbVt/7UhgLJTn62BgYOzEaIPsfHM/D8cLTo5gYGBsxBgrU/PQmad9Y8UzBgYGRt4sa7e4ah0MDAyMsfbW2MihDdwYGBjnMOaPTYyVrGNsDAyM0xgzvayxF9FucdkgEwMD43mMb6g55PMXhzdNAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>




<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '(つェ⊂)咦!跑去哪里了';
            clearTimeout(titleTime);
        } else {
            document.title = '欢迎回来━(*｀∀´*)ノ';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>




<!-- 点击特效 -->
<script type="text/javascript" src="/js/clicklove.js"></script>
<!--动态线条背景-->
<script type="text/javascript"
        color="220,220,220" opacity='0.7' zIndex="-2" count="200"
        src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script>
<!-- 雪花特效 -->
<script type="text/javascript" src="/js/jquery-3.4.1.js"></script>
<script type="text/javascript">
    var windowWidth = $(window).width();
    if (windowWidth > 480) {
        document.write('<script type="text/javascript" src="/js/snow.js"><\/script>');
    }
</script>

<script>!function(e){var r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function t(){for(var c=0;c<r.length;c++)t=r[c],void 0,0<=(n=t.getBoundingClientRect()).top&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=r[c];t=o,n=function(){r=r.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}t(),e.addEventListener("scroll",function(){!function(t,n){clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)}(t,e)})}(this);</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"superSample":2,"position":"right","width":150,"height":300,"hOffset":-25,"vOffset":30},"mobile":{"show":false,"scale":1.2},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
