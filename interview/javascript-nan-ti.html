<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>JavaScript难题 | 秦伟博客 | 前端、全栈、SEO的知识点、面试题与学习链接的整理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="JavaScript,编程题">
    <meta name="description" content="国外某网站给出了44道JS难题，试着做了下，只做对了17道。这些题涉及面非常广，涵盖JS原型、函数细节、强制转换、闭包等知识，而且都是非常细节的东西，透过这些小细节可以折射出很多高级的JS知识点。 你可以通过传送门先去测试一下你的水平，然后回来看看我的解析。为了详细解释这些细节，我也查阅了不少资料，弥补了很多JS知识盲点。 1. parseInt 遇上 map123456[&quot;1&quot;, &quot;2&quot;, &quot;3">
<meta name="keywords" content="JavaScript,编程题">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript难题">
<meta property="og:url" content="https://qw66.gitee.io/interview/javascript-nan-ti.html">
<meta property="og:site_name" content="秦伟博客">
<meta property="og:description" content="国外某网站给出了44道JS难题，试着做了下，只做对了17道。这些题涉及面非常广，涵盖JS原型、函数细节、强制转换、闭包等知识，而且都是非常细节的东西，透过这些小细节可以折射出很多高级的JS知识点。 你可以通过传送门先去测试一下你的水平，然后回来看看我的解析。为了详细解释这些细节，我也查阅了不少资料，弥补了很多JS知识盲点。 1. parseInt 遇上 map123456[&quot;1&quot;, &quot;2&quot;, &quot;3">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2024-02-18T03:11:22.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript难题">
<meta name="twitter:description" content="国外某网站给出了44道JS难题，试着做了下，只做对了17道。这些题涉及面非常广，涵盖JS原型、函数细节、强制转换、闭包等知识，而且都是非常细节的东西，透过这些小细节可以折射出很多高级的JS知识点。 你可以通过传送门先去测试一下你的水平，然后回来看看我的解析。为了详细解释这些细节，我也查阅了不少资料，弥补了很多JS知识盲点。 1. parseInt 遇上 map123456[&quot;1&quot;, &quot;2&quot;, &quot;3">
    
        <link rel="alternate" type="application/atom+xml" title="秦伟博客" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/qw.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
<div id="loading" class="active"></div>

<aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">秦伟</h5>
          <a href="mailto:124729081@qq.com" title="124729081@qq.com" class="mail">124729081@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-hourglass"></i>
                时光
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://wpa.qq.com/msgrd?v=3&uin=124729081&site=qq&menu=yes" target="_blank" >
                <i class="icon icon-lg icon-qq"></i>
                聊天
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=124729081@qq.com"  >
                <i class="icon icon-lg icon-envelope-o"></i>
                邮箱
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/user"  >
                <i class="icon icon-lg icon-user"></i>
                简介
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://gitee.com/qw66" target="_blank" >
                <i class="icon icon-lg icon-code"></i>
                Gitee
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/qw8" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

<main id="main">
    <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">JavaScript难题</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">JavaScript难题</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-05-29T02:41:39.000Z" itemprop="datePublished" class="page-time">
  2020-05-29
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/前端面试题/">前端面试题</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-parseInt-遇上-map"><span class="post-toc-number">1.</span> <span class="post-toc-text">1. parseInt 遇上 map</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-神奇的null"><span class="post-toc-number">2.</span> <span class="post-toc-text">2.  神奇的null</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-愤怒的reduce"><span class="post-toc-number">3.</span> <span class="post-toc-text">3. 愤怒的reduce</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-该死的优先级"><span class="post-toc-number">4.</span> <span class="post-toc-text">4. 该死的优先级</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-神鬼莫测之变量提升"><span class="post-toc-number">5.</span> <span class="post-toc-text">5. 神鬼莫测之变量提升</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-死循环陷阱"><span class="post-toc-number">6.</span> <span class="post-toc-text">6. 死循环陷阱</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-过滤器魔法"><span class="post-toc-number">7.</span> <span class="post-toc-text">7. 过滤器魔法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-警惕IEEE-754标准"><span class="post-toc-number">8.</span> <span class="post-toc-text">8. 警惕IEEE 754标准</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-字符串陷阱"><span class="post-toc-number">9.</span> <span class="post-toc-text">9. 字符串陷阱</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-再一次的字符串陷阱"><span class="post-toc-number">10.</span> <span class="post-toc-text">10. 再一次的字符串陷阱</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#11-并非都是奇偶"><span class="post-toc-number">11.</span> <span class="post-toc-text">11. 并非都是奇偶</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#12-parseInt小贼"><span class="post-toc-number">12.</span> <span class="post-toc-text">12. parseInt小贼</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#13-数组原型是数组"><span class="post-toc-number">13.</span> <span class="post-toc-text">13. 数组原型是数组</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#14-一言难尽的强制转换"><span class="post-toc-number">14.</span> <span class="post-toc-text">14. 一言难尽的强制转换</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#15-撒旦之子“-”"><span class="post-toc-number">15.</span> <span class="post-toc-text">15. 撒旦之子“==”</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#16-加号-VS-减号"><span class="post-toc-number">16.</span> <span class="post-toc-text">16. 加号 VS 减号</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#17-打死那个疯子"><span class="post-toc-number">17.</span> <span class="post-toc-text">17. 打死那个疯子</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#18-淘气的map"><span class="post-toc-number">18.</span> <span class="post-toc-text">18. 淘气的map</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#19-统统算我的"><span class="post-toc-number">19.</span> <span class="post-toc-text">19. 统统算我的</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#20-损失精度的IEEE-754"><span class="post-toc-number">20.</span> <span class="post-toc-text">20. 损失精度的IEEE 754</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#21-反转世界"><span class="post-toc-number">21.</span> <span class="post-toc-text">21. 反转世界</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#22-最小的正值"><span class="post-toc-number">22.</span> <span class="post-toc-text">22. 最小的正值</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#23-谨记优先级"><span class="post-toc-number">23.</span> <span class="post-toc-text">23. 谨记优先级</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#24-坑爹中的战斗机"><span class="post-toc-number">24.</span> <span class="post-toc-text">24. 坑爹中的战斗机</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#25-小数点魔术"><span class="post-toc-number">25.</span> <span class="post-toc-text">25. 小数点魔术</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#26-自动提升为全局变量"><span class="post-toc-number">26.</span> <span class="post-toc-text">26. 自动提升为全局变量</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#27-正则表达式实例"><span class="post-toc-number">27.</span> <span class="post-toc-text">27. 正则表达式实例</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#28-数组也爱比大小"><span class="post-toc-number">28.</span> <span class="post-toc-text">28. 数组也爱比大小</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#29-原型把戏"><span class="post-toc-number">29.</span> <span class="post-toc-text">29. 原型把戏</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#30-构造函数的函数"><span class="post-toc-number">30.</span> <span class="post-toc-text">30. 构造函数的函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#31-禁止修改函数名"><span class="post-toc-number">31.</span> <span class="post-toc-text">31. 禁止修改函数名</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#32-替换陷阱"><span class="post-toc-number">32.</span> <span class="post-toc-text">32. 替换陷阱</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#33-Function的名字"><span class="post-toc-number">33.</span> <span class="post-toc-text">33. Function的名字</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#34-正则测试陷阱"><span class="post-toc-number">34.</span> <span class="post-toc-text">34. 正则测试陷阱</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#35-逗号定义数组"><span class="post-toc-number">35.</span> <span class="post-toc-text">35. 逗号定义数组</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#36-保留字-class"><span class="post-toc-number">36.</span> <span class="post-toc-text">36. 保留字 class</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#37-无效日期"><span class="post-toc-number">37.</span> <span class="post-toc-text">37. 无效日期</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#38-神鬼莫测的函数长度"><span class="post-toc-number">38.</span> <span class="post-toc-text">38. 神鬼莫测的函数长度</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#39-Date的面具"><span class="post-toc-number">39.</span> <span class="post-toc-text">39. Date的面具</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#40-min与max共舞"><span class="post-toc-number">40.</span> <span class="post-toc-text">40. min与max共舞</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#41-警惕全局匹配"><span class="post-toc-number">41.</span> <span class="post-toc-text">41. 警惕全局匹配</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#42-最熟悉的陌生人"><span class="post-toc-number">42.</span> <span class="post-toc-text">42. 最熟悉的陌生人</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#43-匹配隐式转换"><span class="post-toc-number">43.</span> <span class="post-toc-text">43. 匹配隐式转换</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#44-重复声明变量"><span class="post-toc-number">44.</span> <span class="post-toc-text">44. 重复声明变量</span></a></li></ol>
        </nav>
    </aside>


<article id="post-interview/JavaScript难题"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">JavaScript难题</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-05-29 10:41:39" datetime="2020-05-29T02:41:39.000Z"  itemprop="datePublished">2020-05-29</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/前端面试题/">前端面试题</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>国外某网站给出了44道JS难题，试着做了下，只做对了17道。这些题涉及面非常广，涵盖<strong>JS原型、函数细节、强制转换、闭包</strong>等知识，而且都是非常细节的东西，透过这些小细节可以折射出很多高级的JS知识点。</p>
<p>你可以通过<a href="https://link.jianshu.com?t=http://javascript-puzzlers.herokuapp.com/" target="_blank" rel="noopener">传送门</a>先去测试一下你的水平，然后回来看看我的解析。为了详细解释这些细节，我也查阅了不少资料，弥补了很多JS知识盲点。</p>
<h3 id="1-parseInt-遇上-map"><a href="#1-parseInt-遇上-map" class="headerlink" title="1. parseInt 遇上 map"></a>1. parseInt 遇上 map</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>].map(<span class="built_in">parseInt</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. ["1", "2", "3"]</span></span><br><span class="line"><span class="comment">// B. [1, 2, 3]</span></span><br><span class="line"><span class="comment">// C. [0, 1, 2]</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是D。实际上返回的结果是 <code>[1, NaN, NaN]</code> ，因为 <code>parseInt</code> 函数只需要两个参数 <code>parseInt(value, radix)</code> ，而 <code>map</code> 的回调函数需要三个参数 <code>callback(currentValue, index, array)</code>。MDN文档中指明 <code>parseInt</code> 第二个参数是一个2到36之间的整数值，用于指定转换中采用的基数。如果省略该参数或其值为0，则数字将以10为基础来解析。如果该参数小于2或者大于36，则 <code>parseInt</code> 返回 <code>NaN</code>。此外，转换失败也会返回 <code>NaN</code>。</p>
<p>现在来分析问题。<code>parseInt(&quot;1&quot;, 0)</code> 的结果是当作十进制来解析，返回 <code>1</code>；<code>parseInt(&quot;2&quot;, 1)</code> 的第二个参数非法，返回 <code>NaN</code>；<code>parseInt(&quot;3&quot;, 2)</code> 在二进制中，<code>&quot;3&quot;</code> 是非法字符，转换失败，返回 <code>NaN</code>。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN: <a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" rel="noopener">Array.prototype.map()</a></li>
<li>MDN: <a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/parseInt" target="_blank" rel="noopener">parseInt</a></li>
</ul>
<h3 id="2-神奇的null"><a href="#2-神奇的null" class="headerlink" title="2.  神奇的null"></a>2.  神奇的null</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">typeof</span> <span class="literal">null</span>, <span class="literal">null</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. ["object", false]</span></span><br><span class="line"><span class="comment">// B. [null, false]</span></span><br><span class="line"><span class="comment">// C. ["object", true]</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是A。在MDN关于 <code>null</code> 的文档中也特别指出来了，<code>typeof null</code> 的结果是 <code>&quot;object&quot;</code>，它是ECMAScript的bug，其实应该是 <code>&quot;null&quot;</code>。<strong>但这个bug由来已久，在JavaScript中已经存在了将近二十年，也许永远不会修复，因为这牵扯到太多的Web系统，修复它会产生更多的bug，令许多系统无法正常工作</strong>。而 <code>instanceof</code> 运算符是用来测试一个对象在其原型链构造函数上是否具有 <code>prototype</code> 属性，<code>null</code> 值并不是以 <code>Object</code> 原型创建出来的，所以 <code>null instanceof Object</code> 返回 <code>false</code>。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener">null</a></li>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof" target="_blank" rel="noopener">instanceof</a></li>
<li>CSDN博客：<a href="https://link.jianshu.com?t=http://bbs.csdn.net/topics/370040293" target="_blank" rel="noopener">null instanceof Object 求解？</a></li>
</ul>
<h3 id="3-愤怒的reduce"><a href="#3-愤怒的reduce" class="headerlink" title="3. 愤怒的reduce"></a>3. 愤怒的reduce</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[ [<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>].reduce(<span class="built_in">Math</span>.pow), [].reduce(<span class="built_in">Math</span>.pow) ]</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. an error</span></span><br><span class="line"><span class="comment">// B. [9, 0]</span></span><br><span class="line"><span class="comment">// C. [9, NaN]</span></span><br><span class="line"><span class="comment">// D. [9, undefined]</span></span><br></pre></td></tr></table></figure>

<p>答案是A。MDN文档中关于 <code>Array.prototype.reduce()</code> 写得很清楚：</p>
<blockquote>
<p>如果数组为空并且没有提供initialValue， 会抛出TypeError 。如果数组仅有一个元素（无论位置如何）并且没有提供initialValue， 或者有提供initialValue但是数组为空，那么此唯一值将被返回并且callback不会被执行。</p>
</blockquote>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" target="_blank" rel="noopener">Array.prototype.reduce()</a></li>
</ul>
<h3 id="4-该死的优先级"><a href="#4-该死的优先级" class="headerlink" title="4. 该死的优先级"></a>4. 该死的优先级</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> val = <span class="string">'smtg'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Value is '</span> + (val === <span class="string">'smtg'</span>) ? <span class="string">'Something'</span> : <span class="string">'Nothing'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. Value is Something</span></span><br><span class="line"><span class="comment">// B. Value is Nothing</span></span><br><span class="line"><span class="comment">// C. NaN</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是D。实际上输出 <code>&quot;Something&quot;</code>，因为 <code>+</code> 的优先级比条件运算符 <code>condition ? val1 : val2</code> 的优先级高。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Expressions_and_Operators#运算符优先级(Operator_precedence)" target="_blank" rel="noopener">运算符优先级</a></li>
</ul>
<h3 id="5-神鬼莫测之变量提升"><a href="#5-神鬼莫测之变量提升" class="headerlink" title="5. 神鬼莫测之变量提升"></a>5. 神鬼莫测之变量提升</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'World!'</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> name = <span class="string">'Jack'</span>;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Goodbye '</span> + name);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Hello '</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. Goodbye Jack</span></span><br><span class="line"><span class="comment">// B. Hello Jack</span></span><br><span class="line"><span class="comment">// C. Hello undefined</span></span><br><span class="line"><span class="comment">// D. Hello World</span></span><br></pre></td></tr></table></figure>

<p>答案是A。看如下MDN官方文档的解释：</p>
<blockquote>
<p>在 JavaScript中， functions 和 variables 会被提升。变量提升是JavaScript将声明移至作用域 scope (全局域或者当前函数作用域) 顶部的行为。</p>
</blockquote>
<blockquote>
<p>这意味着你可以在声明一个函数或变量之前引用它，或者可以说：一个变量或函数可以在它被引用之后声明。</p>
</blockquote>
<p>所以，上面的代码与下面这段代码是等价的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'World!'</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">      name = <span class="string">'Jack'</span>;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Goodbye '</span> + name);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Hello '</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Glossary/Hoisting" target="_blank" rel="noopener">变量提升</a></li>
<li>这篇博客解释的比较详细：<a href="https://link.jianshu.com?t=http://zha-zi.iteye.com/blog/2037026" target="_blank" rel="noopener">js变量提升</a></li>
</ul>
<h3 id="6-死循环陷阱"><a href="#6-死循环陷阱" class="headerlink" title="6. 死循环陷阱"></a>6. 死循环陷阱</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> END = <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">53</span>);</span><br><span class="line"><span class="keyword">var</span> START = END - <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = START; i &lt;= END; i++) &#123; </span><br><span class="line">  count++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(count);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. 0</span></span><br><span class="line"><span class="comment">// B. 100</span></span><br><span class="line"><span class="comment">// C. 101</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是D。在JavaScript中，<code>2^53</code> 是最大的值，没有比这更大的值了。所以 <code>2^53 + 1 == 2^53</code>，所以这个循环无法终止。</p>
<h3 id="7-过滤器魔法"><a href="#7-过滤器魔法" class="headerlink" title="7. 过滤器魔法"></a>7. 过滤器魔法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ary = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line">ary[<span class="number">10</span>] = <span class="number">10</span>;</span><br><span class="line">ary.filter(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x === <span class="literal">undefined</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. [undefined x 7]</span></span><br><span class="line"><span class="comment">// B. [0, 1, 2, 10]</span></span><br><span class="line"><span class="comment">// C. []</span></span><br><span class="line"><span class="comment">// D. [undefined]</span></span><br></pre></td></tr></table></figure>

<p>答案是C。看MDN官方文档的描述：</p>
<blockquote>
<p>filter 为数组中的每个元素调用一次 callback 函数，并利用所有使得 callback 返回 true 或 等价于 true 的值 的元素创建一个新数组。<strong>callback 只会在已经赋值的索引上被调用，对于那些已经被删除或者从未被赋值的索引不会被调用。</strong>那些没有通过 callback 测试的元素会被跳过，不会被包含在新数组中。</p>
</blockquote>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" target="_blank" rel="noopener">Array.prototype.filter()</a></li>
</ul>
<h3 id="8-警惕IEEE-754标准"><a href="#8-警惕IEEE-754标准" class="headerlink" title="8. 警惕IEEE 754标准"></a>8. 警惕IEEE 754标准</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> two = <span class="number">0.2</span>;</span><br><span class="line"><span class="keyword">var</span> one = <span class="number">0.1</span>;</span><br><span class="line"><span class="keyword">var</span> eight = <span class="number">0.8</span>;</span><br><span class="line"><span class="keyword">var</span> six = <span class="number">0.6</span>;</span><br><span class="line">[two - one == one, eight - six == two]</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. [true, false]</span></span><br><span class="line"><span class="comment">// B. [false, false]</span></span><br><span class="line"><span class="comment">// C. [true, false]</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是C。JavaScript中采用<strong>双精度浮点数格式，即IEEE 754标准</strong>。在该格式下，有些数字无法表示出来，比如：<code>0.1 + 0.2 = 0.30000000000000004</code> ，这不是JavaScript的锅，所有采用该标准的语言都有这个问题，比如：Java、Python等。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>Wiki：<a href="https://link.jianshu.com?t=https://en.wikipedia.org/wiki/Double-precision_floating-point_format" target="_blank" rel="noopener">Double-precision floating-point format</a></li>
</ul>
<h3 id="9-字符串陷阱"><a href="#9-字符串陷阱" class="headerlink" title="9. 字符串陷阱"></a>9. 字符串陷阱</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showCase</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span>(value) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'A'</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Case A'</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'B'</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Case B'</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="literal">undefined</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'undefined'</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Do not know!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">showCase(<span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'A'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. Case A</span></span><br><span class="line"><span class="comment">// B. Case B</span></span><br><span class="line"><span class="comment">// C. Do not know!</span></span><br><span class="line"><span class="comment">// D. undefined</span></span><br></pre></td></tr></table></figure>

<p>答案是C。在 <code>switch</code> 内部使用严格相等 <code>===</code> 进行判断，并且 <code>new String(&quot;A&quot;)</code> 返回的是一个对象，而 <code>String(&quot;A&quot;)</code> 则是直接返回字符串 <code>&quot;A&quot;</code>。你也可以参考MDN中对原始字符串和String对象的区分：</p>
<blockquote>
<p>Note that JavaScript distinguishes between String objects and primitive string values. (The same is true of Boolean and Numbers.)</p>
</blockquote>
<blockquote>
<p>String literals (denoted by double or single quotes) and strings returned from String calls in a non-constructor context (i.e., without using the new keyword) are primitive strings. JavaScript automatically converts primitives to String objects, so that it’s possible to use String object methods for primitive strings. In contexts where a method is to be invoked on a primitive string or a property lookup occurs, JavaScript will automatically wrap the string primitive and call the method or perform the property lookup.</p>
</blockquote>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String#对原始字符串和_String_对象的区分" target="_blank" rel="noopener">String</a></li>
</ul>
<h3 id="10-再一次的字符串陷阱"><a href="#10-再一次的字符串陷阱" class="headerlink" title="10. 再一次的字符串陷阱"></a>10. 再一次的字符串陷阱</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showCase</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span>(value) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'A'</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Case A'</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'B'</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Case B'</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="literal">undefined</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'undefined'</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Do not know!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">showCase(<span class="built_in">String</span>(<span class="string">'A'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. Case A</span></span><br><span class="line"><span class="comment">// B. Case B</span></span><br><span class="line"><span class="comment">// C. Do not know!</span></span><br><span class="line"><span class="comment">// D. undefined</span></span><br></pre></td></tr></table></figure>

<p>答案显然是A。与上面唯一不同的是没有使用 <code>new</code> 关键字，所以直接返回字符串，实际上，<code>typeof string(&quot;A&quot;) === &quot;string&quot;</code> 的结果是 <code>true</code>。解释参见第9条的解释。</p>
<h3 id="11-并非都是奇偶"><a href="#11-并非都是奇偶" class="headerlink" title="11. 并非都是奇偶"></a>11. 并非都是奇偶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isOdd</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num % <span class="number">2</span> == <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEven</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num % <span class="number">2</span> == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isSane</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> isEven(num) || isOdd(num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> values = [<span class="number">7</span>, <span class="number">4</span>, <span class="string">"13"</span>, <span class="number">-9</span>, <span class="literal">Infinity</span>];</span><br><span class="line">values.map(isSane);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. [true, true, true, true, true]</span></span><br><span class="line"><span class="comment">// B. [true, true, true, true, false]</span></span><br><span class="line"><span class="comment">// C. [true, true, true, false, false]</span></span><br><span class="line"><span class="comment">// D. [true, true, false, false, false]</span></span><br></pre></td></tr></table></figure>

<p>答案是C。<code>-9 % 2 = -1</code> 以及 <code>Infinity % 2 = NaN</code>，求余运算符会保留符号，所以只有 <code>isEven</code> 的判断是可靠的。</p>
<h3 id="12-parseInt小贼"><a href="#12-parseInt小贼" class="headerlink" title="12. parseInt小贼"></a>12. parseInt小贼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="number">3</span>, <span class="number">8</span>);</span><br><span class="line"><span class="built_in">parseInt</span>(<span class="number">3</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">parseInt</span>(<span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. 3, 3, 3</span></span><br><span class="line"><span class="comment">// B. 3, 3, NaN</span></span><br><span class="line"><span class="comment">// C. 3, NaN, NaN</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是D。实际结果是 <code>3, NaN, 3</code>，这个在第一个问题中解释的很清楚了。</p>
<h3 id="13-数组原型是数组"><a href="#13-数组原型是数组" class="headerlink" title="13. 数组原型是数组"></a>13. 数组原型是数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.isArray( <span class="built_in">Array</span>.prototype )</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. true</span></span><br><span class="line"><span class="comment">// B. false</span></span><br><span class="line"><span class="comment">// C. error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是A。<strong>一个鲜为人知的事实：其实 <code>Array.prototype</code> 也是一个数组。这点在MDN文档中提到过。</strong></p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray" target="_blank" rel="noopener">Array.isArray()</a></li>
</ul>
<h3 id="14-一言难尽的强制转换"><a href="#14-一言难尽的强制转换" class="headerlink" title="14. 一言难尽的强制转换"></a>14. 一言难尽的强制转换</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span> ([<span class="number">0</span>]) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a == <span class="literal">true</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"wut"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. true</span></span><br><span class="line"><span class="comment">// B. false</span></span><br><span class="line"><span class="comment">// C. "wut"</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是B。这个是JavaScript中强制转换的经典案例，关于强制转换不是一两句话可以跟你说清楚的，我建议你系统性的学习一下，推荐你看看《你不知道的JavaScript-中卷》这本书，如果不舍得买书，github上有英文原版：<a href="https://link.jianshu.com?t=https://github.com/getify/You-Dont-Know-JS" target="_blank" rel="noopener">You-Dont-Know-JS</a>，深入理解之后你就是高手了。</p>
<p>好了，回到当前这个问题。当 <code>[0]</code> 需要被强制转成 <code>Boolean</code> 的时候会被认为是 <code>true</code>。所以进入第一个 <code>if</code> 语句，而 <code>a == true</code> 的转换规则在ES5规范的第11.9.3节中已经定义过，你可以自己详细探索下。</p>
<p>规范指出，<code>==</code> 相等中，如果有一个操作数是布尔类型，会先把他转成数字，所以比较变成了 <code>[0] == 1</code>；同时规范指出如果其他类型和数字比较，会尝试把这个类型转成数字再进行宽松比较，而对象（数组也是对象）会先调用它的 <code>toString()</code> 方法，此时 <code>[0]</code> 会变成 <code>&quot;0&quot;</code>，然后将字符串 <code>&quot;0&quot;</code> 转成数字 <code>0</code>，而 <code>0 == 1</code> 的结果显然是 <code>false</code>。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>ES5规范：<a href="https://link.jianshu.com?t=http://es5.github.io/#x11.9.3" target="_blank" rel="noopener">11.9.3</a></li>
<li>《你不知道的JavaScript-中卷》</li>
</ul>
<h3 id="15-撒旦之子“-”"><a href="#15-撒旦之子“-”" class="headerlink" title="15. 撒旦之子“==”"></a>15. 撒旦之子“==”</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[]==[]</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. true</span></span><br><span class="line"><span class="comment">// B. false</span></span><br><span class="line"><span class="comment">// C. error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是B。ES5规范11.9.3.1-f指出：如果比较的两个对象指向的是同一个对象，就返回 <code>true</code>，否则就返回 <code>false</code>，显然，这是两个不同的数组对象。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>ES5规范：<a href="https://link.jianshu.com?t=http://es5.github.io/#x11.9.3" target="_blank" rel="noopener">11.9.3.1</a></li>
<li>《你不知道的JavaScript-中卷》</li>
</ul>
<h3 id="16-加号-VS-减号"><a href="#16-加号-VS-减号" class="headerlink" title="16. 加号 VS 减号"></a>16. 加号 VS 减号</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'5'</span> + <span class="number">3</span>;</span><br><span class="line"><span class="string">'5'</span> - <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. "53", 2</span></span><br><span class="line"><span class="comment">// B. 8, 2</span></span><br><span class="line"><span class="comment">// C. error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是A。<code>&quot;5&quot; + 2 = &quot;52&quot;</code> 很好理解，<code>+</code> 运算符中只要有一个是字符串，就会变成字符串拼接操作。你不知道的是，<code>-</code> 运算符要求两个操作数都是数字，如果不是，会强制转换成数字，所以结果就变成了 <code>5 - 2 = 3</code>。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>《你不知道的JavaScript-中卷》，第四章：4.4.2 字符串和数字之间的隐式强制类型转换</li>
</ul>
<h3 id="17-打死那个疯子"><a href="#17-打死那个疯子" class="headerlink" title="17. 打死那个疯子"></a>17. 打死那个疯子</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> + - + + + - + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// A. 2</span></span><br><span class="line"><span class="comment">// B. 1</span></span><br><span class="line"><span class="comment">// C. error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是A。这个只能出现在示例代码中，如果你发现哪个疯子写了这个在生产代码中，打死他就行了。你只要知道 <code>+ 1 = 1</code>和<code>- 1 = -1</code>，注意符号之间的空格。两个减号抵消，所以最终结果等效于 <code>1 + 1 = 2</code>。或者你也可以在符号之间插入 <code>0</code> 来理解，即 <code>1 + 0 - 0 + 0 + 0 + 0 - 0 + 1</code>，这样你就一目了然了吧！<strong>千万别写这样的代码，因为可能会被打死！</strong></p>
<h3 id="18-淘气的map"><a href="#18-淘气的map" class="headerlink" title="18. 淘气的map"></a>18. 淘气的map</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ary = <span class="built_in">Array</span>(<span class="number">3</span>);</span><br><span class="line">ary[<span class="number">0</span>] = <span class="number">2</span>;</span><br><span class="line">ary.map(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"1"</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. [2, 1, 1]</span></span><br><span class="line"><span class="comment">// B. ["1", "1", "1"]</span></span><br><span class="line"><span class="comment">// C. [2, "1", "1"]</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是D。实际上结果是 <code>[&quot;1&quot;, undefined x 2]</code>，因为规范写得很清楚：</p>
<blockquote>
<p>map 方法会给原数组中的每个元素都按顺序调用一次 callback 函数。callback 每次执行后的返回值组合起来形成一个新数组。 callback 函数只会在有值的索引上被调用；那些从来没被赋过值或者使用 delete 删除的索引则不会被调用。</p>
</blockquote>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN: <a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" rel="noopener">Array.prototype.map()</a></li>
</ul>
<h3 id="19-统统算我的"><a href="#19-统统算我的" class="headerlink" title="19. 统统算我的"></a>19. 统统算我的</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sidEffecting</span>(<span class="params">ary</span>) </span>&#123;</span><br><span class="line">  ary[<span class="number">0</span>] = ary[<span class="number">2</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  c = <span class="number">10</span>;</span><br><span class="line">  sidEffecting(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. 3</span></span><br><span class="line"><span class="comment">// B. 12</span></span><br><span class="line"><span class="comment">// C. error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是D。实际上结果是 <code>21</code>。<strong>在JavaScript中，参数变量和 <code>arguments</code> 是双向绑定的</strong>。改变参数变量，<code>arguments</code> 中的值会立即改变；而改变 <code>arguments</code> 中的值，参数变量也会对应改变。</p>
<h3 id="20-损失精度的IEEE-754"><a href="#20-损失精度的IEEE-754" class="headerlink" title="20. 损失精度的IEEE 754"></a>20. 损失精度的IEEE 754</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">111111111111111110000</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">1111</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a + b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. 111111111111111111111</span></span><br><span class="line"><span class="comment">// B. 111111111111111110000</span></span><br><span class="line"><span class="comment">// C. NaN</span></span><br><span class="line"><span class="comment">// D. Infinity</span></span><br></pre></td></tr></table></figure>

<p>答案是B。这是IEEE 754规范的黑锅，不是JavaScript的问题。表示这么大的数占用过多位数，会丢失精度，学过计算机组成原理的应该知道是怎么回事。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>Wiki：<a href="https://link.jianshu.com?t=https://en.wikipedia.org/wiki/Double-precision_floating-point_format" target="_blank" rel="noopener">Double-precision floating-point format</a></li>
</ul>
<h3 id="21-反转世界"><a href="#21-反转世界" class="headerlink" title="21. 反转世界"></a>21. 反转世界</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = [].reverse;</span><br><span class="line">x();</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. []</span></span><br><span class="line"><span class="comment">// B. undefined</span></span><br><span class="line"><span class="comment">// C. error</span></span><br><span class="line"><span class="comment">// D. window</span></span><br></pre></td></tr></table></figure>

<p>答案是D。MDN规范关于 <code>reverse</code> 的描述：</p>
<blockquote>
<p>reverse 方法颠倒数组中元素的位置，并返回该数组的引用。</p>
</blockquote>
<p>而这里调用的时候没有制定数组，所以默认的 <code>this</code> 就是 <code>window</code>，所以最后结果返回的是 <code>window</code>。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse" target="_blank" rel="noopener">Array.prototype.reverse()</a></li>
</ul>
<h3 id="22-最小的正值"><a href="#22-最小的正值" class="headerlink" title="22. 最小的正值"></a>22. 最小的正值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.MIN_VALUE &gt; <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// A. false</span></span><br><span class="line"><span class="comment">// B. true</span></span><br><span class="line"><span class="comment">// C. error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是B。看规范描述吧：</p>
<blockquote>
<p>MIN_VALUE属性是 JavaScript 里最接近 0 的正值，而不是最小的负值。</p>
</blockquote>
<blockquote>
<p>MIN_VALUE的值约为 5e-324。小于 MIN_VALUE<br> (“underflow values”) 的值将会转换为 0。</p>
</blockquote>
<blockquote>
<p>因为 MIN_VALUE是 Number 的一个静态属性，因此应该直接使用： Number.MIN_VALUE，而不是作为一个创建的 Number实例的属性。</p>
</blockquote>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/MIN_VALUE" target="_blank" rel="noopener">Number.MIN_VALUE</a></li>
</ul>
<h3 id="23-谨记优先级"><a href="#23-谨记优先级" class="headerlink" title="23. 谨记优先级"></a>23. 谨记优先级</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span> &lt; <span class="number">2</span> &lt; <span class="number">3</span>, <span class="number">3</span> &lt; <span class="number">2</span> &lt; <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. [true, true]</span></span><br><span class="line"><span class="comment">// B. [true, false]</span></span><br><span class="line"><span class="comment">// C. error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是A。<code>&lt;</code>和<code>&gt;</code>的优先级都是<strong>从左到右</strong>，所以 <code>1 &lt; 2 &lt; 3</code> 会先比较 <code>1 &lt; 2</code>，这会得到 <code>true</code>，但是 <code>&lt;</code> 要求比较的两边都是数字，所以会发生隐式强制转换，将 <code>true</code> 转换成 <code>1</code>，所以最后就变成了比较 <code>1 &lt; 3</code>，结果显然为 <code>true</code>。同理可以分析后者。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" target="_blank" rel="noopener">运算符优先级</a></li>
</ul>
<h3 id="24-坑爹中的战斗机"><a href="#24-坑爹中的战斗机" class="headerlink" title="24. 坑爹中的战斗机"></a>24. 坑爹中的战斗机</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the most classic wtf</span></span><br><span class="line"><span class="number">2</span> == [[[<span class="number">2</span>]]]</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. true</span></span><br><span class="line"><span class="comment">// B. false</span></span><br><span class="line"><span class="comment">// C. undefined</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是A。根据ES5规范，<strong>如果比较的两个值中有一个是数字类型，就会尝试将另外一个值强制转换成数字，再进行比较。</strong>而数组强制转换成数字的过程会先调用它的 <code>toString</code>方法转成字符串，然后再转成数字。所以 <code>[2]</code>会被转成 <code>&quot;2&quot;</code>，然后递归调用，最终 <code>[[[2]]]</code> 会被转成数字 <code>2</code>。</p>
<h3 id="25-小数点魔术"><a href="#25-小数点魔术" class="headerlink" title="25. 小数点魔术"></a>25. 小数点魔术</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>toString();</span><br><span class="line"><span class="number">3.</span>.toString();</span><br><span class="line"><span class="number">3.</span>..toString();</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. "3", error, error</span></span><br><span class="line"><span class="comment">// B. "3", "3.0", error</span></span><br><span class="line"><span class="comment">// C. error, "3", error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是C。点运算符会被优先识别为数字常量的一部分，然后才是对象属性访问符。所以 <code>3.toString()</code> 实际上被JS引擎解析成 <code>(3.)toString()</code>，显然会出现语法错误。但是如果你这么写 <code>(3).toString()</code>，人为加上括号，这就是合法的。</p>
<h3 id="26-自动提升为全局变量"><a href="#26-自动提升为全局变量" class="headerlink" title="26. 自动提升为全局变量"></a>26. 自动提升为全局变量</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x = y = <span class="number">1</span>;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="built_in">console</span>.log(y);</span><br><span class="line"><span class="built_in">console</span>.log(x);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. 1, 1</span></span><br><span class="line"><span class="comment">// B. error, error</span></span><br><span class="line"><span class="comment">// C. 1, error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是C。很经典的例子，在函数中没有用 <code>var</code> 声明变量 <code>y</code>，所以 <code>y</code> 会被自动创建在全局变量 <code>window</code>下面，所以在函数外面也可以访问得到。而 <code>x</code> 由于被 <code>var</code> 声明过，所以在函数外部是无法访问的。</p>
<h3 id="27-正则表达式实例"><a href="#27-正则表达式实例" class="headerlink" title="27. 正则表达式实例"></a>27. 正则表达式实例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="regexp">/123/</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="regexp">/123/</span>;</span><br><span class="line">a == b;</span><br><span class="line">a === b;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. true, true</span></span><br><span class="line"><span class="comment">// B. true, false</span></span><br><span class="line"><span class="comment">// C. false, false</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是C。每个字面的正则表达式都是一个单独的实例，即使它们的内容相同。</p>
<h3 id="28-数组也爱比大小"><a href="#28-数组也爱比大小" class="headerlink" title="28. 数组也爱比大小"></a>28. 数组也爱比大小</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> c = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">a == b;</span><br><span class="line">a === b;</span><br><span class="line">a &gt; c;</span><br><span class="line">a &lt; c;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. false, false, false, true</span></span><br><span class="line"><span class="comment">// B. false, false, false, false</span></span><br><span class="line"><span class="comment">// C. true, true, false, true</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是A。数组也是对象，ES5规范指出如果两个对象进行相等比较，只有在它们指向同一个对象的情况下才会返回 <code>true</code>，其他情况都返回 <code>false</code>。而对象进行大小比较，会调用 <code>toString</code> 方法转成字符串进行比较，所以结果就变成了字符串 <code>&quot;1,2,3&quot;</code> 和 <code>&quot;1,2,4&quot;</code> 按照字典序进行比较了（你若不信，可以重现两个变量的 <code>toString</code> 方法，进行测试）。</p>
<h3 id="29-原型把戏"><a href="#29-原型把戏" class="headerlink" title="29. 原型把戏"></a>29. 原型把戏</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">Object</span>.prototype;</span><br><span class="line"></span><br><span class="line">[a.prototype === b, <span class="built_in">Object</span>.getPrototypeOf(a) == b]</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. [false, true]</span></span><br><span class="line"><span class="comment">// B. [true, true]</span></span><br><span class="line"><span class="comment">// C. [false, false]</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是A。对象是没有 <code>prototype</code> 属性的，所以 <code>a.prototype</code> 是 <code>undefined</code>，但我们可以通过 <code>Object.getPrototypeOf</code> 方法来获取一个对象的原型。</p>
<h3 id="30-构造函数的函数"><a href="#30-构造函数的函数" class="headerlink" title="30. 构造函数的函数"></a>30. 构造函数的函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> a = f.prototype;</span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">Object</span>.getPrototypeOf(f);</span><br><span class="line">a === b;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. true</span></span><br><span class="line"><span class="comment">// B. false</span></span><br><span class="line"><span class="comment">// C. null</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是B。这个解释起来有点绕口，我们先来看另外一段代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = p.__proto__;</span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">Object</span>.getPrototypeOf(p);</span><br><span class="line"><span class="keyword">var</span> c = Person.prototype;</span><br><span class="line"><span class="built_in">console</span>.log(a === b, a === c, b === c);</span><br><span class="line"><span class="comment">// true, true, true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d = Person.__proto__;</span><br><span class="line"><span class="keyword">var</span> e = <span class="built_in">Object</span>.getPrototypeOf(Person);</span><br><span class="line"><span class="keyword">var</span> f = <span class="built_in">Function</span>.prototype;</span><br><span class="line"><span class="built_in">console</span>.log(d === e, d === f, e === f);</span><br><span class="line"><span class="comment">// true, true, true</span></span><br></pre></td></tr></table></figure>

<p>首先你要明白，<strong>任何函数都是 <code>Function</code> 的实例</strong>，而p是函数 <code>Person</code> 的实例，<code>Object.getPrototypeOf</code> 会获取构造当前对象的原型。所以 <code>Object.getPrototypeOf(p) === Person.prototype</code>，而 <code>Object.getPrototypeOf(Person) === Function.prototype</code>，所以答案就很明显了。</p>
<p><strong>我解释的不是很好，如果读者有更好的解释，欢迎评论。</strong></p>
<h3 id="31-禁止修改函数名"><a href="#31-禁止修改函数名" class="headerlink" title="31. 禁止修改函数名"></a>31. 禁止修改函数名</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> oldName = foo.name;</span><br><span class="line">foo.name = <span class="string">"bar"</span>;</span><br><span class="line">[oldName, foo.name];</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. error</span></span><br><span class="line"><span class="comment">// B. ["", ""]</span></span><br><span class="line"><span class="comment">// C. ["foo", "foo"]</span></span><br><span class="line"><span class="comment">// D. ["foo", "bar"]</span></span><br></pre></td></tr></table></figure>

<p>答案是C。<strong>函数名是禁止修改的</strong>，规范写的很清楚，所以这里的修改无效。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name" target="_blank" rel="noopener">Function.name</a></li>
</ul>
<h3 id="32-替换陷阱"><a href="#32-替换陷阱" class="headerlink" title="32. 替换陷阱"></a>32. 替换陷阱</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"1 2 3"</span>.replace(<span class="regexp">/\d/g</span>, <span class="built_in">parseInt</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. "1 2 3"</span></span><br><span class="line"><span class="comment">// B. "0 1 2"</span></span><br><span class="line"><span class="comment">// C. "NaN 2 3"</span></span><br><span class="line"><span class="comment">// D. "1 NaN 3"</span></span><br></pre></td></tr></table></figure>

<p>答案是D。如果 <code>replace</code> 方法第二个参数是一个函数，则会在匹配的时候多次调用，第一个参数是匹配的字符串，第二个参数是匹配字符串的下标。所以变成了调用 <code>parseInt(1, 0)</code>、<code>parseInt(2, 2)</code>和<code>parseInt(3, 4)</code>，结果你就懂了。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace#指定一个函数作为参数" target="_blank" rel="noopener">String.prototype.replace()</a></li>
</ul>
<h3 id="33-Function的名字"><a href="#33-Function的名字" class="headerlink" title="33. Function的名字"></a>33. Function的名字</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> parent = <span class="built_in">Object</span>.getPrototypeOf(f);</span><br><span class="line"><span class="built_in">console</span>.log(f.name);</span><br><span class="line"><span class="built_in">console</span>.log(parent.name);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">eval</span>(f.name));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">eval</span>(parent.name));</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. "f", "Empty", "function", "function"</span></span><br><span class="line"><span class="comment">// B. "f", undefined, "function", error</span></span><br><span class="line"><span class="comment">// C. "f", "Empty", "function", error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是C。根据第30题的解释，我们知道代码中的 <code>parent</code> 实际上就是 <code>Function.prototype</code>，而它在控制台中输出为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  [native code]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>它的 <code>name</code> 属性是 <code>&quot;&quot;</code>，所以你 <code>eval(&quot;&quot;)</code>是得不到任何东西的。</p>
<h3 id="34-正则测试陷阱"><a href="#34-正则测试陷阱" class="headerlink" title="34. 正则测试陷阱"></a>34. 正则测试陷阱</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lowerCaseOnly = <span class="regexp">/^[a-z]+$/</span>;</span><br><span class="line">[lowerCaseOnly.test(<span class="literal">null</span>), lowerCaseOnly.test()]</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. [true, false]</span></span><br><span class="line"><span class="comment">// B. error</span></span><br><span class="line"><span class="comment">// C. [true, true]</span></span><br><span class="line"><span class="comment">// D. [false, true]</span></span><br></pre></td></tr></table></figure>

<p>答案是C。<code>test</code> 方法的参数如果不是字符串，会经过抽象 <code>ToString</code>操作强制转成字符串，因此实际上测试的是字符串 <code>&quot;null&quot;</code> 和 <code>&quot;undefined&quot;</code>。</p>
<h3 id="35-逗号定义数组"><a href="#35-逗号定义数组" class="headerlink" title="35. 逗号定义数组"></a>35. 逗号定义数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[,,,].join(<span class="string">", "</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. ", , , "</span></span><br><span class="line"><span class="comment">// B. "undefined, undefined, undefined, undefined"</span></span><br><span class="line"><span class="comment">// C. ", , "</span></span><br><span class="line"><span class="comment">// D. ""</span></span><br></pre></td></tr></table></figure>

<p>答案是C。JavaScript允许用逗号来定义数组，得到的数组是含有3个 <code>undefined</code> 值的数组。MDN关于 <code>join</code> 方法的描述：</p>
<blockquote>
<p>所有的数组元素被转换成字符串，再用一个分隔符将这些字符串连接起来。如果元素是undefined 或者null， 则会转化成空字符串。</p>
</blockquote>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/join" target="_blank" rel="noopener">Array.prototype.join()</a></li>
</ul>
<h3 id="36-保留字-class"><a href="#36-保留字-class" class="headerlink" title="36. 保留字 class"></a>36. 保留字 class</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">class</span>: <span class="string">"Animal"</span>, <span class="attr">name</span>: <span class="string">"Fido"</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. "Animal"</span></span><br><span class="line"><span class="comment">// B. Object</span></span><br><span class="line"><span class="comment">// C. an error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是D。实际上真正的答案<strong>取决于浏览器</strong>。<code>class</code> 是保留字，但是在Chrome、Firefox和Opera中可以作为属性名称，在IE中是禁止的。另一方面，其实所有浏览器基本接受大部分的关键字（如：<code>int</code>、<code>private</code>、<code>throws</code>等）作为变量名，而<code>class</code>是禁止的。</p>
<h3 id="37-无效日期"><a href="#37-无效日期" class="headerlink" title="37. 无效日期"></a>37. 无效日期</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"epoch"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. Thu Jan 01 1970 01:00:00 GMT+0100(CET)</span></span><br><span class="line"><span class="comment">// B. current time</span></span><br><span class="line"><span class="comment">// C. error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是D。实际结果是 <code>Invalid Date</code>，它实际上是一个Date对象，因为 <code>a instance Date</code> 的结果是 <code>true</code>，但是它是无效的Date。Date对象内部是用一个数字来存储时间的，在这个例子中，这个数字是 <code>NaN</code>。</p>
<h3 id="38-神鬼莫测的函数长度"><a href="#38-神鬼莫测的函数长度" class="headerlink" title="38. 神鬼莫测的函数长度"></a>38. 神鬼莫测的函数长度</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">Function</span>.length;</span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="built_in">Function</span>().length;</span><br><span class="line"><span class="built_in">console</span>.log(a === b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. true</span></span><br><span class="line"><span class="comment">// B. false</span></span><br><span class="line"><span class="comment">// C. error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是B。实际上a的值是1，b的值是0。还是继续来看MDN文档关于 <code>Function.length</code> 的描述吧！</p>
<p><strong>Function构造器的属性：</strong></p>
<blockquote>
<p>Function 构造器本身也是个Function。他的 length 属性值为 1 。该属性 Writable: false, Enumerable: false, Configurable: true。</p>
</blockquote>
<p><strong>Function原型对象的属性：</strong></p>
<blockquote>
<p>Function原型对象的 length 属性值为 0 。</p>
</blockquote>
<p>所以，在本例中，a代表的是 <code>Function</code> 构造器的 <code>length</code> 属性，而b代表的是 <code>Function</code> 原型的 <code>length</code> 属性。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/length" target="_blank" rel="noopener">Function.length</a></li>
</ul>
<h3 id="39-Date的面具"><a href="#39-Date的面具" class="headerlink" title="39. Date的面具"></a>39. Date的面具</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">Date</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">[a === b, b === c, a === c];</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. [true, true, true]</span></span><br><span class="line"><span class="comment">// B. [false, false, false]</span></span><br><span class="line"><span class="comment">// C. [false, true, false]</span></span><br><span class="line"><span class="comment">// D. [true, false, false]</span></span><br></pre></td></tr></table></figure>

<p>答案是B。先看MDN关于Date对象的注意点：</p>
<blockquote>
<p>需要注意的是只能通过调用 Date 构造函数来实例化日期对象：以常规函数调用它（即不加 new 操作符）将会返回一个字符串，而不是一个日期对象。另外，不像其他JavaScript 类型，Date 对象没有字面量格式。</p>
</blockquote>
<p>所以a是字符串，b和c是Date对象，并且b代表的是1970年那个初始化时间，而c代表的是当前时间。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noopener">Date</a></li>
</ul>
<h3 id="40-min与max共舞"><a href="#40-min与max共舞" class="headerlink" title="40. min与max共舞"></a>40. min与max共舞</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> min = <span class="built_in">Math</span>.min();</span><br><span class="line"><span class="keyword">var</span> max = <span class="built_in">Math</span>.max();</span><br><span class="line"><span class="built_in">console</span>.log(min &lt; max);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. true</span></span><br><span class="line"><span class="comment">// B. false</span></span><br><span class="line"><span class="comment">// C. error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是B。看MDN文档，对 <code>Math.min</code>的描述：</p>
<blockquote>
<p>如果没有参数，结果为Infinity。</p>
</blockquote>
<p>对 <code>Math.max</code> 的描述：</p>
<blockquote>
<p>如果没有参数，结果为-Infinity。</p>
</blockquote>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math/min" target="_blank" rel="noopener">Math.min</a></li>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math/max" target="_blank" rel="noopener">Math.max</a></li>
</ul>
<h3 id="41-警惕全局匹配"><a href="#41-警惕全局匹配" class="headerlink" title="41. 警惕全局匹配"></a>41. 警惕全局匹配</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">captureOne</span>(<span class="params">re, str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> match = re.exec(str);</span><br><span class="line">  <span class="keyword">return</span> match &amp;&amp; match[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> numRe = <span class="regexp">/num=(\d+)/ig</span>,</span><br><span class="line">      wordRe = <span class="regexp">/word=(\w+)/i</span>,</span><br><span class="line">      a1 = captureOne(numRe, <span class="string">"num=1"</span>),</span><br><span class="line">      a2 = captureOne(wordRe, <span class="string">"word=1"</span>),</span><br><span class="line">      a3 = captureOne(numRe, <span class="string">"NUM=1"</span>),</span><br><span class="line">      a4 = captureOne(wordRe, <span class="string">"WORD=1"</span>);</span><br><span class="line"></span><br><span class="line">[a1 === a2, a3 === a4]</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. [true, true]</span></span><br><span class="line"><span class="comment">// B. [false, false]</span></span><br><span class="line"><span class="comment">// C. [true, false]</span></span><br><span class="line"><span class="comment">// D. [false, true]</span></span><br></pre></td></tr></table></figure>

<p>答案是C。看MDN关于 <code>exec</code> 方法的描述：</p>
<blockquote>
<p>当正则表达式使用 “g” 标志时，可以多次执行 exec 方法来查找同一个字符串中的成功匹配。当你这样做时，查找将从正则表达式的  lastIndex 属性指定的位置开始。</p>
</blockquote>
<p>所以a3的值为 <code>null</code>。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec" target="_blank" rel="noopener">RegExp.prototype.exec()</a></li>
</ul>
<h3 id="42-最熟悉的陌生人"><a href="#42-最熟悉的陌生人" class="headerlink" title="42. 最熟悉的陌生人"></a>42. 最熟悉的陌生人</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2014-03-19"</span>);</span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2014</span>, <span class="number">03</span>, <span class="number">19</span>);</span><br><span class="line">[a.getDay() == b.getDay(), a.getMonth() == b.getMonth()]</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. [true, true]</span></span><br><span class="line"><span class="comment">// B. [true, false]</span></span><br><span class="line"><span class="comment">// C. [false, true]</span></span><br><span class="line"><span class="comment">// D. [false, false]</span></span><br></pre></td></tr></table></figure>

<p>答案是D。先看MDN关于Date的一个注意事项：</p>
<blockquote>
<p>当Date作为构造函数调用并传入多个参数时，如果数值大于合理范围时（如月份为13或者分钟数为70），相邻的数值会被调整。比如 new Date(2013, 13, 1)等于new Date(2014, 1, 1)，它们都表示日期2014-02-01（注意月份是从0开始的）。其他数值也是类似，new Date(2013, 2, 1, 0, 70)等于new Date(2013, 2, 1, 1, 10)，都表示时间2013-03-01T01:10:00。</p>
</blockquote>
<p>此外，<code>getDay</code> 返回指定日期对象的星期中的第几天（0～6），所以，你懂的。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noopener">Date</a></li>
</ul>
<h3 id="43-匹配隐式转换"><a href="#43-匹配隐式转换" class="headerlink" title="43. 匹配隐式转换"></a>43. 匹配隐式转换</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="string">"http://giftwrapped.com/picture.jpg"</span>.match(<span class="string">".gif"</span>)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"a gif file"</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"not a gif file"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. "a gif file"</span></span><br><span class="line"><span class="comment">// B. "not a gif file"</span></span><br><span class="line"><span class="comment">// C. error</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是A。看MDN对 <code>match</code> 方法的描述：</p>
<blockquote>
<p>如果传入一个非正则表达式对象，则会隐式地使用 new RegExp(obj)<br> 将其转换为正则表达式对象。</p>
</blockquote>
<p>所以我们的字符串 <code>&quot;.gif&quot;</code> 会被转换成正则对象 <code>/.gif/</code>，会匹配到 <code>&quot;/gif&quot;</code>。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/match" target="_blank" rel="noopener">String.prototype.match()</a></li>
</ul>
<h3 id="44-重复声明变量"><a href="#44-重复声明变量" class="headerlink" title="44. 重复声明变量"></a>44. 重复声明变量</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a;</span><br><span class="line">  <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="string">"bye"</span>;</span><br><span class="line">  <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[foo(<span class="string">"hello"</span>), bar(<span class="string">"hello"</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// A. ["hello", "hello"]</span></span><br><span class="line"><span class="comment">// B. ["hello", "bye"]</span></span><br><span class="line"><span class="comment">// C. ["bye", "bye"]</span></span><br><span class="line"><span class="comment">// D. other</span></span><br></pre></td></tr></table></figure>

<p>答案是B。一个变量在同一作用域中已经声明过，会自动移除 <code>var</code> 声明，但是赋值操作依旧保留，结合前面提到的变量提升机制，你就明白了。</p>
<p><strong>参考资料：</strong></p>
<ul>
<li>MDN：<a href="https://link.jianshu.com?t=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/var" target="_blank" rel="noopener">var</a></li>
</ul>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2024-02-18T03:11:22.000Z" itemprop="dateUpdated">2024-02-18 11:11:22</time>
</span><br>


        
        感谢您的阅读，欢迎评论(*^▽^*) 转载请附上本文链接：<a href="/interview/javascript-nan-ti.html" target="_blank" rel="external">https://qw66.gitee.io/interview/javascript-nan-ti.html</a>
        
    </div>
    
    <footer>
        <a href="https://qw66.gitee.io">
            <img src="/img/avatar.jpg" alt="秦伟">
            秦伟
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/编程题/">编程题</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://qw66.gitee.io/interview/javascript-nan-ti.html&title=《JavaScript难题》 — 秦伟博客&pic=https://qw66.gitee.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://qw66.gitee.io/interview/javascript-nan-ti.html&title=《JavaScript难题》 — 秦伟博客&source=前端、全栈、SEO的知识点、面试题与学习链接的整理" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://qw66.gitee.io/interview/javascript-nan-ti.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《JavaScript难题》 — 秦伟博客&url=https://qw66.gitee.io/interview/javascript-nan-ti.html&via=https://qw66.gitee.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://qw66.gitee.io/interview/javascript-nan-ti.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/knowledges/javascript-bi-bao.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">JavaScript闭包</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/interview/javascript-bian-cheng-ti.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">JavaScript编程题</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'false' == 'true',
            appId: "TJ17Ax10JrfIIljlO8qkwGvz-gzGzoHsz",
            appKey: "jDGQKdWT9hlzsTLRAbInE4bK",
            avatar: "mm",
            placeholder: "说点什么吧(*╹▽╹*)",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->










</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢您，我会继续努力哒(*^▽^*)
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

    <footer class="footer">
    <div class="top">
        <div class="map">
            <!--地球信息-->
<script type="text/javascript" src="/js/jquery-3.4.1.js"></script>
<script type="text/javascript">
    var windowWidth = $(window).width();
    if (windowWidth > 480) {
        document.write('<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5mz4gy0w2d8&amp;m=0&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33" async="async">  <\/script>');
    }
</script>
        </div>
        <p>
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>

</p>
        <p>
            <span>本网站总字数：832.4k</span>
            <span id="sitetime"></span>
        </p>
        <p>部分内容来源于互联网，用于个人知识的总结，如有侵权还请联系删除</p>
        <p>
            
            <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i
                    class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>

    <div class="bottom">
        <p>
            <span>Copyright &copy; 2019 - 2024 <a
                href="http://pdouyin.com/" target="_blank">秦伟的个人博客</a> All Rights Reserved.</span>
            <!-- <span>
                
                
            </span> -->
        </p>
    </div>
</footer>

<script language=javascript>
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
        year - 作为date对象的年份，为4位年份值
        month - 0-11之间的整数，做为date对象的月份
        day - 1-31之间的整数，做为date对象的天数
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
        minutes - 0-59之间的整数，做为date对象的分钟数
        seconds - 0-59之间的整数，做为date对象的秒数
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */
        var t1 = Date.UTC(2019, 8, 25, 18, 0, 0); // 北京时间
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
        document.getElementById("sitetime").innerHTML = "已安全运行 " + diffYears + "年 " + diffDays + "天 " + diffHours + "小时 " + diffMinutes + "分钟 " + diffSeconds + "秒";
    }
    siteTime();
</script>
</main>
<div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://qw66.gitee.io/interview/javascript-nan-ti.html&title=《JavaScript难题》 — 秦伟博客&pic=https://qw66.gitee.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://qw66.gitee.io/interview/javascript-nan-ti.html&title=《JavaScript难题》 — 秦伟博客&source=前端、全栈、SEO的知识点、面试题与学习链接的整理" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://qw66.gitee.io/interview/javascript-nan-ti.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《JavaScript难题》 — 秦伟博客&url=https://qw66.gitee.io/interview/javascript-nan-ti.html&via=https://qw66.gitee.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://qw66.gitee.io/interview/javascript-nan-ti.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACL0lEQVR42u3aQW7jMAwF0Nz/0hlgVjNo7XySThtLT6sgsE2/LBhR5OMRr+ff9e/n/Juv3x89/+v1Fy8MDIzbMp6n6yj8M1g58ihW8nwMDIx9GEmSPb/rKMB5+AR8/m4YGBgYeYAkdSYvhIGBgfGOhJuk2uTeX/7fwMDA+HhGrxCtlql54n5jLY6BgXFDRq8x8DOf397fwMDA+HjG86I1T9+T98HAwFibcf7QJPnmT0hGMfLDu0dyAwYGxhKMJHAS7IIGZCvuf/8bGBgYSzPmo12Tg7NqQ6JZxGJgYNyW0dsI9hjnyTQvjEdHchgYGDdkjNqBgwK4t908xGBgYGzA6GXoatLMhzaqwxwYGBhrM5LtWpJeJ8VtvmV88SYYGBiLMnolZa/QTaIkgBdFLAYGxgaMfGCimnCrabrwo2BgYGzD6BWcva1kfk1S4mJgYOzAmCTWXrPz4lgYGBjbMCafeyn4srYEBgbGNozqAf2k7KwetEXNSwwMjEUZ5YOt8UawNxzWHEfDwMBYiJFvyKrB5g3R/OfDwMDYh9HbohWCnV5TjY6BgbEPo5pYqy3P3uDXaG+LgYGxEGN+HJak2irj/PpvYmFgYCzN6CXc/LA+P3pLkjsGBsbOjDzJ5qVmL4lXj+cwMDB2Y/QK1zx1zo/MXsAwMDAwWqRemm6CMTAwMC49GuuNxkazbBgYGEszqu3G+ejYBaeAGBgY2zDmwxa9RuZ5UZqMdIz6GxgYGPdg/AEDerwqCeRm6QAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>




<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '(つェ⊂)咦!跑去哪里了';
            clearTimeout(titleTime);
        } else {
            document.title = '欢迎回来━(*｀∀´*)ノ';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>




<!-- 点击特效 -->
<script type="text/javascript" src="/js/clicklove.js"></script>
<!--动态线条背景-->
<script type="text/javascript"
        color="220,220,220" opacity='0.7' zIndex="-2" count="200"
        src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script>
<!-- 雪花特效 -->
<script type="text/javascript" src="/js/jquery-3.4.1.js"></script>
<script type="text/javascript">
    var windowWidth = $(window).width();
    if (windowWidth > 480) {
        document.write('<script type="text/javascript" src="/js/snow.js"><\/script>');
    }
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"superSample":2,"position":"right","width":150,"height":300,"hOffset":-25,"vOffset":30},"mobile":{"show":false,"scale":1.2},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script><script>!function(e){var r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function t(){for(var c=0;c<r.length;c++)t=r[c],void 0,0<=(n=t.getBoundingClientRect()).top&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=r[c];t=o,n=function(){r=r.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}t(),e.addEventListener("scroll",function(){!function(t,n){clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)}(t,e)})}(this);</script></body>
</html>
