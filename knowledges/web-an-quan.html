<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>Web安全 | 秦伟博客 | 前端、全栈、SEO的知识点、面试题与学习链接的整理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="CSRF,XSS,SQL注入,HTTPS">
    <meta name="description" content="CSRF 问的不难，一般问：   CSRF的基本概念、缩写、全称 攻击原理 防御措施   如果把攻击原理和防御措施掌握好，基本没什么问题。  CSRF的基本概念CSRF（Cross-site request forgery）：跨站请求伪造。  伪造合法请求，让用户在不知情的情况下以登录的身份访问，利用用户信任达到攻击目的。  对服务器来说这个请求是完全合法的，但是却完成了攻击者所期望的一个操作，比">
<meta name="keywords" content="CSRF,XSS,SQL注入,HTTPS">
<meta property="og:type" content="article">
<meta property="og:title" content="Web安全">
<meta property="og:url" content="https://qw66.gitee.io/knowledges/web-an-quan.html">
<meta property="og:site_name" content="秦伟博客">
<meta property="og:description" content="CSRF 问的不难，一般问：   CSRF的基本概念、缩写、全称 攻击原理 防御措施   如果把攻击原理和防御措施掌握好，基本没什么问题。  CSRF的基本概念CSRF（Cross-site request forgery）：跨站请求伪造。  伪造合法请求，让用户在不知情的情况下以登录的身份访问，利用用户信任达到攻击目的。  对服务器来说这个请求是完全合法的，但是却完成了攻击者所期望的一个操作，比">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://qw66.gitee.io/img/loading.gif">
<meta property="og:updated_time" content="2024-05-14T06:45:23.839Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Web安全">
<meta name="twitter:description" content="CSRF 问的不难，一般问：   CSRF的基本概念、缩写、全称 攻击原理 防御措施   如果把攻击原理和防御措施掌握好，基本没什么问题。  CSRF的基本概念CSRF（Cross-site request forgery）：跨站请求伪造。  伪造合法请求，让用户在不知情的情况下以登录的身份访问，利用用户信任达到攻击目的。  对服务器来说这个请求是完全合法的，但是却完成了攻击者所期望的一个操作，比">
<meta name="twitter:image" content="https://qw66.gitee.io/img/loading.gif">
    
        <link rel="alternate" type="application/atom+xml" title="秦伟博客" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/qw.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
<div id="loading" class="active"></div>

<aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">秦伟</h5>
          <a href="mailto:124729081@qq.com" title="124729081@qq.com" class="mail">124729081@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-hourglass"></i>
                时光
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://wpa.qq.com/msgrd?v=3&uin=124729081&site=qq&menu=yes" target="_blank" >
                <i class="icon icon-lg icon-qq"></i>
                聊天
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=124729081@qq.com"  >
                <i class="icon icon-lg icon-envelope-o"></i>
                邮箱
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/user"  >
                <i class="icon icon-lg icon-user"></i>
                简介
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://gitee.com/qw66" target="_blank" >
                <i class="icon icon-lg icon-code"></i>
                Gitee
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/qw8" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

<main id="main">
    <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Web安全</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Web安全</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-08-30T10:21:17.000Z" itemprop="datePublished" class="page-time">
  2019-08-30
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/前端知识点/">前端知识点</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#CSRF"><span class="post-toc-number">1.</span> <span class="post-toc-text">CSRF</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#CSRF的基本概念"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">CSRF的基本概念</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#CSRF-攻击攻击原理及过程如下"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">CSRF 攻击攻击原理及过程如下</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#特点"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">特点</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#CSRF如何防御"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">CSRF如何防御</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#XSS"><span class="post-toc-number">2.</span> <span class="post-toc-text">XSS</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#XSS的基本概念"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">XSS的基本概念</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#XSS的攻击原理"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">XSS的攻击原理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#XSS的攻击方式"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">XSS的攻击方式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#XSS的防范措施（encode-过滤）"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">XSS的防范措施（encode + 过滤）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#XSS-防范方法"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">XSS 防范方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#原因"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">原因</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#危害"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">危害</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#参考资料："><span class="post-toc-number">2.8.</span> <span class="post-toc-text">参考资料：</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#其他"><span class="post-toc-number">3.</span> <span class="post-toc-text">其他</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#CSRF-和-XSS-的区别"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">CSRF 和 XSS 的区别</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SQL注入原理"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">SQL注入原理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#http2-和-https-的关系"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">http2 和 https 的关系</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTPS实现原理"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">HTTPS实现原理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#为什么-HTTPS-安全"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">为什么 HTTPS 安全</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#什么是点击劫持？如何防范？"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">什么是点击劫持？如何防范？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#域名收敛是什么？"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">域名收敛是什么？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#如何防范-Web-前端攻击？"><span class="post-toc-number">3.8.</span> <span class="post-toc-text">如何防范 Web 前端攻击？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#什么是-XSS-攻击？如何防范-XSS-攻击？"><span class="post-toc-number">3.9.</span> <span class="post-toc-text">什么是 XSS 攻击？如何防范 XSS 攻击？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#什么是-CSRF-攻击？如何防范-CSRF-攻击？"><span class="post-toc-number">3.10.</span> <span class="post-toc-text">什么是 CSRF 攻击？如何防范 CSRF 攻击？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#什么是-CSP？"><span class="post-toc-number">3.11.</span> <span class="post-toc-text">什么是 CSP？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#什么是-Samesite-Cookie-属性？"><span class="post-toc-number">3.12.</span> <span class="post-toc-text">什么是 Samesite Cookie 属性？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#什么是点击劫持？如何防范点击劫持？"><span class="post-toc-number">3.13.</span> <span class="post-toc-text">什么是点击劫持？如何防范点击劫持？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SQL-注入攻击？"><span class="post-toc-number">3.14.</span> <span class="post-toc-text">SQL 注入攻击？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#token有限期最佳是多长时间"><span class="post-toc-number">3.15.</span> <span class="post-toc-text">token有限期最佳是多长时间</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-knowledges/Web安全"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Web安全</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-08-30 18:21:17" datetime="2019-08-30T10:21:17.000Z"  itemprop="datePublished">2019-08-30</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/前端知识点/">前端知识点</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h2><blockquote>
<p>问的不难，一般问：</p>
</blockquote>
<ul>
<li><code>CSRF</code>的基本概念、缩写、全称</li>
<li>攻击原理</li>
<li>防御措施</li>
</ul>
<blockquote>
<p>如果把<strong>攻击原理</strong>和<strong>防御措施</strong>掌握好，基本没什么问题。</p>
</blockquote>
<h3 id="CSRF的基本概念"><a href="#CSRF的基本概念" class="headerlink" title="CSRF的基本概念"></a>CSRF的基本概念</h3><p><code>CSRF</code>（<code>Cross-site request forgery</code>）：<strong>跨站请求伪造</strong>。</p>
<ul>
<li><p>伪造合法请求，让用户在不知情的情况下以登录的身份访问，利用用户信任达到攻击目的。</p>
<blockquote>
<p>对服务器来说这个请求是完全合法的，但是却完成了攻击者所期望的一个操作，比如以你的名义发送邮件、发消息，盗取你的账号，添加系统管理员，甚至于购买商品、虚拟货币转账等。 </p>
</blockquote>
</li>
<li><p>是一种挟制用户在当前已登录的<code>Web</code>应用程序上执行非本意的操作的攻击方法。</p>
</li>
</ul>
<h3 id="CSRF-攻击攻击原理及过程如下"><a href="#CSRF-攻击攻击原理及过程如下" class="headerlink" title="CSRF 攻击攻击原理及过程如下"></a>CSRF 攻击攻击原理及过程如下</h3><ol>
<li><p>用户C打开浏览器，访问受信任网站A，输入用户名和密码请求登录网站A；</p>
</li>
<li><p>在用户信息通过验证后，网站A产生Cookie信息并返回给浏览器，此时用户登录网站A成功，可以正常发送请求到网站A；</p>
</li>
<li><p>用户未退出网站A之前，在同一浏览器中，打开一个TAB页访问网站B；</p>
</li>
<li><p>网站B接收到用户请求后，返回一些攻击性代码，并发出一个请求要求访问第三方站点A； </p>
</li>
<li><p>浏览器在接收到这些攻击性代码后，根据网站B的请求，在用户不知情的情况下携带Cookie信息，向网站A发出请求。网站A并不知道该请求其实是由B发起的，所以会根据用户C的Cookie信息以C的权限处理该请求，导致来自网站B的恶意代码被执行。</p>
</li>
</ol>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/loading.gif" data-original="http://img.smyhvae.com/20180307_1735.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<blockquote>
<p>用户是网站A的注册用户，且登录进去，于是网站A就给用户下发<code>cookie</code>。</p>
</blockquote>
<blockquote>
<p>从上图可以看出，要完成一次<code>CSRF</code>攻击，受害者必须满足两个必要的条件：</p>
</blockquote>
<ol>
<li>登录受信任网站<code>A</code>，并在本地生成<code>Cookie</code>。（如果用户没有登录网站<code>A</code>，那么网站<code>B</code>在诱导的时候，请求网站<code>A</code>的<code>api</code>接口时，会提示你登录）</li>
<li>在不登出<code>A</code>的情况下，访问危险网站<code>B</code>（其实是利用了网站<code>A</code>的漏洞）。</li>
</ol>
<blockquote>
<p>我们在讲<code>CSRF</code>时，一定要把上面的两点说清楚。</p>
</blockquote>
<blockquote>
<p>温馨提示一下，<code>cookie</code>保证了用户可以处于登录状态，但网站<code>B</code>其实拿不到 <code>cookie</code>。</p>
</blockquote>
<blockquote>
<p>举个例子，前段时间里，微博网站有个<code>api</code>接口有漏洞，导致很多用户的粉丝暴增。</p>
</blockquote>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>依靠用户标识危害网站</li>
<li>利用网站对用户标识的信任</li>
<li>欺骗用户的浏览器发送 HTTP 请求给目标站点</li>
<li>另外可以通过 IMG 标签会触发一个 GET 请求，可以利用它来实现 CSRF 攻击。</li>
</ul>
<h3 id="CSRF如何防御"><a href="#CSRF如何防御" class="headerlink" title="CSRF如何防御"></a>CSRF如何防御</h3><p><strong>方法一、Token 验证：</strong>（用的最多，在请求地址中添加 token 并验证）</p>
<ol>
<li>服务器发送给客户端一个<code>token</code>；</li>
<li>客户端提交的表单中带着这个<code>token</code>。</li>
<li>如果这个 <code>token</code> 不合法，那么服务器拒绝这个请求。</li>
</ol>
<p><strong>方法二：隐藏令牌：</strong>在 HTTP 头中自定义属性并验证。</p>
<ul>
<li>把 <code>token</code> 隐藏在 <code>http</code> 的 <code>head</code>头中。</li>
</ul>
<blockquote>
<p>方法二和方法一有点像，本质上没有太大区别，只是使用方式上有区别。</p>
</blockquote>
<p><strong>方法三、Referer 验证：</strong>验证 HTTP Referer 字段</p>
<blockquote>
<p><code>Referer</code> 指的是页面请求来源。意思是，<strong>只接受本站的请求，服务器才做响应</strong>；如果不是，就拦截。</p>
</blockquote>
<p>用户操作验证（验证码），额外验证机制（<code>token</code>使用）等，服务端的CSRF方式方法很多样，但总的思想都是一致的，就是在客户端页面增加伪随机数。</p>
<ul>
<li>通过 referer、token 或者验证码来检测用户提交。</li>
<li>尽量不要在页面的链接中暴露用户隐私信息。</li>
<li>对于用户修改删除等操作最好都使用 post 操作 。</li>
<li>避免全站通用的 cookie，严格设置 cookie 的域。</li>
</ul>
<h2 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h2><h3 id="XSS的基本概念"><a href="#XSS的基本概念" class="headerlink" title="XSS的基本概念"></a>XSS的基本概念</h3><blockquote>
<p><code>XSS（Cross Site Scripting）</code>：<strong>跨域脚本攻击</strong>。</p>
</blockquote>
<p><strong>XSS攻击：</strong>指的是攻击者往Web页面里插入恶意html标签或者javascript代码。</p>
<p>比如：攻击者在论坛中放一个看似安全的链接，骗取用户点击后，窃取cookie中的用户私密信息；或者攻击者在论坛中加一个恶意表单，当用户提交表单的时候，却把信息传送到攻击者的服务器中，而不是用户原本以为的信任站点。</p>
<ul>
<li>XSS 是一种经常出现在 web 应用中的计算机安全漏洞，它允许恶意 web 用户将代码植入到提供给其它用户使用的页面中。</li>
<li>比如这些代码包括 HTML 代码和客户端脚本。攻击者利用 XSS 漏洞旁路掉访问控制——例如同源策略(same origin policy)。</li>
<li>这种类型的漏洞由于被黑客用来编写危害性更大的网络钓鱼(Phishing)攻击而变得广为人知。</li>
<li>对于跨站脚本攻击，黑客界共识是：跨站脚本攻击是新型的“缓冲区溢出攻击“，而 JavaScript 是新型的“ShellCode”。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">示例：</span><br><span class="line">&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="XSS的攻击原理"><a href="#XSS的攻击原理" class="headerlink" title="XSS的攻击原理"></a>XSS的攻击原理</h3><blockquote>
<p><code>XSS</code>攻击的核心原理是：不需要你做任何的登录认证，它会通过合法的操作（比如在<code>url</code>中输入、在评论框中输入），向你的页面注入脚本（可能是<code>js</code>、<code>hmtl</code>代码块等）。</p>
<p>HTML是一种超文本标记语言，当动态页面中插入的内容含有这些特殊字符（如&lt;）时，用户浏览器会将其误认为是插入了HTML标签，当这些HTML标签引入了一段JavaScript脚本时，这些脚本程序就将会在用户浏览器中执行。所以，当这些特殊字符不能被动态页面检查或检查出现失误时，就将会产生XSS漏洞。</p>
</blockquote>
<p>最后导致的结果可能是：</p>
<ul>
<li>盗用<code>Cookie</code></li>
<li>破坏页面的正常结构，插入广告等恶意内容</li>
<li><code>D-doss</code>攻击</li>
</ul>
<p><strong>XSS(cross-site scripting)攻击：</strong>指的是攻击者往Web页面里插入恶意html标签或者javascript代码。比如：攻击者在论坛中放一个看似安全的链接，骗取用户点击后，窃取cookie中的用户私密信息；或者攻击者在论坛中加一个恶意表单，当用户提交表单的时候，却把信息传送到攻击者的服务器中，而不是用户原本以为的信任站点</p>
<p>XSS 是一种经常出现在 web 应用中的计算机安全漏洞，它允许恶意 web 用户将代码植入到提供给其它用户使用的页面中。</p>
<p>比如这些代码包括 HTML 代码和客户端脚本。攻击者利用 XSS 漏洞旁路掉访问控制——例如同源策略(same origin policy)。</p>
<p>这种类型的漏洞由于被黑客用来编写危害性更大的网络钓鱼(Phishing)攻击而变得广为人知。</p>
<p>对于跨站脚本攻击，黑客界共识是：跨站脚本攻击是新型的“缓冲区溢出攻击“，而 JavaScript 是新型的“ShellCode”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">示例：</span><br><span class="line">&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="XSS的攻击方式"><a href="#XSS的攻击方式" class="headerlink" title="XSS的攻击方式"></a>XSS的攻击方式</h3><ol>
<li>反射型</li>
</ol>
<blockquote>
<p>发出请求时，<code>XSS</code>代码出现在<code>url</code>中，作为输入提交到服务器端，服务器端解析后响应，<code>XSS</code>代码随响应内容一起传回给浏览器，最后浏览器解析执行<code>XSS</code>代码。这个过程像一次反射，所以叫反射型<code>XSS</code>。</p>
</blockquote>
<ol start="2">
<li>存储型</li>
</ol>
<blockquote>
<p>存储型<code>XSS</code>和反射型<code>XSS</code>的差别在于，提交的代码会存储在服务器端（数据库、内存、文件系统等），下次请求时目标页面时不用再提交XSS代码。</p>
</blockquote>
<h3 id="XSS的防范措施（encode-过滤）"><a href="#XSS的防范措施（encode-过滤）" class="headerlink" title="XSS的防范措施（encode + 过滤）"></a>XSS的防范措施（encode + 过滤）</h3><p><strong>XSS的防范措施主要有三个：</strong></p>
<p><strong>1. 编码</strong>：</p>
<blockquote>
<p>对用户输入的数据进行<code>HTML Entity</code>编码。</p>
</blockquote>
<p>如上图所示，把字符转换成 转义字符。</p>
<blockquote>
<p><code>Encode</code>的作用是将<code>$var</code>等一些字符进行转化，使得浏览器在最终输出结果上是一样的。</p>
</blockquote>
<p>比如说这段代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>alert(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>若不进行任何处理，则浏览器会执行alert的js操作，实现XSS注入。</p>
</blockquote>
<blockquote>
<p>进行编码处理之后，L在浏览器中的显示结果就是<code>&lt;script&gt;alert(1)&lt;/script&gt;</code>，实现了将``$var<code>作为纯文本进行输出，且不引起J</code>avaScript`的执行。</p>
</blockquote>
<p><strong>2、过滤：</strong></p>
<ul>
<li>移除用户输入的和事件相关的属性。如<code>onerror</code>可以自动触发攻击，还有<code>onclick</code>等。（总而言是，过滤掉一些不安全的内容）</li>
<li>移除用户输入的<code>Style</code>节点、<code>Script</code>节点、<code>Iframe</code>节点。（尤其是<code>Script</code>节点，它可是支持跨域的呀，一定要移除）。</li>
</ul>
<p><strong>3、校正</strong></p>
<ul>
<li>避免直接对<code>HTML Entity</code>进行解码。</li>
<li>使用<code>DOM Parse</code>转换，校正不配对的<code>DOM</code>标签。</li>
</ul>
<blockquote>
<p>备注：我们应该去了解一下<code>DOM Parse</code>这个概念，它的作用是把文本解析成<code>DOM</code>结构。</p>
</blockquote>
<p>比较常用的做法是，通过第一步的编码转成文本，然后第三步转成<code>DOM</code>对象，然后经过第二步的过滤。</p>
<p><strong>还有一种简洁的答案：</strong></p>
<p>首先是encode，如果是富文本，就白名单。</p>
<h3 id="XSS-防范方法"><a href="#XSS-防范方法" class="headerlink" title="XSS 防范方法"></a>XSS 防范方法</h3><ul>
<li>表单数据规定值的类型，例如：年龄应为只能为 int、name 只能为字母数字组合。代码里对用户输入的地方和变量都需要仔细检查长度和对”&lt;”,”&gt;”,”;”,”’”等字符做过滤；</li>
<li>对数据进行 Html Encode 处理：任何内容写到页面之前都必须加以 encode，避免不小心把 html tag 弄出来。这一个层面做好，至少可以堵住超过一半的 XSS 攻击。</li>
<li>过滤或移除特殊的 Html 标签， 例如: <script>, <iframe> , &lt; for <, &gt; for >, &quot for</li>
<li>过滤 JavaScript 事件的标签。例如 "onclick=", "onfocus" 等等。</li>
<li>避免直接在 cookie 中泄露用户隐私，例如 email、密码等等。</li>
<li>通过使 cookie 和系统 ip 绑定来降低 cookie 泄露后的危险。这样攻击者得到的 cookie 没有实际价值，不可能拿来重放。</li>
<li>如果网站不需要再浏览器端对 cookie 进行操作，可以在 Set-Cookie 末尾加上 HttpOnly 来防止 javascript 代码直接获取 cookie ，这样的话 Javascript 中的 document.cookie 语句就不能获取到 cookie 了。</li>
<li>尽量采用 POST 而非 GET 提交表单</li>
</ul>
<h3 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h3><ul>
<li>能注入恶意的 HTML/JavaScript 代码到用户浏览的网页上，从而达到 Cookie 资料窃取、会话劫持、钓鱼欺骗等攻击。</li>
<li>攻击代码不一定（非要）在 <script></script> 中&gt;</li>
</ul>
<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><ul>
<li>Web 浏览器本身的设计不安全。浏览器能解析和执行 JS 等代码，但是不会判断该数据和程序代码是否恶意。</li>
<li>输入和输出是 Web 应用程序最基本的交互，而且网站的交互功能越来越丰富。如果在这过程中没有做好安全防护，很容易会出现 XSS 漏洞。</li>
<li>程序员水平参差不齐，而且大都没有过正规的安全培训，没有相关的安全意识。</li>
<li>XSS 攻击手段灵活多变。</li>
</ul>
<h3 id="危害"><a href="#危害" class="headerlink" title="危害"></a>危害</h3><ul>
<li>盗取各类用户帐号，如机器登录帐号、用户网银帐号、各类管理员帐号</li>
<li>控制企业数据，包括读取、篡改、添加、删除企业敏感数据的能力</li>
<li>盗窃企业重要的具有商业价值的资料</li>
<li>非法转账</li>
<li>强制发送电子邮件</li>
<li>网站挂马</li>
<li>控制受害者机器向其它网站发起攻击</li>
</ul>
<h3 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h3><p><a href="https://www.cnblogs.com/phpstudy2015-6/p/6767032.html" target="_blank" rel="noopener">https://www.cnblogs.com/phpstudy2015-6/p/6767032.html</a><br><a href="https://www.cnblogs.com/443855539-wind/p/6055816.html" target="_blank" rel="noopener">https://www.cnblogs.com/443855539-wind/p/6055816.html</a><br><a href="https://baike.baidu.com/item/XSS%E6%94%BB%E5%87%BB/954065?fr=aladdin" target="_blank" rel="noopener">https://baike.baidu.com/item/XSS%E6%94%BB%E5%87%BB/954065?fr=aladdin</a></p>
<p>### </p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="CSRF-和-XSS-的区别"><a href="#CSRF-和-XSS-的区别" class="headerlink" title="CSRF 和 XSS 的区别"></a>CSRF 和 XSS 的区别</h3><blockquote>
<p>面试官还可能喜欢问二者的区别。</p>
<p>XSS 利用站点内的信任用户，而 CSRF 则通过伪装来自受信任用户的请求来利用受信任的网站。与 XSS 攻击相比，CSRF 攻击往往不大流行（因此对其进行防范的资源也相当稀少）和难以防范，所以被认为比 XSS 更具危险性。</p>
</blockquote>
<p><strong>区别一：</strong></p>
<ul>
<li><code>CSRF</code>：需要用户先登录网站<code>A</code>，获取 <code>cookie</code></li>
<li><code>XSS</code>：不需要登录。</li>
</ul>
<p>XSS是获取信息，不需要提前知道其他用户页面的代码和数据包。</p>
<p>CSRF是代替用户完成指定的动作，需要知道其他用户页面的代码和数据包。要完成一次CSRF攻击，受害者必须依次完成两个步骤</p>
<ul>
<li>登录受信任网站 A，并在本地生成 Cookie。</li>
<li>在不登出 A 的情况下，访问危险网站 B。</li>
</ul>
<p><strong>区别二：（原理的区别）</strong></p>
<ul>
<li><code>CSRF</code>：是利用网站<code>A</code>本身的漏洞，去请求网站<code>A</code>的<code>api</code>。</li>
<li><code>XSS</code>：是向网站 <code>A</code> 注入 <code>JS</code>代码，然后执行 <code>JS</code> 里的代码，篡改网站<code>A</code>的内容。</li>
</ul>
<h3 id="SQL注入原理"><a href="#SQL注入原理" class="headerlink" title="SQL注入原理"></a>SQL注入原理</h3><p>就是通过把 SQL 命令插入到 Web 表单递交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的 SQL 命令。</p>
<p>总的来说有以下几点：</p>
<ol>
<li>永远不要信任用户的输入，要对用户的输入进行校验，可以通过正则表达式，或限制长度，对单引号和双”-“进行转换等。</li>
<li>永远不要使用动态拼装 SQL，可以使用参数化的 SQL 或者直接使用存储过程进行数据查询存取。</li>
<li>永远不要使用管理员权限的数据库连接，为每个应用使用单独的权限有限的数据库连接。</li>
<li>不要把机密信息明文存放，请加密或者 hash 掉密码和敏感的信息。</li>
</ol>
<h3 id="http2-和-https-的关系"><a href="#http2-和-https-的关系" class="headerlink" title="http2 和 https 的关系"></a>http2 和 https 的关系</h3><ul>
<li>HTTP 协议通常承载于 TCP 协议之上，在 HTTP 和 TCP 之间添加一个安全协议层（SSL 或 TSL），这个时候，就成了我们常说的 HTTPS。</li>
<li>默认 HTTP 的端口号为 80，HTTPS 的端口号为 443。</li>
</ul>
<h3 id="HTTPS实现原理"><a href="#HTTPS实现原理" class="headerlink" title="HTTPS实现原理"></a>HTTPS实现原理</h3><p>HTTPS 在通讯过程中的原理，总共分为 8 步<br>STEP 1: 客户端发起 HTTPS 请求<br>STEP 2: 服务端的配置<br>STEP 3: 传送证书<br>STEP 4: 客户端解析证书<br>STEP 5: 传送加密信息<br>STEP 6: 服务端解密信息<br>STEP 7: 传输加密后的信息<br>STEP 8: 客户端解密信息</p>
<h3 id="为什么-HTTPS-安全"><a href="#为什么-HTTPS-安全" class="headerlink" title="为什么 HTTPS 安全"></a>为什么 HTTPS 安全</h3><p>答案：因为网络请求需要中间有很多的服务器路由器的转发。中间的节点都可能篡改信息，而如果使用 HTTPS，密钥在你和终点站才有。https 之所以比 http 安全，是因为他利用 ssl/tls 协议传输。它包含证书，卸载，流量转发，负载均衡，页面适配，浏览器适配，refer 传递等。保障了传输过程的安全性</p>
<h3 id="什么是点击劫持？如何防范？"><a href="#什么是点击劫持？如何防范？" class="headerlink" title="什么是点击劫持？如何防范？"></a>什么是点击劫持？如何防范？</h3><p>最常见的是恶意网站使用 <iframe> 标签把我方的一些含有重要信息类如交易的网页嵌入进去，然后把 iframe 设置透明，用定位的手段的把一些引诱用户在恶意网页上点击。这样用户不知不觉中就进行了某些不安全的操作。</iframe></p>
<p>有两种方式可以防范：</p>
<p><strong>1.使用 JS 防范：</strong><br>if (top.location.hostname !== self.location.hostname) {<br>alert(“您正在访问不安全的页面，即将跳转到安全页面！”);<br>top.location.href = self.location.href;<br>}</p>
<p><strong>2.使用 HTTP 头防范：</strong><br>通过配置 nginx 发送 X-Frame-Options 响应头，这样浏览器就会阻止嵌入网页的渲染。更详细的可以查阅 MDN 上关于 X-Frame-Options 响应头的内容。<br>add_header X-Frame-Options SAMEORIGIN;</p>
<h3 id="域名收敛是什么？"><a href="#域名收敛是什么？" class="headerlink" title="域名收敛是什么？"></a>域名收敛是什么？</h3><p>PC 时代为了突破浏览器的域名并发限制。有了域名发散。<br>浏览器有并发限制，是为了防止DDOS攻击。<br><strong>域名收敛：就是将静态资源放在一个域名下。减少DNS解析的开销。</strong><br>域名发散：是将静态资源放在多个子域名下，就可以多线程下载，提高并行度，使客户端加载静态资源更加迅速。<br>域名发散是pc端为了利用浏览器的多线程并行下载能力。而域名收敛多用与移动端，提高性能，因为dns解析是是从后向前迭代解析，如果域名过多性能会下降，增加DNS的解析开销。</p>
<h3 id="如何防范-Web-前端攻击？"><a href="#如何防范-Web-前端攻击？" class="headerlink" title="如何防范 Web 前端攻击？"></a>如何防范 Web 前端攻击？</h3><ul>
<li><p>不要信任任何外部传入的数据</p>
<p>针对用户输入作相关的格式检查、过滤等操作</p>
</li>
<li><p>不要信任在任何传入的第三方数据</p>
<p>使用 CORS，设置 Access-Control-Allow-Origin</p>
</li>
<li><p>更安全地使用 Cookie</p>
<p>设置Cookie为HttpOnly，禁止了JavaScript操作Cookie</p>
</li>
<li><p>防止网页被其他网站内嵌为iframe</p>
<p>服务器端设置 X-Frame-Options 响应头，防止页面被内嵌</p>
</li>
</ul>
<h3 id="什么是-XSS-攻击？如何防范-XSS-攻击？"><a href="#什么是-XSS-攻击？如何防范-XSS-攻击？" class="headerlink" title="什么是 XSS 攻击？如何防范 XSS 攻击？"></a>什么是 XSS 攻击？如何防范 XSS 攻击？</h3><p>XSS 攻击指的是跨站脚本攻击，是一种代码注入攻击。攻击者通过在网站注入恶意脚本，使之在用户的浏览器上运行，从而盗取用户的信息如 cookie 等。</p>
<p>XSS 的本质是因为网站没有对恶意代码进行过滤，与正常的代码混合在一起了，浏览器没有办法分辨哪些脚本是可信的，从而导致了恶意代码的执行。</p>
<p>XSS 一般分为存储型、反射型和 DOM 型。</p>
<p>存储型指的是恶意代码提交到了网站的数据库中，当用户请求数据的时候，服务器将其拼接为 HTML 后返回给了用户，从而导致了恶意代码的执行。</p>
<p>反射型指的是攻击者构建了特殊的 URL，当服务器接收到请求后，从 URL 中获取数据，拼接到 HTML 后返回，从而导致了恶意代码的执行。</p>
<p>DOM 型指的是攻击者构建了特殊的 URL，用户打开网站后，js 脚本从 URL 中获取数据，从而导致了恶意代码的执行。</p>
<p>XSS 攻击的预防可以从两个方面入手，一个是恶意代码提交的时候，一个是浏览器执行恶意代码的时候。</p>
<p>对于第一个方面，如果我们对存入数据库的数据都进行的转义处理，但是一个数据可能在多个地方使用，有的地方可能不需要转义，由于我们没有办法判断数据最后的使用场景，所以直接在输入端进行恶意代码的处理，其实是不太可靠的。</p>
<p>因此我们可以从浏览器的执行来进行预防，一种是使用纯前端的方式，不用服务器端拼接后返回。另一种是对需要插入到 HTML 中的代码做好充分的转义。对于 DOM 型的攻击，主要是前端脚本的不可靠而造成的，我们对于数据获取渲染和字符串拼接的时候应该对可能出现的恶意代码情况进行判断。</p>
<p>还有一些方式，比如使用 CSP ，CSP 的本质是建立一个白名单，告诉浏览器哪些外部资源可以加载和执行，从而防止恶意代码的注入攻击。</p>
<p>还可以对一些敏感信息进行保护，比如 cookie 使用 http-only ，使得脚本无法获取。也可以使用验证码，避免脚本伪装成用户执行一些操作。</p>
<p>详细资料可以参考：<br><a href="https://juejin.im/post/5bad9140e51d450e935c6d64" target="_blank" rel="noopener">《前端安全系列（一）：如何防止 XSS 攻击？》</a></p>
<h3 id="什么是-CSRF-攻击？如何防范-CSRF-攻击？"><a href="#什么是-CSRF-攻击？如何防范-CSRF-攻击？" class="headerlink" title="什么是 CSRF 攻击？如何防范 CSRF 攻击？"></a>什么是 CSRF 攻击？如何防范 CSRF 攻击？</h3><p>CSRF 攻击指的是跨站请求伪造攻击，攻击者诱导用户进入一个第三方网站，然后该网站向被攻击网站发送跨站请求。如果用户在被<br>攻击网站中保存了登录状态，那么攻击者就可以利用这个登录状态，绕过后台的用户验证，冒充用户向服务器执行一些操作。</p>
<p>CSRF 攻击的本质是利用了 cookie 会在同源请求中携带发送给服务器的特点，以此来实现用户的冒充。</p>
<p>一般的 CSRF 攻击类型有三种：</p>
<p>第一种是 GET 类型的 CSRF 攻击，比如在网站中的一个 img 标签里构建一个请求，当用户打开这个网站的时候就会自动发起提<br>交。</p>
<p>第二种是 POST 类型的 CSRF 攻击，比如说构建一个表单，然后隐藏它，当用户进入页面时，自动提交这个表单。</p>
<p>第三种是链接类型的 CSRF 攻击，比如说在 a 标签的 href 属性里构建一个请求，然后诱导用户去点击。</p>
<p>CSRF 可以用下面几种方法来防护：</p>
<p>第一种是同源检测的方法，服务器根据 http 请求头中 origin 或者 referer 信息来判断请求是否为允许访问的站点，从而对请求进行过滤。当 origin 或者 referer 信息都不存在的时候，直接阻止。这种方式的缺点是有些情况下 referer 可以被伪造。还有就是我们这种方法同时把搜索引擎的链接也给屏蔽了，所以一般网站会允许搜索引擎的页面请求，但是相应的页面请求这种请求方式也可能被攻击者给利用。</p>
<p>第二种方法是使用 CSRF Token 来进行验证，服务器向用户返回一个随机数 Token ，当网站再次发起请求时，在请求参数中加入服务器端返回的 token ，然后服务器对这个 token 进行验证。这种方法解决了使用 cookie 单一验证方式时，可能会被冒用的问题，但是这种方法存在一个缺点就是，我们需要给网站中的所有请求都添加上这个 token，操作比较繁琐。还有一个问题是一般不会只有一台网站服务器，如果我们的请求经过负载平衡转移到了其他的服务器，但是这个服务器的 session 中没有保留这个 token 的话，就没有办法验证了。这种情况我们可以通过改变 token 的构建方式来解决。</p>
<p>第三种方式使用双重 Cookie 验证的办法，服务器在用户访问网站页面时，向请求域名注入一个Cookie，内容为随机字符串，然后当用户再次向服务器发送请求的时候，从 cookie 中取出这个字符串，添加到 URL 参数中，然后服务器通过对 cookie 中的数据和参数中的数据进行比较，来进行验证。使用这种方式是利用了攻击者只能利用 cookie，但是不能访问获取 cookie 的特点。并且这种方法比 CSRF Token 的方法更加方便，并且不涉及到分布式访问的问题。这种方法的缺点是如果网站存在 XSS 漏洞的，那么这种方式会失效。同时这种方式不能做到子域名的隔离。</p>
<p>第四种方式是使用在设置 cookie 属性的时候设置 Samesite ，限制 cookie 不能作为被第三方使用，从而可以避免被攻击者利用。Samesite 一共有两种模式，一种是严格模式，在严格模式下 cookie 在任何情况下都不可能作为第三方 Cookie 使用，在宽松模式下，cookie 可以被请求是 GET 请求，且会发生页面跳转的请求所使用。</p>
<p>详细资料可以参考：<br><a href="https://juejin.im/post/5bc009996fb9a05d0a055192" target="_blank" rel="noopener">《前端安全系列之二：如何防止 CSRF 攻击？》</a><br><a href="https://www.jianshu.com/p/1f9c71850299" target="_blank" rel="noopener">《[ HTTP 趣谈] origin, referer 和 host 区别》</a></p>
<h3 id="什么是-CSP？"><a href="#什么是-CSP？" class="headerlink" title="什么是 CSP？"></a>什么是 CSP？</h3><p>CSP 指的是内容安全策略，它的本质是建立一个白名单，告诉浏览器哪些外部资源可以加载和执行。我们只需要配置规则，如何拦截由浏览器自己来实现。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">通常有两种方式来开启 CSP</span><br><span class="line">一种是设置 HTTP 首部中的 Content-Security-Policy</span><br><span class="line">一种是设置 meta 标签的方式 &lt;metahttp-equiv=&quot;Content-Security-Policy&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>详细资料可以参考：<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP" target="_blank" rel="noopener">《内容安全策略（CSP）》</a><br><a href="https://juejin.im/book/5bdc715fe51d454e755f75ef/section/5bdc721851882516c33430a2" target="_blank" rel="noopener">《前端面试之道》</a></p>
<h3 id="什么是-Samesite-Cookie-属性？"><a href="#什么是-Samesite-Cookie-属性？" class="headerlink" title="什么是 Samesite Cookie 属性？"></a>什么是 Samesite Cookie 属性？</h3><p>Samesite Cookie 表示同站 cookie，避免 cookie 被第三方所利用。</p>
<p>将 Samesite 设为 strict ，这种称为严格模式，表示这个 cookie 在任何情况下都不可能作为第三方 cookie。</p>
<p>将 Samesite 设为 Lax ，这种模式称为宽松模式，如果这个请求是个 GET 请求，并且这个请求改变了当前页面或者打开了新的页面，那么这个 cookie 可以作为第三方 cookie，其余情况下都不能作为第三方 cookie。</p>
<p>使用这种方法的缺点是，因为它不支持子域，所以子域没有办法与主域共享登录信息，每次转入子域的网站，都回重新登录。还有一个问题就是它的兼容性不够好。</p>
<h3 id="什么是点击劫持？如何防范点击劫持？"><a href="#什么是点击劫持？如何防范点击劫持？" class="headerlink" title="什么是点击劫持？如何防范点击劫持？"></a>什么是点击劫持？如何防范点击劫持？</h3><p>点击劫持是一种视觉欺骗的攻击手段，攻击者将需要攻击的网站通过 iframe 嵌套的方式嵌入自己的网页中，并将 iframe 设置为透明，在页面中透出一个按钮诱导用户点击。</p>
<p>我们可以在 http 相应头中设置 X-FRAME-OPTIONS 来防御用 iframe 嵌套的点击劫持攻击。通过不同的值，可以规定页面在特定的一些情况才能作为 iframe 来使用。</p>
<p>详细资料可以参考：<br><a href="https://www.jianshu.com/p/251704d8ff18" target="_blank" rel="noopener">《web 安全之–点击劫持攻击与防御技术简介》</a></p>
<h3 id="SQL-注入攻击？"><a href="#SQL-注入攻击？" class="headerlink" title="SQL 注入攻击？"></a>SQL 注入攻击？</h3><p>SQL 注入攻击指的是攻击者在 HTTP 请求中注入恶意的 SQL 代码，服务器使用参数构建数据库 SQL 命令时，恶意 SQL 被一起构造，破坏原有 SQL 结构，并在数据库中执行，达到编写程序时意料之外结果的攻击行为。</p>
<p>详细资料可以参考：<br><a href="https://juejin.im/post/5bd5b820e51d456f72531fa8" target="_blank" rel="noopener">《Web 安全漏洞之 SQL 注入》</a><br><a href="http://blog.720ui.com/2016/security_web/#SQL%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB" target="_blank" rel="noopener">《如何防范常见的 Web 攻击》</a></p>
<h3 id="token有限期最佳是多长时间"><a href="#token有限期最佳是多长时间" class="headerlink" title="token有限期最佳是多长时间"></a>token有限期最佳是多长时间</h3><p>Token 的有效期（或称为“生命周期”）的最佳长度取决于你的具体应用场景和安全需求。以下是一些考虑因素，可以帮助你确定适合你的应用的 Token 有效期：</p>
<p><strong>安全性</strong>：</p>
<ul>
<li>较短的 Token 有效期意味着攻击者有更少的时间来利用被盗的 Token。</li>
<li>如果你的应用涉及敏感数据或高价值交易，建议使用较短的 Token 有效期。</li>
</ul>
<p><strong>用户体验</strong>：</p>
<ul>
<li>频繁地要求用户重新认证（例如，登录或刷新 Token）可能会降低用户体验。</li>
<li>对于非敏感应用或低频次使用的应用，可以考虑较长的 Token 有效期。</li>
</ul>
<p><strong>应用场景</strong>：</p>
<ul>
<li>对于一次性使用的 Token（如密码重置链接），有效期应该非常短（几分钟到几小时）。</li>
<li>对于持续会话（如 Web 应用中的用户会话），有效期可以更长（几小时到几天）。</li>
<li>对于 API 访问 Token（用于客户端与服务器之间的通信），有效期可能介于这两者之间，具体取决于 API 的使用频率和安全性要求。</li>
</ul>
<p><strong>刷新机制</strong>：</p>
<ul>
<li>如果你的应用支持 Token 刷新机制（即，使用刷新 Token 来获取新的访问 Token），你可以将访问 Token 的有效期设置得相对较短，并通过刷新 Token 来延长会话。</li>
<li>刷新 Token 通常具有更长的有效期，但也需要安全地存储和管理。</li>
</ul>
<p><strong>合规性</strong>：</p>
<ul>
<li>某些行业或地区可能有关于数据保护和身份验证的法规要求。确保你的 Token 有效期符合这些要求。</li>
</ul>
<p><strong>测试和调整</strong>：</p>
<ul>
<li>根据你的应用的实际使用情况，定期测试和评估 Token 有效期的设置。根据用户反馈和安全事件来调整有效期。</li>
</ul>
<p>总之，没有一种通用的“最佳” Token 有效期。你需要根据你的具体需求来权衡安全性、用户体验和其他因素，以确定适合你的应用的 Token 有效期。</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2024-05-14T06:45:23.839Z" itemprop="dateUpdated">2024-05-14 14:45:23</time>
</span><br>


        
        感谢您的阅读，欢迎评论(*^▽^*) 转载请附上本文链接：<a href="/knowledges/web-an-quan.html" target="_blank" rel="external">https://qw66.gitee.io/knowledges/web-an-quan.html</a>
        
    </div>
    
    <footer>
        <a href="https://qw66.gitee.io">
            <img src="/img/avatar.jpg" alt="秦伟">
            秦伟
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSRF/">CSRF</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTPS/">HTTPS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SQL注入/">SQL注入</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/XSS/">XSS</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://qw66.gitee.io/knowledges/web-an-quan.html&title=《Web安全》 — 秦伟博客&pic=https://qw66.gitee.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://qw66.gitee.io/knowledges/web-an-quan.html&title=《Web安全》 — 秦伟博客&source=前端、全栈、SEO的知识点、面试题与学习链接的整理" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://qw66.gitee.io/knowledges/web-an-quan.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Web安全》 — 秦伟博客&url=https://qw66.gitee.io/knowledges/web-an-quan.html&via=https://qw66.gitee.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://qw66.gitee.io/knowledges/web-an-quan.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/interview/zi-jie-tiao-dong-mian-jing-zong-jie.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">字节跳动面经总结</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/knowledges/webpack.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">webpack</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'false' == 'true',
            appId: "TJ17Ax10JrfIIljlO8qkwGvz-gzGzoHsz",
            appKey: "jDGQKdWT9hlzsTLRAbInE4bK",
            avatar: "mm",
            placeholder: "说点什么吧(*╹▽╹*)",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->










</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢您，我会继续努力哒(*^▽^*)
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

    <footer class="footer">
    <div class="top">
        <div class="map">
            <!--地球信息-->
<script type="text/javascript" src="/js/jquery-3.4.1.js"></script>
<script type="text/javascript">
    var windowWidth = $(window).width();
    if (windowWidth > 480) {
        document.write('<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5mz4gy0w2d8&amp;m=0&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33" async="async">  <\/script>');
    }
</script>
        </div>
        <p>
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>

</p>
        <p>
            <span>本网站总字数：832.4k</span>
            <span id="sitetime"></span>
        </p>
        <p>部分内容来源于互联网，用于个人知识的总结，如有侵权还请联系删除</p>
        <p>
            
            <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i
                    class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>

    <div class="bottom">
        <p>
            <span>Copyright &copy; 2019 - 2024 <a
                href="http://pdouyin.com/" target="_blank">秦伟的个人博客</a> All Rights Reserved.</span>
            <!-- <span>
                
                
            </span> -->
        </p>
    </div>
</footer>

<script language=javascript>
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
        year - 作为date对象的年份，为4位年份值
        month - 0-11之间的整数，做为date对象的月份
        day - 1-31之间的整数，做为date对象的天数
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
        minutes - 0-59之间的整数，做为date对象的分钟数
        seconds - 0-59之间的整数，做为date对象的秒数
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */
        var t1 = Date.UTC(2019, 8, 25, 18, 0, 0); // 北京时间
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
        document.getElementById("sitetime").innerHTML = "已安全运行 " + diffYears + "年 " + diffDays + "天 " + diffHours + "小时 " + diffMinutes + "分钟 " + diffSeconds + "秒";
    }
    siteTime();
</script>
</main>
<div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://qw66.gitee.io/knowledges/web-an-quan.html&title=《Web安全》 — 秦伟博客&pic=https://qw66.gitee.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://qw66.gitee.io/knowledges/web-an-quan.html&title=《Web安全》 — 秦伟博客&source=前端、全栈、SEO的知识点、面试题与学习链接的整理" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://qw66.gitee.io/knowledges/web-an-quan.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Web安全》 — 秦伟博客&url=https://qw66.gitee.io/knowledges/web-an-quan.html&via=https://qw66.gitee.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://qw66.gitee.io/knowledges/web-an-quan.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACMUlEQVR42u3a0U7DMAwFUP7/p4vE06Sy9dpJEU1OnyoYaU6RPDv211d8HT/X6/3rT959/vyZ8zrnz39eeejCwMB4LOP4eJ0fmTw4+W2P95aKgYGxASMJsu+C6ecV8mBaXRkDAwMjSd2q98mGMDAwMGYF3Ly4TZLO6ivAwMDYk5E/LE/gehu9vRbHwMB4IKPXGPib+9v7GxgYGP+ecQxcSbisBs3mTjAwMJZm5MMTeawbx1SbBBgYGGszkq33mpflw7J4UOOXdTAwMJZm3BFee42BuV8DGBgYKzHyx1dzsLzBkATZCxIGBsYGjN4gRW9QrNeMLJwaYmBgLMfojTvkZWo1P+2lmxgYGGsz8u32tpgzRhoMGBgY+zCqCVlSjt5XuF58Y2BgYCzESIrV/Hiud/TWm5q4yHAxMDAWYiQL5SGvN4rRe3GFKhwDA2MJxki61jvon/s6MDAwdmCMbDFvZI4UwBf/AAwMjKUZeaLW4/VGLqoDHBgYGDsw8kOx5GAubwPk+CjgYmBgbMCYO7zVK26rRXVzsgMDA+OxjF5JWR6JiJsQeXDHwMDYgTF+3t4LmrMaCRgYGGszjuKV83pBttdswMDAWJsxK/hWD/RHEkQMDIw9GdUgWz0sy7O48hFbb2kMDIzHMvIGQNRQbCGrrwkDAwMjT+xGxsJG0koMDAyM8XZmkuRVGwYTAi4GBsZjGdXCMm9wVtufzR4sBgbG0ozxSY2RkdZ81Cz5WwwMjOUY34Tak2F20eKqAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>




<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '(つェ⊂)咦!跑去哪里了';
            clearTimeout(titleTime);
        } else {
            document.title = '欢迎回来━(*｀∀´*)ノ';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>




<!-- 点击特效 -->
<script type="text/javascript" src="/js/clicklove.js"></script>
<!--动态线条背景-->
<script type="text/javascript"
        color="220,220,220" opacity='0.7' zIndex="-2" count="200"
        src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script>
<!-- 雪花特效 -->
<script type="text/javascript" src="/js/jquery-3.4.1.js"></script>
<script type="text/javascript">
    var windowWidth = $(window).width();
    if (windowWidth > 480) {
        document.write('<script type="text/javascript" src="/js/snow.js"><\/script>');
    }
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"superSample":2,"position":"right","width":150,"height":300,"hOffset":-25,"vOffset":30},"mobile":{"show":false,"scale":1.2},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script><script>!function(e){var r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function t(){for(var c=0;c<r.length;c++)t=r[c],void 0,0<=(n=t.getBoundingClientRect()).top&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=r[c];t=o,n=function(){r=r.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}t(),e.addEventListener("scroll",function(){!function(t,n){clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)}(t,e)})}(this);</script></body>
</html>
